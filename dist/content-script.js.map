{
  "version": 3,
  "sources": ["../src/content-script/index.js"],
  "sourcesContent": ["// Content script for X Bookmarks Extractor\nconsole.log('X Bookmarks Extractor: Content script loaded');\n\nclass XBookmarkScanner {\n  constructor() {\n    this.setupMessageListener();\n    this.cachedElements = new Map(); // Cache for DOM elements\n    this.performanceMetrics = { startTime: 0, endTime: 0, articlesProcessed: 0 };\n    console.log('[X Extractor] XBookmarkScanner initialized');\n    this.sendProgress('Content script initialized.');\n\n    // Initialize Add to Analyzer button injection\n    this.injectedButtons = new Set(); // Track which tweets have buttons\n    this.initializeButtonInjection();\n\n    // Intercepted Data Cache\n    this.interceptedTweets = new Map(); // id -> tweetData\n    this.injectInterceptor();\n    this.setupInterceptorListener();\n  }\n\n  injectInterceptor() {\n    const script = document.createElement('script');\n    script.src = chrome.runtime.getURL('injected.js');\n    script.onload = function () {\n      this.remove();\n    };\n    (document.head || document.documentElement).appendChild(script);\n    console.log('[X Extractor] Injected network interceptor');\n  }\n\n  setupInterceptorListener() {\n    window.addEventListener('x-bookmarks-response', (event) => {\n      const { data } = event.detail;\n      this.processInterception(data);\n    });\n  }\n\n  processInterception(data) {\n    try {\n      // Traverse JSON to find tweet entries\n      const entries = this.findEntries(data);\n      let count = 0;\n\n      entries.forEach(entry => {\n        const tweetResult = entry.content?.itemContent?.tweet_results?.result;\n        if (tweetResult) {\n          const tweet = this.parseTweetFromAPI(tweetResult);\n          if (tweet && tweet.url) {\n            this.interceptedTweets.set(tweet.url, tweet);\n            count++;\n          }\n        }\n      });\n\n      if (count > 0) {\n        console.log(`[X Extractor] Intercepted ${count} tweets from API`);\n        this.sendProgress(`Intercepted ${count} new bookmarks from network.`);\n\n        // SIGNAL POPUP: Data loaded\n        chrome.runtime.sendMessage({\n          type: 'X_BOOKMARKS_LOADED',\n          count: count,\n          timestamp: Date.now()\n        }).catch(() => { });\n      }\n    } catch (e) {\n      console.error('[X Extractor] Error processing interception:', e);\n    }\n  }\n\n  findEntries(obj, entries = []) {\n    if (!obj || typeof obj !== 'object') return entries;\n\n    // Check if this is an instruction with entries\n    if (obj.entries && Array.isArray(obj.entries)) {\n      entries.push(...obj.entries);\n    }\n\n    // Recursive search\n    Object.values(obj).forEach(value => this.findEntries(value, entries));\n    return entries;\n  }\n\n  parseTweetFromAPI(result) {\n    try {\n      const legacy = result.legacy;\n      const core = result.core?.user_results?.result?.legacy;\n      const note = result.note_tweet?.note_tweet_results?.result?.text; // Long tweets\n\n      if (!legacy || !core) return null;\n\n      const id = legacy.id_str;\n      const username = core.screen_name;\n      const text = note || legacy.full_text || '';\n\n      // Extract Media\n      let media = [];\n      const mediaEntities = legacy.extended_entities?.media || legacy.entities?.media || [];\n\n      media = mediaEntities.map(m => {\n        let url = m.media_url_https;\n        let type = m.type; // 'photo', 'video', 'animated_gif'\n\n        // For videos/gifs, find the best bitrate variant\n        if (m.video_info && m.video_info.variants) {\n          const variants = m.video_info.variants\n            .filter(v => v.content_type === 'video/mp4')\n            .sort((a, b) => (b.bitrate || 0) - (a.bitrate || 0));\n\n          if (variants.length > 0) {\n            url = variants[0].url;\n          }\n        }\n\n        return { type, url };\n      });\n\n      return {\n        url: `https://x.com/${username}/status/${id}`,\n        text: text,\n        displayName: core.name,\n        username: username,\n        dateTime: legacy.created_at, // \"Wed Oct 10 20:19:24 +0000 2018\"\n        likes: legacy.favorite_count?.toString() || '0',\n        retweets: legacy.retweet_count?.toString() || '0',\n        replies: legacy.reply_count?.toString() || '0',\n        views: result.views?.count?.toString() || '0',\n        media: media\n      };\n    } catch (e) {\n      return null;\n    }\n  }\n\n  async sendProgress(status) {\n    try {\n      chrome.runtime\n        .sendMessage({ type: 'progressUpdate', status })\n        .catch(() => { });\n    } catch (e) {\n      // ignore\n    }\n  }\n\n  setupMessageListener() {\n    chrome.runtime.onMessage.addListener((request, sender, sendResponse) => {\n      try {\n        console.log('[X Extractor] Received message:', request);\n        if (request.action === 'scanBookmarksWithFallback') {\n          this.sendProgress('Starting extraction...');\n          this.scanCurrentPage(true).then(result => {\n            this.sendProgress('Extraction complete.');\n            console.log('[X Extractor] scanCurrentPage complete:', result.tweets.length, 'tweets');\n            sendResponse({ ...result, success: true });\n          }).catch(error => {\n            this.sendProgress('Extraction failed.');\n            console.error('[X Extractor] Scanning error (fallback):', error);\n            sendResponse({ tweets: [], debugUrls: [], success: false, error: error.message });\n          });\n          return true;\n        }\n        if (request.action === 'scanBookmarks') {\n          this.sendProgress('Starting extraction...');\n          this.scanCurrentPage(false).then(result => {\n            this.sendProgress('Extraction complete.');\n            console.log('[X Extractor] scanCurrentPage complete:', result.tweets.length, 'tweets');\n            sendResponse({ tweets: result.tweets, success: true });\n          }).catch(error => {\n            this.sendProgress('Extraction failed.');\n            console.error('[X Extractor] Scanning error:', error);\n            sendResponse({ tweets: [], success: false, error: error.message });\n          });\n          return true;\n        }\n        if (request.action === 'getPageInfo') {\n          const info = {\n            url: window.location.href,\n            title: document.title,\n            isBookmarksPage: this.isBookmarksPage()\n          };\n          this.sendProgress('Checking if this is the bookmarks page...');\n          console.log('[X Extractor] getPageInfo:', info);\n          sendResponse(info);\n        }\n      } catch (err) {\n        this.sendProgress('Error in message listener.');\n        console.error('[X Extractor] Message listener error:', err);\n        sendResponse({ success: false, error: err.message });\n      }\n    });\n  }\n\n  isBookmarksPage() {\n    const isBookmarks = window.location.href.includes('/i/bookmarks');\n    this.sendProgress(isBookmarks ? 'On bookmarks page.' : 'Not on bookmarks page.');\n    console.log('[X Extractor] isBookmarksPage:', isBookmarks, window.location.href);\n    return isBookmarks;\n  }\n\n  // Unified scan method with optional fallback\n  async scanCurrentPage(useFallback = false) {\n    try {\n      this.performanceMetrics.startTime = performance.now();\n      this.sendProgress(useFallback ? 'Extracting bookmarks (with fallback)...' : 'Extracting visible bookmarks...');\n      console.log('[X Extractor] scanCurrentPage started, fallback:', useFallback);\n\n      const tweets = [];\n      const foundUrls = new Set();\n      const articles = document.querySelectorAll('article');\n      this.performanceMetrics.articlesProcessed = articles.length;\n\n      // Batch process articles for better performance\n      for (const article of articles) {\n        const tweetData = this.extractTweetData(article);\n        if (tweetData.url) {\n          // Validate bookmark data before adding\n          const validation = this.validateBookmarkData(tweetData);\n          if (validation.valid) {\n            foundUrls.add(tweetData.url);\n\n            // Prefer intercepted data if available (it has better metrics/full text)\n            if (this.interceptedTweets.has(tweetData.url)) {\n              tweets.push(this.interceptedTweets.get(tweetData.url));\n            } else {\n              tweets.push(tweetData);\n            }\n          } else {\n            console.warn('[X Extractor] Invalid bookmark data:', validation.error, tweetData.url);\n          }\n        }\n      }\n\n      // Add any intercepted tweets that weren't in the DOM (e.g. from previous pages/scrolls)\n      // This allows extracting \"invisible\" bookmarks if the API returned them\n      this.interceptedTweets.forEach((tweet, url) => {\n        if (!foundUrls.has(url)) {\n          foundUrls.add(url);\n          tweets.push(tweet);\n        }\n      });\n\n      // Fallback: find all tweet links that weren't in articles\n      if (useFallback) {\n        this.sendProgress('Checking for extra tweet links...');\n        const allLinks = Array.from(document.querySelectorAll('a[href*=\"/status/\"]'));\n        for (const link of allLinks) {\n          if (!foundUrls.has(link.href)) {\n            foundUrls.add(link.href);\n            // Extract username from URL for minimal data\n            const match = link.href.match(/(?:x\\.com|twitter\\.com)\\/([^\\/]+)\\/status/);\n            tweets.push({\n              url: link.href,\n              text: '',\n              displayName: '',\n              username: match ? match[1] : '',\n              dateTime: '',\n              likes: '',\n              retweets: '',\n              replies: '',\n              views: ''\n            });\n          }\n        }\n      }\n\n      this.performanceMetrics.endTime = performance.now();\n      const duration = Math.round(this.performanceMetrics.endTime - this.performanceMetrics.startTime);\n\n      this.sendProgress('Extraction finished.');\n      console.log(`[X Extractor] scanCurrentPage finished: ${tweets.length} tweets, ${duration}ms`);\n\n      return {\n        tweets,\n        debugUrls: useFallback ? Array.from(foundUrls) : undefined,\n        performance: {\n          duration,\n          articlesProcessed: this.performanceMetrics.articlesProcessed,\n          tweetsExtracted: tweets.length\n        }\n      };\n    } catch (err) {\n      this.sendProgress('Extraction error.');\n      console.error('[X Extractor] scanCurrentPage error:', err);\n      throw err;\n    }\n  }\n\n  // Extract data from a single article element (DRY principle)\n  // PERFORMANCE OPTIMIZED: Cache selectors and batch queries\n  extractTweetData(article) {\n    try {\n      // URL - Priority extraction, exit early if no URL\n      const link = article.querySelector('a[href*=\"/status/\"]');\n      const url = link ? link.href : '';\n      if (!url) return { url: '' };\n\n      // Text - use array join for efficiency\n      const textEls = article.querySelectorAll('[data-testid=\"tweetText\"]');\n      const textParts = [];\n      textEls.forEach(el => {\n        const text = el.textContent?.trim();\n        if (text) textParts.push(text);\n      });\n      const text = textParts.join(' ');\n\n      // Author display name & username\n      let displayName = '';\n      let username = '';\n\n      const header = article.querySelector('div[role=\"group\"]')?.parentElement?.parentElement;\n      if (header) {\n        const spans = header.querySelectorAll('span');\n        if (spans.length > 0) displayName = spans[0].textContent?.trim() || '';\n        // Find username span\n        for (const span of spans) {\n          const spanText = span.textContent?.trim();\n          if (spanText && spanText.startsWith('@')) {\n            username = spanText.replace('@', '');\n            break;\n          }\n        }\n      }\n\n      // Fallback for display name\n      if (!displayName) {\n        const nameSpan = article.querySelector('div[dir=\"auto\"] > span');\n        if (nameSpan) displayName = nameSpan.textContent?.trim() || '';\n      }\n\n      // Fallback for username\n      if (!username) {\n        const handleSpan = article.querySelector('div[dir=\"ltr\"] > span');\n        if (handleSpan) {\n          username = handleSpan.textContent?.replace('@', '').trim() || '';\n        }\n      }\n\n      // Extract username from URL if still missing\n      if (!username && url) {\n        const match = url.match(/(?:x\\.com|twitter\\.com)\\/([^\\/]+)\\/status/);\n        if (match) username = match[1];\n      }\n\n      // Date/time - single query\n      const timeEl = article.querySelector('time');\n      const dateTime = timeEl ? timeEl.getAttribute('datetime') || '' : '';\n\n      // Engagement metrics - PERFORMANCE: Query once and extract numbers more efficiently\n      const likeEl = article.querySelector('[data-testid=\"like\"]');\n      const likes = likeEl ? this.extractNumber(likeEl.textContent) : '';\n\n      const retweetEl = article.querySelector('[data-testid=\"retweet\"]');\n      const retweets = retweetEl ? this.extractNumber(retweetEl.textContent) : '';\n\n      const replyEl = article.querySelector('[data-testid=\"reply\"]');\n      const replies = replyEl ? this.extractNumber(replyEl.textContent) : '';\n\n      // Views - OPTIMIZED: More targeted selector\n      let views = '';\n      const allEls = article.querySelectorAll('a[aria-label*=\"View\"], span[aria-label*=\"View\"]');\n      for (const el of allEls) {\n        const label = el.getAttribute('aria-label');\n        if (label && /view/i.test(label)) {\n          views = this.extractNumber(label);\n          break;\n        }\n      }\n\n      return {\n        url,\n        text,\n        displayName,\n        username,\n        dateTime,\n        likes,\n        retweets,\n        replies,\n        views\n      };\n    } catch (error) {\n      console.error('[X Extractor] Error extracting tweet data:', error);\n      // Return minimal valid data on error\n      return {\n        url: '',\n        text: '',\n        displayName: '',\n        username: '',\n        dateTime: '',\n        likes: '',\n        retweets: '',\n        replies: '',\n        views: ''\n      };\n    }\n  }\n\n  // PERFORMANCE HELPER: Extract numbers more efficiently and handle K/M/B abbreviations\n  extractNumber(text) {\n    if (!text) return '';\n\n    // Match numbers with K/M/B abbreviations (e.g., \"1.2K\", \"3.5M\", \"1B\")\n    const abbreviationMatch = text.match(/([\\d,.]+)\\s*([KMBkmb])/);\n    if (abbreviationMatch) {\n      const num = parseFloat(abbreviationMatch[1].replace(/,/g, ''));\n      const suffix = abbreviationMatch[2].toUpperCase();\n\n      const multipliers = {\n        'K': 1000,\n        'M': 1000000,\n        'B': 1000000000\n      };\n\n      const result = num * (multipliers[suffix] || 1);\n      return Math.round(result).toString();\n    }\n\n    // Match plain numbers with commas (e.g., \"1,234\" or \"1234\")\n    const numberMatch = text.match(/([\\d,.]+)/);\n    return numberMatch ? numberMatch[1].replace(/,/g, '') : '';\n  }\n\n  // Validate bookmark data before storing\n  validateBookmarkData(bookmark) {\n    if (!bookmark || typeof bookmark !== 'object') {\n      return { valid: false, error: 'Invalid bookmark object' };\n    }\n\n    // URL is required\n    if (!bookmark.url || typeof bookmark.url !== 'string' || bookmark.url.trim() === '') {\n      return { valid: false, error: 'Missing or invalid URL' };\n    }\n\n    // URL must be a valid X/Twitter status URL\n    if (!bookmark.url.match(/(?:x\\.com|twitter\\.com)\\/[^\\/]+\\/status\\/\\d+/)) {\n      return { valid: false, error: 'Invalid X/Twitter URL format' };\n    }\n\n    return { valid: true, error: null };\n  }\n\n  // ============================================\n  // ADD TO ANALYZER BUTTON INJECTION\n  // ============================================\n\n  initializeButtonInjection() {\n    console.log('[X Extractor] Initializing Add to Analyzer button injection');\n\n    // Inject buttons on initial load\n    this.injectAddToAnalyzerButtons();\n\n    // Watch for new tweets being loaded (infinite scroll)\n    const observer = new MutationObserver((mutations) => {\n      // Debounce: only inject after mutations settle\n      if (this.injectionTimeout) clearTimeout(this.injectionTimeout);\n      this.injectionTimeout = setTimeout(() => {\n        this.injectAddToAnalyzerButtons();\n      }, 500);\n    });\n\n    // Observe the main timeline for new tweets\n    const timeline = document.querySelector('div[aria-label=\"Timeline: Your Home Timeline\"]') ||\n      document.querySelector('main[role=\"main\"]') ||\n      document.body;\n\n    if (timeline) {\n      observer.observe(timeline, {\n        childList: true,\n        subtree: true\n      });\n      console.log('[X Extractor] Mutation observer attached to timeline');\n    }\n  }\n\n  injectAddToAnalyzerButtons() {\n    const articles = document.querySelectorAll('article');\n    let injectedCount = 0;\n\n    articles.forEach(article => {\n      const tweetUrl = this.getTweetUrl(article);\n      if (!tweetUrl || this.injectedButtons.has(tweetUrl)) {\n        return; // Skip if already injected or no URL\n      }\n\n      // Find the action bar (like, retweet, reply buttons)\n      const actionBar = article.querySelector('div[role=\"group\"]');\n      if (!actionBar) return;\n\n      // Create the custom button\n      const analyzerButton = this.createAnalyzerButton(article, tweetUrl);\n\n      // Inject the button into the action bar\n      const lastButton = actionBar.lastElementChild;\n      if (lastButton) {\n        actionBar.insertBefore(analyzerButton, lastButton.nextSibling);\n        this.injectedButtons.add(tweetUrl);\n        injectedCount++;\n      }\n    });\n\n    if (injectedCount > 0) {\n      console.log(`[X Extractor] Injected ${injectedCount} Add to Analyzer buttons`);\n    }\n  }\n\n  getTweetUrl(article) {\n    const link = article.querySelector('a[href*=\"/status/\"]');\n    return link ? link.href : null;\n  }\n\n  createAnalyzerButton(article, tweetUrl) {\n    const container = document.createElement('div');\n    container.className = 'x-analyzer-button-container';\n    container.style.cssText = `\n      display: inline-flex;\n      align-items: center;\n      margin-left: 8px;\n    `;\n\n    const button = document.createElement('button');\n    button.className = 'x-analyzer-button';\n    button.setAttribute('aria-label', 'Add to Analyzer');\n    button.style.cssText = `\n      background: transparent;\n      border: none;\n      cursor: pointer;\n      padding: 8px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      border-radius: 9999px;\n      transition: background-color 0.2s;\n      color: rgb(113, 118, 123);\n      min-width: 32px;\n      min-height: 32px;\n    `;\n\n    // Icon (bookmark-plus icon)\n    button.innerHTML = `\n      <svg viewBox=\"0 0 24 24\" width=\"18\" height=\"18\" fill=\"currentColor\">\n        <path d=\"M4 4.5C4 3.12 5.119 2 6.5 2h11C18.881 2 20 3.12 20 4.5v18.44l-8-5.71-8 5.71V4.5zM6.5 4c-.276 0-.5.22-.5.5v14.56l6-4.29 6 4.29V4.5c0-.28-.224-.5-.5-.5h-11z\"/>\n        <path d=\"M12 6v4m0 0v4m0-4h4m-4 0H8\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n      </svg>\n    `;\n\n    // Hover effects\n    button.addEventListener('mouseenter', () => {\n      button.style.backgroundColor = 'rgba(29, 155, 240, 0.1)';\n      button.style.color = 'rgb(29, 155, 240)';\n    });\n\n    button.addEventListener('mouseleave', () => {\n      button.style.backgroundColor = 'transparent';\n      button.style.color = 'rgb(113, 118, 123)';\n    });\n\n    // Click handler\n    button.addEventListener('click', (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      this.handleAddToAnalyzer(article, tweetUrl, button);\n    });\n\n    container.appendChild(button);\n    return container;\n  }\n\n  async handleAddToAnalyzer(article, tweetUrl, button) {\n    console.log('[X Extractor] Add to Analyzer clicked:', tweetUrl);\n\n    // Visual feedback\n    button.style.color = 'rgb(29, 155, 240)';\n    button.style.transform = 'scale(1.1)';\n    setTimeout(() => {\n      button.style.transform = 'scale(1)';\n    }, 200);\n\n    // Extract tweet data\n    const tweetData = this.extractTweetData(article);\n\n    // Show quick tagging dialog\n    this.showQuickTagDialog(tweetData, button);\n  }\n\n  showQuickTagDialog(tweetData, buttonEl) {\n    // Remove any existing dialog\n    const existingDialog = document.querySelector('.x-analyzer-tag-dialog');\n    if (existingDialog) existingDialog.remove();\n\n    // Create dialog\n    const dialog = document.createElement('div');\n    dialog.className = 'x-analyzer-tag-dialog';\n    dialog.style.cssText = `\n      position: fixed;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      background: white;\n      border-radius: 16px;\n      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);\n      padding: 24px;\n      z-index: 10000;\n      min-width: 400px;\n      max-width: 500px;\n      font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif;\n    `;\n\n    // Check for dark mode\n    const isDark = document.documentElement.style.backgroundColor === 'rgb(0, 0, 0)' ||\n      document.body.style.backgroundColor === 'rgb(0, 0, 0)' ||\n      window.matchMedia('(prefers-color-scheme: dark)').matches;\n\n    if (isDark) {\n      dialog.style.background = 'rgb(21, 32, 43)';\n      dialog.style.color = 'rgb(231, 233, 234)';\n    }\n\n    dialog.innerHTML = `\n      <div style=\"margin-bottom: 16px;\">\n        <h3 style=\"margin: 0 0 8px 0; font-size: 20px; font-weight: 700;\">Add to Analyzer</h3>\n        <p style=\"margin: 0; font-size: 14px; color: ${isDark ? 'rgb(139, 152, 165)' : 'rgb(83, 100, 113)'};\">\n          by @${tweetData.username || 'unknown'}\n        </p>\n      </div>\n\n      <div style=\"margin-bottom: 16px; max-height: 100px; overflow-y: auto; padding: 12px; background: ${isDark ? 'rgb(15, 20, 25)' : 'rgb(247, 249, 249)'}; border-radius: 8px;\">\n        <p style=\"margin: 0; font-size: 14px; line-height: 1.4;\">\n          ${tweetData.text.substring(0, 200)}${tweetData.text.length > 200 ? '...' : ''}\n        </p>\n      </div>\n\n      <div style=\"margin-bottom: 16px;\">\n        <label style=\"display: block; margin-bottom: 8px; font-size: 14px; font-weight: 600;\">\n          Quick Tags (optional)\n        </label>\n        <input\n          type=\"text\"\n          id=\"x-analyzer-tags-input\"\n          placeholder=\"e.g., important, to-read, ai\"\n          style=\"width: 100%; padding: 10px 12px; border: 1px solid ${isDark ? 'rgb(56, 68, 77)' : 'rgb(207, 217, 222)'}; border-radius: 8px; font-size: 14px; background: ${isDark ? 'rgb(15, 20, 25)' : 'white'}; color: ${isDark ? 'rgb(231, 233, 234)' : 'rgb(15, 20, 25)'};\"\n        />\n        <p style=\"margin: 8px 0 0 0; font-size: 12px; color: ${isDark ? 'rgb(139, 152, 165)' : 'rgb(83, 100, 113)'};\">\n          Separate tags with commas\n        </p>\n      </div>\n\n      <div style=\"margin-bottom: 16px;\">\n        <label style=\"display: block; margin-bottom: 8px; font-size: 14px; font-weight: 600;\">\n          Notes (optional)\n        </label>\n        <textarea\n          id=\"x-analyzer-notes-input\"\n          placeholder=\"Add any notes about this tweet...\"\n          style=\"width: 100%; padding: 10px 12px; border: 1px solid ${isDark ? 'rgb(56, 68, 77)' : 'rgb(207, 217, 222)'}; border-radius: 8px; font-size: 14px; min-height: 60px; resize: vertical; background: ${isDark ? 'rgb(15, 20, 25)' : 'white'}; color: ${isDark ? 'rgb(231, 233, 234)' : 'rgb(15, 20, 25)'}; font-family: inherit;\"\n        ></textarea>\n      </div>\n\n      <div style=\"display: flex; gap: 12px; justify-content: flex-end;\">\n        <button id=\"x-analyzer-cancel\" style=\"padding: 10px 24px; background: transparent; border: 1px solid ${isDark ? 'rgb(56, 68, 77)' : 'rgb(207, 217, 222)'}; border-radius: 9999px; cursor: pointer; font-weight: 600; font-size: 14px; color: ${isDark ? 'rgb(231, 233, 234)' : 'rgb(15, 20, 25)'}; transition: background-color 0.2s;\">\n          Cancel\n        </button>\n        <button id=\"x-analyzer-save\" style=\"padding: 10px 24px; background: rgb(29, 155, 240); border: none; border-radius: 9999px; cursor: pointer; font-weight: 600; font-size: 14px; color: white; transition: background-color 0.2s;\">\n          Save to Analyzer\n        </button>\n      </div>\n    `;\n\n    // Backdrop\n    const backdrop = document.createElement('div');\n    backdrop.className = 'x-analyzer-backdrop';\n    backdrop.style.cssText = `\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0, 0, 0, 0.5);\n      z-index: 9999;\n    `;\n\n    // Add to DOM\n    document.body.appendChild(backdrop);\n    document.body.appendChild(dialog);\n\n    // Focus the tags input\n    const tagsInput = dialog.querySelector('#x-analyzer-tags-input');\n    setTimeout(() => tagsInput.focus(), 100);\n\n    // Event handlers\n    const closeDialog = () => {\n      backdrop.remove();\n      dialog.remove();\n    };\n\n    backdrop.addEventListener('click', closeDialog);\n\n    dialog.querySelector('#x-analyzer-cancel').addEventListener('click', closeDialog);\n\n    dialog.querySelector('#x-analyzer-save').addEventListener('click', async () => {\n      const tags = tagsInput.value\n        .split(',')\n        .map(t => t.trim())\n        .filter(t => t.length > 0);\n\n      const notes = dialog.querySelector('#x-analyzer-notes-input').value.trim();\n\n      await this.saveToAnalyzer(tweetData, tags, notes);\n\n      // Visual confirmation\n      buttonEl.style.color = 'rgb(0, 186, 124)'; // Green checkmark color\n      buttonEl.innerHTML = `\n        <svg viewBox=\"0 0 24 24\" width=\"18\" height=\"18\" fill=\"currentColor\">\n          <path d=\"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z\"/>\n        </svg>\n      `;\n\n      // Show toast notification\n      this.showToast('Saved to Analyzer! \u2713');\n\n      closeDialog();\n    });\n  }\n\n  async saveToAnalyzer(tweetData, tags, notes) {\n    try {\n      // Validate bookmark data before saving\n      const validation = this.validateBookmarkData(tweetData);\n      if (!validation.valid) {\n        console.error('[X Extractor] Invalid bookmark data:', validation.error);\n        this.showToast('Error: ' + validation.error, true);\n        return;\n      }\n\n      // Get existing manual bookmarks\n      const result = await chrome.storage.local.get('manualBookmarks');\n      const manualBookmarks = result.manualBookmarks || [];\n\n      // Add timestamp\n      const bookmarkWithMetadata = {\n        ...tweetData,\n        savedAt: new Date().toISOString(),\n        customTags: tags,\n        notes: notes,\n        source: 'manual'\n      };\n\n      // Check for duplicates\n      const exists = manualBookmarks.some(b => b.url === tweetData.url);\n      if (!exists) {\n        manualBookmarks.unshift(bookmarkWithMetadata);\n      } else {\n        // Update existing\n        const index = manualBookmarks.findIndex(b => b.url === tweetData.url);\n        manualBookmarks[index] = {\n          ...manualBookmarks[index],\n          ...bookmarkWithMetadata\n        };\n      }\n\n      // Save to storage\n      await chrome.storage.local.set({ manualBookmarks });\n\n      console.log('[X Extractor] Saved to analyzer:', tweetData.url);\n    } catch (error) {\n      console.error('[X Extractor] Error saving to analyzer:', error);\n      this.showToast('Error saving bookmark', true);\n    }\n  }\n\n  showToast(message, isError = false) {\n    const toast = document.createElement('div');\n    toast.style.cssText = `\n      position: fixed;\n      bottom: 24px;\n      left: 50%;\n      transform: translateX(-50%);\n      background: ${isError ? 'rgb(244, 33, 46)' : 'rgb(0, 186, 124)'};\n      color: white;\n      padding: 12px 24px;\n      border-radius: 9999px;\n      font-size: 14px;\n      font-weight: 600;\n      z-index: 10001;\n      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n      font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif;\n    `;\n    toast.textContent = message;\n\n    document.body.appendChild(toast);\n\n    setTimeout(() => {\n      toast.style.transition = 'opacity 0.3s';\n      toast.style.opacity = '0';\n      setTimeout(() => toast.remove(), 300);\n    }, 2000);\n  }\n}\n\n// Initialize the scanner\nnew XBookmarkScanner(); if (typeof module !== 'undefined' && module.exports) { module.exports = { XBookmarkScanner }; }\n"],
  "mappings": "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",
  "names": ["_a", "text"]
}
