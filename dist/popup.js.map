{
  "version": 3,
  "sources": ["../src/popup/index.js"],
  "sourcesContent": ["// X Bookmarks Analyzer with AI - Popup Script v0.12.1\n\nclass PopupController {\n  constructor() {\n    this.initializeState();\n    this.bindElements();\n    this.setupEventListeners();\n    this.setupKeyboardShortcuts(); // NEW v0.11.0\n    this.loadSettings().then(() => {\n      this.loadLastExtraction();\n      this.render();\n      this.checkReminders(); // Check reminders on startup\n    });\n  }\n\n  initializeState = () => {\n    this.state = {\n      lastExtraction: null,\n      filteredBookmarks: null, // For search/filter results\n      isDarkMode: false,\n      aiAnalysis: null,\n      apiKey: '',\n      llmProvider: 'none', // 'openai', 'anthropic', 'none'\n      systemPrompt: '', // Custom system prompt\n      renderedCount: 50, // Infinite scroll\n      searchQuery: '',\n      filterOptions: {\n        minLikes: 0,\n        minRetweets: 0,\n        author: '',\n        dateFrom: '',\n        dateTo: '',\n        readStatus: 'all', // 'all', 'read', 'unread'\n        hasNotes: false,\n        collections: []\n      },\n      progress: {\n        current: 0,\n        total: 0,\n        status: 'Ready'\n      },\n      performanceMetrics: {\n        lastExtractionTime: 0,\n        lastAnalysisTime: 0,\n        bookmarksExtracted: 0\n      },\n      // NEW FEATURES v0.10.0\n      bookmarkMetadata: {}, // { url: { read: bool, notes: string, customTags: [], favorite: bool, collection: string, archived: bool, highlights: [], readingPriority: 0 } }\n      collections: [], // { id, name, color, bookmarkCount }\n      savedSearches: [], // { id, name, query, filters }\n      viewMode: 'list', // 'list', 'grid', 'card'\n      reminders: [], // { bookmarkUrl, reminderDate, message }\n      // NEW FEATURES v0.11.0\n      bulkSelection: [], // Array of selected bookmark URLs\n      undoStack: [], // History stack for undo\n      redoStack: [], // History stack for redo\n      readingQueue: [], // { bookmarkUrl, priority, addedDate }\n      engagementHistory: {}, // { url: [{ timestamp, likes, retweets, replies, views }] }\n      analysisStatus: 'ready',\n    };\n\n\n    this.constants = {\n      BATCH_SIZE: 100,\n      SCROLL_DELAY: 1000,\n      MAX_SAFE_BOOKMARKS: 500,\n      AI_ANALYSIS_LIMIT: 50,\n      AI_MAX_TOKENS: 500,\n      AI_TEMPERATURE: 0.7,\n      AI_MODEL: 'gpt-3.5-turbo',\n      AUTO_SCROLL_DELAY: 2000,\n      AUTO_SCROLL_MAX_ATTEMPTS: 50,\n      AUTO_SCROLL_STABLE_ATTEMPTS: 3,\n      POST_SCROLL_DELAY: 1000,\n      POST_SCAN_DELAY: 1000,\n      API_KEY_MIN_LENGTH: 20,\n      MAX_TAGS: 20,\n      MAX_CATEGORIES: 10,\n      API_RETRY_ATTEMPTS: 3,\n      API_RETRY_DELAY: 1000\n    };\n\n    // Debounced functions cache\n    this.debouncedSearch = this.debounce(this.performSearch.bind(this), 300);\n  };\n\n  bindElements = () => {\n    this.elements = {\n      statusBar: document.getElementById('status-bar'),\n      extractionStatus: document.getElementById('extraction-status'),\n      progressBar: document.getElementById('progress-container'),\n      progressFill: document.querySelector('.progress-fill'),\n      progressText: document.getElementById('progress-text'),\n      darkModeToggle: document.getElementById('darkModeToggle'),\n      clearStorageBtn: document.getElementById('clearStorageBtn'),\n      bookmarksBtn: document.getElementById('bookmarksBtn'),\n      scanBtn: document.getElementById('scanBtn'),\n      autoScrollBtn: document.getElementById('autoScrollBtn'),\n      analyzeAiBtn: document.getElementById('analyzeAiBtn'),\n      exportMdBtn: document.getElementById('exportMdBtn'),\n      exportCsvBtn: document.getElementById('exportCsvBtn'),\n      searchInput: document.getElementById('searchInput'),\n      filterBtn: document.getElementById('filterBtn'),\n      mainContent: document.getElementById('mainContent'),\n      closeBtn: document.getElementById('closeBtn'),\n      settingsBtn: document.getElementById('settingsBtn'),\n      viewModeBtn: document.getElementById('viewModeBtn'),\n      exportNotionBtn: document.getElementById('exportNotionBtn'),\n      exportObsidianBtn: document.getElementById('exportObsidianBtn'),\n      sentimentBtn: document.getElementById('sentimentBtn'),\n      aiQABtn: document.getElementById('aiQABtn'),\n      authorAnalyticsBtn: document.getElementById('authorAnalyticsBtn'),\n      hiddenGemsBtn: document.getElementById('hiddenGemsBtn'),\n      // Tabs\n      tabBtns: document.querySelectorAll('.tab-btn'),\n      tabContents: document.querySelectorAll('.tab-content'),\n      libraryContainer: document.getElementById('library-container')\n    };\n\n    // Tab Event Listeners\n    this.elements.tabBtns.forEach(btn => {\n      btn.addEventListener('click', () => {\n        const tabName = btn.getAttribute('data-tab');\n        this.switchTab(tabName);\n      });\n    });\n  };\n\n  switchTab = (tabName) => {\n    this.elements.tabBtns.forEach(btn => {\n      if (btn.getAttribute('data-tab') === tabName) {\n        btn.classList.add('active');\n      } else {\n        btn.classList.remove('active');\n      }\n    });\n\n    this.elements.tabContents.forEach(content => {\n      if (content.id === `tab-${tabName}`) {\n        content.classList.add('active');\n      } else {\n        content.classList.remove('active');\n      }\n    });\n\n    // Refresh library if switching to it\n    if (tabName === 'library') {\n      this.renderLibrary();\n    }\n  };\n\n  // Infinite Scroll Observer\n  setupIntersectionObserver = () => {\n    this.observer = new IntersectionObserver((entries) => {\n      if (entries[0].isIntersecting) {\n        this.renderLibrary(true); // Append mode\n      }\n    }, { root: null, rootMargin: '100px', threshold: 0.1 });\n  };\n\n  renderLibrary = (append = false) => {\n    const container = this.elements.libraryContainer;\n    if (!container) return;\n\n    if (!this.observer) this.setupIntersectionObserver();\n\n    const bookmarks = this.state.filteredBookmarks || this.state.lastExtraction;\n\n    // Empty state\n    if (!bookmarks || bookmarks.length === 0) {\n      container.innerHTML = `\n        <div class=\"empty-state\" style=\"grid-column: 1/-1; text-align: center; padding: 40px; color: var(--disabled-color); display: flex; flex-direction: column; align-items: center; gap: 16px;\">\n          <div style=\"font-size: 48px;\">\uD83D\uDD0D</div>\n          <p>No bookmarks found here.</p>\n          <button id=\"startScanBtn\" class=\"action-button primary\">Start New Scan</button>\n        </div>\n      `;\n      // Guided Empty State Listener\n      setTimeout(() => {\n        const startBtn = container.querySelector('#startScanBtn');\n        if (startBtn) {\n          startBtn.addEventListener('click', () => {\n            this.switchTab('scan');\n            // Optionally highlight the scan button or auto-start? \n            // For now just switch.\n          });\n        }\n      }, 0);\n      return;\n    }\n\n    // Reset if not appending\n    if (!append) {\n      container.innerHTML = '';\n      this.state.renderedCount = 50;\n      window.scrollTo(0, 0); // Reset scroll\n    }\n\n    // Calculate range\n    const start = append ? document.querySelectorAll('.bookmark-card').length : 0;\n    const end = this.state.renderedCount;\n\n    // Check if we need to render more\n    const toRender = bookmarks.slice(start, end);\n\n    toRender.forEach(bookmark => {\n      const card = document.createElement('div');\n      card.className = 'bookmark-card';\n\n      // Find image\n      let bgImage = '';\n      if (bookmark.media && bookmark.media.length > 0) {\n        // Prefer image type\n        const img = bookmark.media.find(m => m.type === 'photo') || bookmark.media[0];\n        bgImage = `url('${img.media_url_https || img.url}')`;\n      }\n\n      card.innerHTML = `\n        <div class=\"card-media\" style=\"${bgImage ? 'background-image: ' + bgImage : ''}\">\n           ${!bgImage ? '<div style=\"display:flex;align-items:center;justify-content:center;height:100%;color:var(--disabled-color);font-size:24px;\">\uD83D\uDCDD</div>' : ''}\n           <div class=\"card-actions-overlay\">\n             <div class=\"card-action-btn copy-btn\" title=\"Copy Link\">\uD83D\uDD17</div>\n             <div class=\"card-action-btn collection-btn\" title=\"Add to Collection\">\uD83D\uDCC2</div>\n             <div class=\"card-action-btn favorite-btn ${bookmark.favorite ? 'active' : ''}\" title=\"Favorite\">\u2764\uFE0F</div>\n           </div>\n        </div>\n        <div class=\"card-content\">\n          <div class=\"card-text\">${bookmark.text}</div>\n          <div class=\"card-footer\">\n            <span>@${bookmark.username}</span>\n            <span>\u2764\uFE0F ${bookmark.likes}</span>\n          </div>\n        </div>\n      `;\n\n      card.addEventListener('click', (e) => {\n        // Prevent opening if clicking an action button\n        if (e.target.closest('.card-action-btn')) return;\n        window.open(bookmark.url, '_blank');\n      });\n\n      // Quick Actions\n      const copyBtn = card.querySelector('.copy-btn');\n      copyBtn.addEventListener('click', (e) => {\n        e.stopPropagation();\n        navigator.clipboard.writeText(bookmark.url);\n        this.showToast('Link copied to clipboard!', 'success');\n      });\n\n      const collectionBtn = card.querySelector('.collection-btn');\n      collectionBtn.addEventListener('click', (e) => {\n        e.stopPropagation();\n        this.state.bulkSelection = [bookmark.url];\n        this.showCollectionsDialog();\n      });\n\n      const favoriteBtn = card.querySelector('.favorite-btn');\n      favoriteBtn.addEventListener('click', async (e) => {\n        e.stopPropagation();\n        bookmark.favorite = !bookmark.favorite;\n        favoriteBtn.classList.toggle('active');\n        // Persist change needed? Yes, but batch it or just rely on state?\n        // Ideally should save to storage.\n        // Quick dirty save:\n        await chrome.storage.local.set({ lastExtraction: this.state.lastExtraction });\n        this.showToast(bookmark.favorite ? 'Added to favorites' : 'Removed from favorites', 'success');\n      });\n\n      container.appendChild(card);\n    });\n\n    // Handle Sentinel (Infinite Scroll)\n    const existingSentinel = document.getElementById('infinite-scroll-sentinel');\n    if (existingSentinel) existingSentinel.remove();\n\n    if (this.state.renderedCount < bookmarks.length) {\n      const sentinel = document.createElement('div');\n      sentinel.id = 'infinite-scroll-sentinel';\n      sentinel.style.height = '20px';\n      sentinel.style.width = '100%';\n      // sentinel.textContent = 'Loading more...'; // Optional visual\n      container.appendChild(sentinel);\n\n      // Update state for NEXT render\n      this.state.renderedCount += 50;\n\n      // Observe\n      this.observer.observe(sentinel);\n    }\n  };\n\n  loadSettings = async () => {\n    const settings = await chrome.storage.local.get([\n      'settings', 'apiKey', 'llmProvider', 'bookmarkMetadata',\n      'collections', 'savedSearches', 'viewMode', 'reminders',\n      'readingQueue', 'engagementHistory', 'systemPrompt'\n    ]);\n    if (settings.settings) {\n      this.state.isDarkMode = settings.settings.darkMode || false;\n      this.updateTheme();\n    }\n    if (settings.apiKey) {\n      this.state.apiKey = settings.apiKey;\n    }\n    if (settings.llmProvider) {\n      this.state.llmProvider = settings.llmProvider;\n    }\n    if (settings.systemPrompt) {\n      this.state.systemPrompt = settings.systemPrompt;\n    }\n    // NEW v0.10.0\n    if (settings.bookmarkMetadata) {\n      this.state.bookmarkMetadata = settings.bookmarkMetadata;\n    }\n    if (settings.collections) {\n      this.state.collections = settings.collections;\n    }\n    if (settings.savedSearches) {\n      this.state.savedSearches = settings.savedSearches;\n    }\n    if (settings.viewMode) {\n      this.state.viewMode = settings.viewMode;\n    }\n    if (settings.reminders) {\n      this.state.reminders = settings.reminders;\n    }\n    // NEW v0.11.0\n    if (settings.readingQueue) {\n      this.state.readingQueue = settings.readingQueue;\n    }\n    if (settings.engagementHistory) {\n      this.state.engagementHistory = settings.engagementHistory;\n    }\n  };\n\n  saveSettings = async () => {\n    await chrome.storage.local.set({\n      settings: {\n        darkMode: this.state.isDarkMode\n      },\n      bookmarkMetadata: this.state.bookmarkMetadata,\n      collections: this.state.collections,\n      savedSearches: this.state.savedSearches,\n      viewMode: this.state.viewMode,\n      reminders: this.state.reminders,\n      readingQueue: this.state.readingQueue,\n      engagementHistory: this.state.engagementHistory\n    });\n  };\n\n  validateApiKey = (apiKey, provider) => {\n    if (!apiKey || typeof apiKey !== 'string') {\n      return { valid: false, error: 'API key is required' };\n    }\n\n    const trimmedKey = apiKey.trim();\n\n    // Empty check\n    if (trimmedKey.length === 0) {\n      return { valid: false, error: 'API key cannot be empty' };\n    }\n\n    // Provider-specific validation\n    if (provider === 'openai') {\n      // OpenAI API keys start with 'sk-' and are typically 40+ characters\n      if (!trimmedKey.startsWith('sk-')) {\n        return { valid: false, error: 'Invalid API key format. OpenAI keys start with \"sk-\"' };\n      }\n    } else if (provider === 'anthropic') {\n      // Anthropic API keys start with 'sk-ant-'\n      if (!trimmedKey.startsWith('sk-ant-')) {\n        return { valid: false, error: 'Invalid API key format. Anthropic keys start with \"sk-ant-\"' };\n      }\n    } else if (provider === 'gemini') {\n      // Gemini API keys usually start with 'AIza'\n      if (!trimmedKey.startsWith('AIza')) {\n        return { valid: false, error: 'Invalid API key format. Gemini keys usually start with \"AIza\"' };\n      }\n    }\n\n    if (trimmedKey.length < this.constants.API_KEY_MIN_LENGTH) {\n      return { valid: false, error: 'API key is too short. Please check your key.' };\n    }\n\n    return { valid: true, error: null };\n  };\n\n  saveApiKey = async (apiKey) => {\n    this.state.apiKey = apiKey;\n    await chrome.storage.local.set({ apiKey: apiKey });\n  };\n\n  loadLastExtraction = async () => {\n    const result = await chrome.storage.local.get(['lastExtraction', 'aiAnalysis', 'performanceMetrics', 'manualBookmarks']);\n\n    // Merge native and manual bookmarks for unified view\n    let allBookmarks = [];\n\n    if (result.lastExtraction) {\n      allBookmarks = result.lastExtraction.bookmarks || [];\n      this.updateExtractionStatus(result.lastExtraction.timestamp);\n    }\n\n    // Add manual bookmarks with source indicator\n    if (result.manualBookmarks && result.manualBookmarks.length > 0) {\n      allBookmarks = [...allBookmarks, ...result.manualBookmarks];\n    }\n\n    // Remove duplicates based on URL (keep most recent)\n    const uniqueBookmarks = [];\n    const seenUrls = new Set();\n\n    // Sort by savedAt/timestamp to keep most recent\n    allBookmarks.sort((a, b) => {\n      const dateA = new Date(a.savedAt || a.dateTime || 0);\n      const dateB = new Date(b.savedAt || b.dateTime || 0);\n      return dateB - dateA;\n    });\n\n    for (const bookmark of allBookmarks) {\n      if (bookmark.url && !seenUrls.has(bookmark.url)) {\n        uniqueBookmarks.push(bookmark);\n        seenUrls.add(bookmark.url);\n      }\n    }\n\n    this.state.lastExtraction = uniqueBookmarks;\n    this.updateUI();\n\n    if (result.aiAnalysis) {\n      this.state.aiAnalysis = result.aiAnalysis;\n    }\n    if (result.performanceMetrics) {\n      this.state.performanceMetrics = result.performanceMetrics;\n    }\n  };\n\n  setupEventListeners = () => {\n    // Dark mode toggle\n    this.elements.darkModeToggle?.addEventListener('change', e => this.handleDarkModeToggle(e));\n\n    // Clear storage\n    this.elements.clearStorageBtn?.addEventListener('click', () => this.handleClearStorage());\n\n    // Scan buttons\n    this.elements.scanBtn?.addEventListener('click', () => this.handleScan());\n    this.elements.autoScrollBtn?.addEventListener('click', () => this.handleAutoScroll());\n    this.elements.bookmarksBtn?.addEventListener('click', () => this.openBookmarksPage());\n\n    // AI Analysis button\n    this.elements.analyzeAiBtn?.addEventListener('click', () => this.analyzeBookmarks());\n\n    // Export buttons\n    this.elements.exportMdBtn?.addEventListener('click', () => this.downloadMarkdown());\n    this.elements.exportCsvBtn?.addEventListener('click', () => this.downloadCSV());\n    this.elements.exportJsonBtn?.addEventListener('click', () => this.downloadJSON());\n    this.elements.exportHtmlBtn?.addEventListener('click', () => this.downloadHTML());\n    this.elements.copyClipboardBtn?.addEventListener('click', () => this.copyToClipboard());\n\n    // Search and filter\n    this.elements.searchInput?.addEventListener('input', (e) => {\n      this.state.searchQuery = e.target.value;\n      this.debouncedSearch();\n    });\n    this.elements.filterBtn?.addEventListener('click', () => this.showFilterDialog());\n    this.elements.sortBtn?.addEventListener('click', () => this.showSortDialog());\n    // Settings and close\n    this.elements.closeBtn?.addEventListener('click', () => window.close());\n    this.elements.settingsBtn?.addEventListener('click', () => this.showSettingsDialog());\n\n    this.elements.viewModeBtn?.addEventListener('click', () => this.toggleViewMode());\n    this.elements.exportNotionBtn?.addEventListener('click', () => this.downloadNotion());\n    this.elements.exportObsidianBtn?.addEventListener('click', () => this.downloadObsidian());\n    this.elements.sentimentBtn?.addEventListener('click', () => this.showSentimentAnalysis());\n    this.elements.aiQABtn?.addEventListener('click', () => this.showAIQADialog());\n    this.elements.authorAnalyticsBtn?.addEventListener('click', () => this.showAuthorAnalytics());\n    this.elements.hiddenGemsBtn?.addEventListener('click', () => this.showHiddenGems());\n\n    // Listen for messages from content script\n    chrome.runtime.onMessage.addListener((msg, sender, sendResponse) => {\n      if (msg.type === 'progressUpdate') {\n        this.handleProgressUpdate(msg.progress);\n      }\n      // Note: scanComplete is handled via sendResponse callback, not as a message\n    });\n  };\n\n  updateUI = () => {\n    this.updateExportButtons();\n    this.updateProgressBar();\n  };\n\n  updateExportButtons = () => {\n    const hasData = this.state.lastExtraction && this.state.lastExtraction.length > 0;\n    if (this.elements.exportMdBtn) this.elements.exportMdBtn.disabled = !hasData;\n    if (this.elements.exportCsvBtn) this.elements.exportCsvBtn.disabled = !hasData;\n    if (this.elements.analyzeAiBtn) this.elements.analyzeAiBtn.disabled = !hasData;\n    if (this.elements.exportNotionBtn) this.elements.exportNotionBtn.disabled = !hasData;\n    if (this.elements.exportObsidianBtn) this.elements.exportObsidianBtn.disabled = !hasData;\n  };\n  updateProgressBar = () => {\n    const { current, total } = this.state.progress;\n    if (total > 0) {\n      const percent = Math.round((current / total) * 100);\n      if (this.elements.progressFill) {\n        this.elements.progressFill.style.width = `${percent}%`;\n      }\n      if (this.elements.progressText) {\n        this.elements.progressText.textContent = `${current} / ${total} bookmarks`;\n      }\n      if (this.elements.progressBar) {\n        this.elements.progressBar.style.display = 'block';\n      }\n\n      // Update ARIA attributes for accessibility\n      const progressBarEl = document.getElementById('progress-bar');\n      if (progressBarEl) {\n        progressBarEl.setAttribute('aria-valuenow', percent);\n        progressBarEl.setAttribute('aria-valuetext', `${current} of ${total} bookmarks processed`);\n      }\n    } else {\n      if (this.elements.progressBar) {\n        this.elements.progressBar.style.display = 'none';\n      }\n    }\n  };\n\n  updateTheme = () => {\n    document.body.setAttribute('data-theme', this.state.isDarkMode ? 'dark' : 'light');\n  };\n\n  updateStatus = (message, type = 'info') => {\n    // Legacy support for status bar\n    if (this.elements.statusBar) {\n      this.elements.statusBar.textContent = message;\n      this.elements.statusBar.setAttribute('aria-label', message);\n    }\n\n    // Toast notification for user feedback\n    this.showToast(message, type);\n  };\n\n  showToast = (message, type = 'info') => {\n    let container = document.querySelector('.toast-container');\n    if (!container) {\n      container = document.createElement('div');\n      container.className = 'toast-container';\n      document.body.appendChild(container);\n    }\n\n    const toast = document.createElement('div');\n    toast.className = `toast toast-${type}`;\n\n    // Icon based on type\n    let icon = '';\n    if (type === 'success') icon = '\u2705';\n    else if (type === 'error') icon = '\u274C';\n    else if (type === 'warning') icon = '\u26A0\uFE0F';\n    else icon = '\u2139\uFE0F';\n\n    toast.innerHTML = `<span>${icon}</span><span>${message}</span>`;\n    container.appendChild(toast);\n\n    // Remove after 3 seconds\n    setTimeout(() => {\n      toast.classList.add('fade-out');\n      toast.addEventListener('animationend', () => {\n        toast.remove();\n        if (container.children.length === 0) {\n          container.remove();\n        }\n      });\n    }, 3000);\n  };\n\n  updateExtractionStatus = (timestamp) => {\n    if (!this.elements.extractionStatus) return;\n\n    if (!this.state.lastExtraction) {\n      this.elements.extractionStatus.textContent = '';\n      return;\n    }\n\n    const age = Date.now() - timestamp;\n    const minutes = Math.floor(age / 60000);\n    this.elements.extractionStatus.textContent =\n      `${this.state.lastExtraction.length} bookmarks from ${minutes} minutes ago`;\n  };\n\n  // Event Handlers\n  handleDarkModeToggle = async (event) => {\n    this.state.isDarkMode = event.target.checked;\n    this.updateTheme();\n    await this.saveSettings();\n  };\n\n  showConfirmDialog = (message, onConfirm) => {\n    const dialog = document.createElement('div');\n    dialog.style.cssText = `\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0, 0, 0, 0.7);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      z-index: 1000;\n    `;\n\n    const dialogContent = document.createElement('div');\n    dialogContent.style.cssText = `\n      background: var(--bg-color);\n      padding: 24px;\n      border-radius: 8px;\n      max-width: 400px;\n      width: 90%;\n    `;\n\n    const messageEl = document.createElement('p');\n    messageEl.style.cssText = 'color: var(--text-color); margin: 0 0 16px 0; font-size: 15px;';\n    messageEl.textContent = message;\n    dialogContent.appendChild(messageEl);\n\n    const buttonContainer = document.createElement('div');\n    buttonContainer.style.cssText = 'display: flex; gap: 8px; justify-content: flex-end;';\n\n    const cancelBtn = document.createElement('button');\n    cancelBtn.textContent = 'Cancel';\n    cancelBtn.style.cssText = 'padding: 8px 16px; border: 1px solid var(--border-color); background: transparent; color: var(--text-color); border-radius: 4px; cursor: pointer;';\n    cancelBtn.addEventListener('click', () => {\n      document.body.removeChild(dialog);\n    });\n\n    const confirmBtn = document.createElement('button');\n    confirmBtn.textContent = 'Confirm';\n    confirmBtn.style.cssText = 'padding: 8px 16px; border: none; background: var(--danger-color); color: white; border-radius: 4px; cursor: pointer;';\n    confirmBtn.addEventListener('click', () => {\n      document.body.removeChild(dialog);\n      onConfirm();\n    });\n\n    buttonContainer.appendChild(cancelBtn);\n    buttonContainer.appendChild(confirmBtn);\n    dialogContent.appendChild(buttonContainer);\n    dialog.appendChild(dialogContent);\n    document.body.appendChild(dialog);\n\n    // ESC key to close\n    const escHandler = (e) => {\n      if (e.key === 'Escape') {\n        document.body.removeChild(dialog);\n        document.removeEventListener('keydown', escHandler);\n      }\n    };\n    document.addEventListener('keydown', escHandler);\n\n    // Close on background click\n    dialog.addEventListener('click', (e) => {\n      if (e.target === dialog) {\n        document.body.removeChild(dialog);\n        document.removeEventListener('keydown', escHandler);\n      }\n    });\n  };\n\n  handleClearStorage = async () => {\n    this.showConfirmDialog(\n      'Are you sure you want to clear all stored bookmarks and AI analysis? This cannot be undone.',\n      async () => {\n        this.state.lastExtraction = null;\n        this.state.aiAnalysis = null;\n        await chrome.storage.local.remove(['lastExtraction', 'aiAnalysis']);\n\n        // Remove AI results display if present\n        const existingResults = document.getElementById('ai-results');\n        if (existingResults) {\n          existingResults.remove();\n        }\n\n        this.updateStatus('Stored bookmarks and analysis cleared');\n        this.updateUI();\n      }\n    );\n  };\n\n  handleProgressUpdate = (progress) => {\n    this.state.progress = progress;\n    this.updateUI();\n  };\n\n  handleScanComplete = async (bookmarks, performanceData, isQuickScan = false) => {\n    this.state.lastExtraction = bookmarks;\n\n    // Store performance metrics\n    if (performanceData) {\n      this.state.performanceMetrics.lastExtractionTime = performanceData.duration || 0;\n      this.state.performanceMetrics.bookmarksExtracted = performanceData.tweetsExtracted || bookmarks.length;\n    }\n\n    await chrome.storage.local.set({\n      lastExtraction: {\n        timestamp: Date.now(),\n        bookmarks: bookmarks\n      },\n      performanceMetrics: this.state.performanceMetrics\n    });\n\n    this.updateStatus(`Successfully extracted ${bookmarks.length} bookmark${bookmarks.length !== 1 ? 's' : ''}`);\n\n    // Add helpful feedback for quick scans with few bookmarks\n    if (isQuickScan && bookmarks.length < 20) {\n      this.updateStatus(`\u26A0\uFE0F Only ${bookmarks.length} visible bookmark${bookmarks.length !== 1 ? 's' : ''} scanned. Use \"Scan All Bookmarks\" to load and scan ALL your bookmarks!`);\n    }\n\n    if (bookmarks.length > this.constants.MAX_SAFE_BOOKMARKS) {\n      this.updateStatus('Warning: Large bookmark set detected. Consider batch processing.');\n    }\n\n    this.updateUI();\n\n    // Switch to library tab to show results\n    this.switchTab('library');\n\n    // Automatically analyze with AI if provider is configured and API key is set (or if using LLM-free mode)\n    if (bookmarks.length > 0) {\n      if (this.state.llmProvider === 'none') {\n        // Auto-analyze with LLM-free mode\n        this.analyzeBookmarks();\n      } else if (this.state.apiKey && this.state.llmProvider !== 'none') {\n        // Auto-analyze with configured LLM provider\n        this.analyzeBookmarks();\n      }\n    }\n  };\n\n  handleScan = () => {\n    this.updateStatus('Quick scanning visible bookmarks only...');\n    chrome.tabs.query({ active: true, currentWindow: true }, tabs => {\n      chrome.tabs.sendMessage(tabs[0].id, {\n        action: 'scanBookmarks'\n      }, (response) => {\n        if (chrome.runtime.lastError) {\n          this.updateStatus('Error: Could not connect to page. Please refresh and try again.');\n          return;\n        }\n        if (response && response.success) {\n          this.handleScanComplete(response.tweets || [], response.performance, true);\n        } else {\n          this.updateStatus('Error: Failed to scan bookmarks.');\n        }\n      });\n    });\n  };\n\n  handleAutoScroll = () => {\n    this.updateStatus('\uD83D\uDD04 Auto-scrolling to load all bookmarks... (this may take a minute)');\n    chrome.tabs.query({ active: true, currentWindow: true }, tabs => {\n      const tabId = tabs[0].id;\n\n      // Inject progressive scroll & scan script\n      chrome.scripting.executeScript({\n        target: { tabId: tabId },\n        func: async () => {\n          // Progressive scroll and scan function that extracts bookmarks as we scroll\n          const progressiveScanAndScroll = async () => {\n            const allBookmarks = new Map(); // Use Map to avoid duplicates by URL\n            let lastHeight = 0;\n            let scrollAttempts = 0;\n            const maxAttempts = 50;\n            const scrollDelay = 2000;\n            const stableAttempts = 3;\n\n            // Helper function to extract bookmarks from current viewport\n            const extractCurrentBookmarks = () => {\n              const articles = document.querySelectorAll('article');\n              const bookmarks = [];\n\n              articles.forEach(article => {\n                try {\n                  // Extract URL first\n                  const link = article.querySelector('a[href*=\"/status/\"]');\n                  const url = link ? link.href : '';\n                  if (!url) return;\n\n                  // Skip if already extracted\n                  if (allBookmarks.has(url)) return;\n\n                  // Extract text\n                  const textEls = article.querySelectorAll('[data-testid=\"tweetText\"]');\n                  const textParts = [];\n                  textEls.forEach(el => {\n                    const text = el.textContent?.trim();\n                    if (text) textParts.push(text);\n                  });\n                  const text = textParts.join(' ');\n\n                  // Extract author info\n                  let displayName = '';\n                  let username = '';\n                  const header = article.querySelector('div[role=\"group\"]')?.parentElement?.parentElement;\n                  if (header) {\n                    const spans = header.querySelectorAll('span');\n                    if (spans.length > 0) displayName = spans[0].textContent?.trim() || '';\n                    for (const span of spans) {\n                      const spanText = span.textContent?.trim();\n                      if (spanText && spanText.startsWith('@')) {\n                        username = spanText.replace('@', '');\n                        break;\n                      }\n                    }\n                  }\n\n                  // Fallback for username from URL\n                  if (!username && url) {\n                    const match = url.match(/(?:x\\.com|twitter\\.com)\\/([^\\/]+)\\/status/);\n                    if (match) username = match[1];\n                  }\n\n                  // Extract timestamp\n                  const timeEl = article.querySelector('time');\n                  const dateTime = timeEl ? timeEl.getAttribute('datetime') || '' : '';\n\n                  // Extract engagement metrics\n                  const extractNumber = (text) => {\n                    if (!text) return '';\n                    const abbrevMatch = text.match(/([\\d,.]+)\\s*([KMBkmb])/);\n                    if (abbrevMatch) {\n                      const num = parseFloat(abbrevMatch[1].replace(/,/g, ''));\n                      const suffix = abbrevMatch[2].toUpperCase();\n                      const multipliers = { 'K': 1000, 'M': 1000000, 'B': 1000000000 };\n                      return Math.round(num * (multipliers[suffix] || 1)).toString();\n                    }\n                    const numberMatch = text.match(/([\\d,.]+)/);\n                    return numberMatch ? numberMatch[1].replace(/,/g, '') : '';\n                  };\n\n                  const likeEl = article.querySelector('[data-testid=\"like\"]');\n                  const likes = likeEl ? extractNumber(likeEl.textContent) : '';\n\n                  const retweetEl = article.querySelector('[data-testid=\"retweet\"]');\n                  const retweets = retweetEl ? extractNumber(retweetEl.textContent) : '';\n\n                  const replyEl = article.querySelector('[data-testid=\"reply\"]');\n                  const replies = replyEl ? extractNumber(replyEl.textContent) : '';\n\n                  let views = '';\n                  const viewEls = article.querySelectorAll('a[aria-label*=\"View\"], span[aria-label*=\"View\"]');\n                  for (const el of viewEls) {\n                    const label = el.getAttribute('aria-label');\n                    if (label && /view/i.test(label)) {\n                      views = extractNumber(label);\n                      break;\n                    }\n                  }\n\n                  bookmarks.push({\n                    url,\n                    text,\n                    displayName,\n                    username,\n                    dateTime,\n                    likes,\n                    retweets,\n                    replies,\n                    views\n                  });\n                } catch (err) {\n                  console.error('[X Extractor] Error extracting bookmark:', err);\n                }\n              });\n\n              return bookmarks;\n            };\n\n            // Scroll and extract progressively\n            while (scrollAttempts < maxAttempts) {\n              // Extract bookmarks at current scroll position\n              const currentBookmarks = extractCurrentBookmarks();\n              currentBookmarks.forEach(bookmark => {\n                allBookmarks.set(bookmark.url, bookmark);\n              });\n\n              // Progress update\n              console.log(`[X Extractor] Extracted ${allBookmarks.size} bookmarks so far...`);\n\n              // Smart Scroll: Wait for network activity or timeout\n              const previousHeight = document.body.scrollHeight;\n              window.scrollTo(0, previousHeight);\n\n              // Wait for either network response or timeout\n              await new Promise(resolve => {\n                let resolved = false;\n                const timeoutId = setTimeout(() => {\n                  if (!resolved) { resolved = true; resolve(); }\n                }, 4000); // 4s timeout (fallback)\n\n                const handler = () => {\n                  if (!resolved) {\n                    resolved = true;\n                    clearTimeout(timeoutId);\n                    window.removeEventListener('x-bookmarks-response', handler);\n                    // Add small delay for render\n                    setTimeout(resolve, 500);\n                  }\n                };\n\n                window.addEventListener('x-bookmarks-response', handler);\n              });\n\n              const newHeight = document.body.scrollHeight;\n              if (newHeight === lastHeight) {\n                scrollAttempts++;\n                if (scrollAttempts >= stableAttempts) break;\n              } else {\n                scrollAttempts = 0;\n              }\n              lastHeight = newHeight;\n            }\n\n            // Final extraction at the bottom\n            const finalBookmarks = extractCurrentBookmarks();\n            finalBookmarks.forEach(bookmark => {\n              allBookmarks.set(bookmark.url, bookmark);\n            });\n\n            // Return all extracted bookmarks\n            return {\n              success: true,\n              bookmarks: Array.from(allBookmarks.values()),\n              count: allBookmarks.size\n            };\n          };\n\n          return await progressiveScanAndScroll();\n        }\n      }, (results) => {\n        // Check for errors\n        if (chrome.runtime.lastError) {\n          this.updateStatus('Error during auto-scroll. Please refresh and try again.');\n          return;\n        }\n\n        if (!results || !results[0] || !results[0].result) {\n          this.updateStatus('Error: Failed to extract bookmarks.');\n          return;\n        }\n\n        const result = results[0].result;\n        if (result.success && result.bookmarks) {\n          this.updateStatus(`\u2713 Successfully extracted ${result.count} bookmark${result.count !== 1 ? 's' : ''}!`);\n          this.handleScanComplete(result.bookmarks, { duration: 0, tweetsExtracted: result.count }, false);\n        } else {\n          this.updateStatus('Error: Failed to scan bookmarks.');\n        }\n      });\n    });\n  };\n\n  analyzeBookmarks = async () => {\n    if (!this.state.lastExtraction || this.state.lastExtraction.length === 0) {\n      this.updateStatus('No bookmarks to analyze.');\n      return;\n    }\n\n    // Check if LLM provider is configured\n    if (this.state.llmProvider === 'none') {\n      // Use LLM-free analysis\n      this.analyzeLLMFree();\n      return;\n    }\n\n    if (!this.state.apiKey && this.state.llmProvider !== 'none') {\n      this.updateStatus('No API key configured. Click settings to add one or use LLM-free mode.');\n      return;\n    }\n\n    // Show loading state\n    if (this.elements.analyzeAiBtn) {\n      this.elements.analyzeAiBtn.disabled = true;\n      this.elements.analyzeAiBtn.textContent = 'Analyzing...';\n    }\n\n    const startTime = performance.now();\n    const bookmarkCount = this.state.lastExtraction.length;\n    const analyzeCount = Math.min(bookmarkCount, this.constants.AI_ANALYSIS_LIMIT);\n\n    if (bookmarkCount > this.constants.AI_ANALYSIS_LIMIT) {\n      this.updateStatus(`Analyzing first ${analyzeCount} of ${bookmarkCount} bookmarks...`);\n    } else {\n      this.updateStatus(`Analyzing ${analyzeCount} bookmarks...`);\n    }\n\n    try {\n      const provider = this.createLLMProvider();\n      const analysis = await this.retryOperation(() => provider.analyzeBookmarks(this.state.lastExtraction));\n\n      // Store performance metrics\n      const duration = Math.round(performance.now() - startTime);\n      this.state.performanceMetrics.lastAnalysisTime = duration;\n      await chrome.storage.local.set({ performanceMetrics: this.state.performanceMetrics });\n\n      this.state.aiAnalysis = analysis;\n      await chrome.storage.local.set({ aiAnalysis: analysis });\n\n      let statusMsg = `Analysis complete! Found ${analysis.tags.length} tags and ${analysis.categories.length} categories.`;\n      if (bookmarkCount > this.constants.AI_ANALYSIS_LIMIT) {\n        statusMsg += ` (Analyzed first ${this.constants.AI_ANALYSIS_LIMIT} of ${bookmarkCount} bookmarks)`;\n      }\n\n      this.updateStatus(statusMsg);\n      this.showAnalysisResults(analysis);\n    } catch (error) {\n      console.error('AI Analysis error:', error);\n      this.updateStatus(`Analysis failed: ${error.message}`);\n    } finally {\n      // Reset button state\n      if (this.elements.analyzeAiBtn) {\n        this.elements.analyzeAiBtn.disabled = false;\n        this.elements.analyzeAiBtn.textContent = 'Analyze Bookmarks';\n      }\n    }\n  };\n\n  createLLMProvider = () => {\n    switch (this.state.llmProvider) {\n      case 'gemini':\n        // Assuming GeminiProvider is globally available or imported\n        return new GeminiProvider(this.state.apiKey, this.state.systemPrompt);\n      case 'openai':\n        return new OpenAIProvider(this.state.apiKey, this.state.systemPrompt);\n      case 'anthropic':\n        return new AnthropicProvider(this.state.apiKey, this.state.systemPrompt);\n      case 'none':\n        return new LLMFreeProvider(this.constants);\n      default:\n        throw new Error('Unknown LLM provider');\n    }\n  };\n\n  analyzeLLMFree = async () => {\n    // Show loading state\n    if (this.elements.analyzeAiBtn) {\n      this.elements.analyzeAiBtn.disabled = true;\n      this.elements.analyzeAiBtn.textContent = 'Analyzing...';\n    }\n\n    const startTime = performance.now();\n    const bookmarkCount = this.state.lastExtraction.length;\n    this.updateStatus(`Analyzing ${bookmarkCount} bookmarks (LLM-free mode)...`);\n\n    try {\n      const provider = new LLMFreeProvider(this.constants);\n      const analysis = await provider.analyzeBookmarks(this.state.lastExtraction);\n\n      // Store performance metrics\n      const duration = Math.round(performance.now() - startTime);\n      this.state.performanceMetrics.lastAnalysisTime = duration;\n      await chrome.storage.local.set({ performanceMetrics: this.state.performanceMetrics });\n\n      this.state.aiAnalysis = analysis;\n      await chrome.storage.local.set({ aiAnalysis: analysis });\n\n      this.updateStatus(`Analysis complete! Found ${analysis.tags.length} tags and ${analysis.categories.length} categories.`);\n      this.showAnalysisResults(analysis);\n    } catch (error) {\n      console.error('Analysis error:', error);\n      this.updateStatus(`Analysis failed: ${error.message}`);\n    } finally {\n      // Reset button state\n      if (this.elements.analyzeAiBtn) {\n        this.elements.analyzeAiBtn.disabled = false;\n        this.elements.analyzeAiBtn.textContent = 'Analyze Bookmarks';\n      }\n    }\n  };\n\n  // Sanitize text to prevent XSS attacks\n  sanitizeText = (text) => {\n    if (!text) return '';\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n  };\n\n  showAnalysisResults = (analysis) => {\n    // Create analysis results display\n    const existingResults = document.getElementById('ai-results');\n    if (existingResults) {\n      existingResults.remove();\n    }\n\n    // Create container using DOM methods instead of innerHTML\n    const resultsDiv = document.createElement('div');\n    resultsDiv.id = 'ai-results';\n    resultsDiv.style.cssText = `\n      margin: 16px 0;\n      padding: 16px;\n      background: var(--bg-color);\n      border: 1px solid var(--border-color);\n      border-radius: 8px;\n    `;\n\n    // Title\n    const title = document.createElement('h3');\n    title.style.cssText = 'margin-top: 0; color: var(--text-color);';\n    title.textContent = 'AI Analysis Results';\n    resultsDiv.appendChild(title);\n\n    // Overall summary\n    if (analysis.overallSummary) {\n      const summaryDiv = document.createElement('div');\n      summaryDiv.style.cssText = 'margin-bottom: 16px;';\n\n      const summaryLabel = document.createElement('strong');\n      summaryLabel.style.color = 'var(--text-color)';\n      summaryLabel.textContent = 'Overall Summary:';\n      summaryDiv.appendChild(summaryLabel);\n\n      const summaryText = document.createElement('p');\n      summaryText.style.cssText = 'color: var(--text-color); margin: 8px 0;';\n      summaryText.textContent = analysis.overallSummary; // textContent auto-escapes\n      summaryDiv.appendChild(summaryText);\n\n      resultsDiv.appendChild(summaryDiv);\n    }\n\n    // Tags\n    if (analysis.tags && analysis.tags.length > 0) {\n      const tagsDiv = document.createElement('div');\n      tagsDiv.style.cssText = 'margin-bottom: 16px;';\n\n      const tagsLabel = document.createElement('strong');\n      tagsLabel.style.color = 'var(--text-color)';\n      tagsLabel.textContent = 'Tags:';\n      tagsDiv.appendChild(tagsLabel);\n\n      tagsDiv.appendChild(document.createElement('br'));\n\n      const tagsContainer = document.createElement('div');\n      tagsContainer.style.cssText = 'margin-top: 8px;';\n\n      analysis.tags.forEach(tag => {\n        const tagSpan = document.createElement('span');\n        tagSpan.style.cssText = 'display: inline-block; background: var(--primary-color); color: white; padding: 4px 12px; margin: 4px; border-radius: 16px; font-size: 12px;';\n        tagSpan.textContent = tag; // textContent auto-escapes\n        tagsContainer.appendChild(tagSpan);\n      });\n\n      tagsDiv.appendChild(tagsContainer);\n      resultsDiv.appendChild(tagsDiv);\n    }\n\n    // Categories\n    if (analysis.categories && analysis.categories.length > 0) {\n      const categoriesDiv = document.createElement('div');\n      categoriesDiv.style.cssText = 'margin-bottom: 16px;';\n\n      const categoriesLabel = document.createElement('strong');\n      categoriesLabel.style.color = 'var(--text-color)';\n      categoriesLabel.textContent = 'Categories:';\n      categoriesDiv.appendChild(categoriesLabel);\n\n      const categoriesList = document.createElement('ul');\n      categoriesList.style.cssText = 'color: var(--text-color); margin: 8px 0; padding-left: 20px;';\n\n      analysis.categories.forEach(cat => {\n        const li = document.createElement('li');\n        li.textContent = cat; // textContent auto-escapes\n        categoriesList.appendChild(li);\n      });\n\n      categoriesDiv.appendChild(categoriesList);\n      resultsDiv.appendChild(categoriesDiv);\n    }\n\n    // Analyze more button\n    const analyzeBtn = document.createElement('button');\n    analyzeBtn.id = 'analyzeBtn';\n    analyzeBtn.style.cssText = 'background: var(--primary-color); color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; margin-top: 8px;';\n    analyzeBtn.textContent = 'Re-analyze';\n    analyzeBtn.addEventListener('click', () => this.analyzeBookmarks());\n    resultsDiv.appendChild(analyzeBtn);\n\n    // Insert after status container\n    const statusContainer = document.querySelector('.status-container');\n    if (statusContainer && statusContainer.parentNode) {\n      statusContainer.parentNode.insertBefore(resultsDiv, statusContainer.nextSibling);\n    }\n  };\n\n  showSettingsDialog = () => {\n    const dialog = document.createElement('div');\n    dialog.setAttribute('role', 'dialog');\n    dialog.setAttribute('aria-modal', 'true');\n    dialog.setAttribute('aria-labelledby', 'settings-dialog-title');\n    dialog.style.cssText = `\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0, 0, 0, 0.7);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      z-index: 1000;\n    `;\n\n    const dialogContent = document.createElement('div');\n    dialogContent.style.cssText = `\n      background: var(--bg-color);\n      padding: 24px;\n      border-radius: 8px;\n      max-width: 450px;\n      width: 90%;\n      max-height: 80vh;\n      overflow-y: auto;\n    `;\n\n    const providerOptions = `\n      <option value=\"none\" ${this.state.llmProvider === 'none' ? 'selected' : ''}>None (LLM-free mode)</option>\n      <option value=\"openai\" ${this.state.llmProvider === 'openai' ? 'selected' : ''}>OpenAI</option>\n      <option value=\"anthropic\" ${this.state.llmProvider === 'anthropic' ? 'selected' : ''}>Anthropic (Claude)</option>\n      <option value=\"gemini\" ${this.state.llmProvider === 'gemini' ? 'selected' : ''}>Google Gemini (Free Tier Available)</option>\n    `;\n\n    dialogContent.innerHTML = `\n      <h2 id=\"settings-dialog-title\" style=\"margin-top: 0; color: var(--text-color);\">Settings</h2>\n\n      <div style=\"margin-bottom: 16px;\">\n        <label style=\"display: block; margin-bottom: 8px; color: var(--text-color);\">\n          Analysis Provider:\n          <select id=\"providerSelect\" style=\"width: 100%; padding: 8px; margin-top: 4px; border: 1px solid var(--border-color); border-radius: 4px; background: var(--bg-color); color: var(--text-color);\">\n            ${providerOptions}\n          </select>\n        </label>\n        <small style=\"color: var(--disabled-color);\">\n          <strong>Free & Private:</strong> Bring your own API key to analyze bookmarks. \n          Google Gemini has a generous free tier. Your key is stored locally.\n        </small>\n      </div>\n\n      <div id=\"apiKeySection\" style=\"margin-bottom: 16px; ${this.state.llmProvider === 'none' ? 'display: none;' : ''}\">\n        <label style=\"display: block; margin-bottom: 8px; color: var(--text-color);\">\n          <span id=\"apiKeyLabel\">API Key:</span>\n          <input type=\"password\" id=\"apiKeyInput\" value=\"${this.state.apiKey}\"\n                 style=\"width: 100%; padding: 8px; margin-top: 4px; border: 1px solid var(--border-color); border-radius: 4px; background: var(--bg-color); color: var(--text-color);\">\n        </label>\n        <small id=\"apiKeyHelp\" style=\"color: var(--disabled-color);\"></small>\n      </div>\n      \n      <div id=\"systemPromptSection\" style=\"margin-bottom: 24px;\">\n        <label style=\"display: block; margin-bottom: 8px; color: var(--text-color);\">\n          System Prompt (Optional):\n          <textarea id=\"systemPromptInput\" \n                 placeholder=\"Custom instructions for the AI (e.g., 'Focus on technical details', 'Summarize as bullet points'). Default is 'You are a helpful assistant...'\"\n                 style=\"width: 100%; padding: 8px; margin-top: 4px; border: 1px solid var(--border-color); border-radius: 4px; background: var(--bg-color); color: var(--text-color); min-height: 80px; resize: vertical;\">${this.state.systemPrompt || ''}</textarea>\n        </label>\n        <small style=\"color: var(--disabled-color);\">Override the default AI personality and instructions.</small>\n      </div>\n\n      <div style=\"display: flex; gap: 8px; justify-content: flex-end;\">\n        <button id=\"cancelBtn\" style=\"padding: 8px 16px; border: 1px solid var(--border-color); background: transparent; color: var(--text-color); border-radius: 4px; cursor: pointer;\">Cancel</button>\n        <button id=\"saveBtn\" style=\"padding: 8px 16px; border: none; background: var(--primary-color); color: white; border-radius: 4px; cursor: pointer;\">Save</button>\n      </div>\n    `;\n\n    dialog.appendChild(dialogContent);\n    document.body.appendChild(dialog);\n\n    // Update API key section based on provider selection\n    const updateApiKeySection = (provider) => {\n      const apiKeySection = document.getElementById('apiKeySection');\n      const apiKeyLabel = document.getElementById('apiKeyLabel');\n      const apiKeyHelp = document.getElementById('apiKeyHelp');\n      const systemPromptSection = document.getElementById('systemPromptSection');\n\n      // System Prompt only applicable for LLMs\n      systemPromptSection.style.display = provider === 'none' ? 'none' : 'block';\n\n      if (provider === 'none') {\n        apiKeySection.style.display = 'none';\n      } else {\n        apiKeySection.style.display = 'block';\n        if (provider === 'openai') {\n          apiKeyLabel.textContent = 'OpenAI API Key:';\n          apiKeyHelp.innerHTML = 'Get your API key from <a href=\"https://platform.openai.com/api-keys\" target=\"_blank\" style=\"color: var(--primary-color);\">OpenAI</a>';\n        } else if (provider === 'anthropic') {\n          apiKeyLabel.textContent = 'Anthropic API Key:';\n          apiKeyHelp.innerHTML = 'Get your API key from <a href=\"https://console.anthropic.com/settings/keys\" target=\"_blank\" style=\"color: var(--primary-color);\">Anthropic Console</a>';\n        } else if (provider === 'gemini') {\n          apiKeyLabel.textContent = 'Gemini API Key (Recommended):';\n          apiKeyHelp.innerHTML = 'Free to use! Get your key from <a href=\"https://aistudio.google.com/app/apikey\" target=\"_blank\" style=\"color: var(--primary-color);\">Google AI Studio</a>';\n        }\n      }\n    };\n\n    // Initialize API key section\n    const providerSelect = document.getElementById('providerSelect');\n    updateApiKeySection(providerSelect.value);\n\n    // Handle provider selection change\n    providerSelect.addEventListener('change', (e) => {\n      updateApiKeySection(e.target.value);\n    });\n\n    // Store currently focused element to restore later\n    const previouslyFocused = document.activeElement;\n\n    // Get all focusable elements in dialog\n    const getFocusableElements = () => {\n      return dialogContent.querySelectorAll(\n        'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n      );\n    };\n\n    // Focus first element\n    const focusableElements = getFocusableElements();\n    if (focusableElements.length > 0) {\n      focusableElements[0].focus();\n    }\n\n    // Focus trap\n    const handleTabKey = (e) => {\n      const focusables = Array.from(getFocusableElements());\n      const firstFocusable = focusables[0];\n      const lastFocusable = focusables[focusables.length - 1];\n\n      if (e.key === 'Tab') {\n        if (e.shiftKey) {\n          if (document.activeElement === firstFocusable) {\n            e.preventDefault();\n            lastFocusable.focus();\n          }\n        } else {\n          if (document.activeElement === lastFocusable) {\n            e.preventDefault();\n            firstFocusable.focus();\n          }\n        }\n      }\n    };\n\n    const closeDialog = () => {\n      document.body.removeChild(dialog);\n      document.removeEventListener('keydown', handleDialogKeys);\n      if (previouslyFocused) {\n        previouslyFocused.focus();\n      }\n    };\n\n    // ESC key and tab trap\n    const handleDialogKeys = (e) => {\n      if (e.key === 'Escape') {\n        closeDialog();\n      } else {\n        handleTabKey(e);\n      }\n    };\n\n    document.addEventListener('keydown', handleDialogKeys);\n\n    // Event handlers\n    document.getElementById('cancelBtn').addEventListener('click', closeDialog);\n\n    document.getElementById('saveBtn').addEventListener('click', async () => {\n      const provider = document.getElementById('providerSelect').value;\n      const apiKey = document.getElementById('apiKeyInput').value.trim();\n      const systemPrompt = document.getElementById('systemPromptInput').value.trim();\n\n      // Validate API key before saving (only if provider requires it)\n      if (provider !== 'none' && apiKey.length > 0) {\n        const validation = this.validateApiKey(apiKey, provider);\n        if (!validation.valid) {\n          // Show error in dialog\n          const existingError = document.getElementById('apiKeyError');\n          if (existingError) {\n            existingError.textContent = validation.error;\n          } else {\n            const errorDiv = document.createElement('div');\n            errorDiv.id = 'apiKeyError';\n            errorDiv.style.cssText = 'color: var(--danger-color); font-size: 13px; margin-top: 8px;';\n            errorDiv.textContent = validation.error;\n            const inputParent = document.getElementById('apiKeyInput').parentElement;\n            inputParent.appendChild(errorDiv);\n          }\n          // Keep focus on input\n          document.getElementById('apiKeyInput').focus();\n          return;\n        }\n      }\n\n      // Save provider, API key, and prompt\n      this.state.llmProvider = provider;\n      this.state.systemPrompt = systemPrompt;\n\n      const storageData = {\n        llmProvider: provider,\n        systemPrompt: systemPrompt\n      };\n\n      await chrome.storage.local.set(storageData);\n\n      if (provider !== 'none') {\n        await this.saveApiKey(apiKey);\n      }\n\n      this.updateStatus('Settings saved!');\n      closeDialog();\n    });\n\n    // Close on background click\n    dialog.addEventListener('click', (e) => {\n      if (e.target === dialog) {\n        closeDialog();\n      }\n    });\n  };\n\n  render = () => {\n    // Update UI based on current state\n    this.updateUI();\n\n    // Show AI results if available\n    if (this.state.aiAnalysis) {\n      this.showAnalysisResults(this.state.aiAnalysis);\n    }\n  };\n\n  generateMarkdown = () => {\n    const bookmarks = this.state.filteredBookmarks || this.state.lastExtraction;\n    if (!bookmarks || bookmarks.length === 0) return '';\n\n    const exportDate = new Date().toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n\n    // Use array for better performance\n    const mdParts = [\n      `# X Bookmarks Export\\n\\n`,\n      `**Exported:** ${exportDate}\\n`,\n      `**Total Bookmarks:** ${bookmarks.length}\\n\\n`,\n      `---\\n\\n`\n    ];\n\n    // Process bookmarks with simplified format\n    bookmarks.forEach((bookmark, index) => {\n      mdParts.push(`## Bookmark ${index + 1}\\n\\n`);\n\n      // Tweet text\n      if (bookmark.text) {\n        mdParts.push(`**Text:** ${bookmark.text}\\n\\n`);\n      }\n\n      // Tweet owner\n      const ownerName = bookmark.displayName || 'Unknown';\n      const ownerHandle = bookmark.username ? `@${bookmark.username}` : '@unknown';\n      mdParts.push(`**Owner:** ${ownerName} (${ownerHandle})\\n\\n`);\n\n      // Category tags (max 5)\n      const tags = [];\n\n      // First, check for custom tags for this specific bookmark\n      const customTags = this.getCustomTags(bookmark.url);\n      if (customTags && customTags.length > 0) {\n        tags.push(...customTags.slice(0, 5));\n      }\n\n      // If no custom tags or less than 5, add from AI analysis\n      if (tags.length < 5 && this.state.aiAnalysis && this.state.aiAnalysis.tags) {\n        const remainingSlots = 5 - tags.length;\n        const aiTags = this.state.aiAnalysis.tags.slice(0, remainingSlots);\n        tags.push(...aiTags);\n      }\n\n      if (tags.length > 0) {\n        mdParts.push(`**Tags:** ${tags.join(', ')}\\n\\n`);\n      }\n\n      // Link\n      mdParts.push(`**Link:** ${bookmark.url}\\n\\n`);\n\n      // Media Links (High Quality)\n      if (bookmark.media && bookmark.media.length > 0) {\n        mdParts.push(`**Media:**\\n`);\n        bookmark.media.forEach(m => {\n          mdParts.push(`- [${m.type === 'video' ? 'Video (MP4)' : 'Image (Original)'}](${m.url})\\n`);\n        });\n        mdParts.push(`\\n`);\n      }\n\n      mdParts.push(`---\\n\\n`);\n    });\n\n    return mdParts.join('');\n  };\n\n  calculateBasicStats = (bookmarks) => {\n    let totalLikes = 0;\n    let totalRetweets = 0;\n    const authorCounts = {};\n    let minDate = null;\n    let maxDate = null;\n\n    bookmarks.forEach(b => {\n      totalLikes += parseInt(b.likes || 0);\n      totalRetweets += parseInt(b.retweets || 0);\n\n      if (b.username) {\n        authorCounts[b.username] = (authorCounts[b.username] || 0) + 1;\n      }\n\n      if (b.dateTime) {\n        const date = new Date(b.dateTime);\n        if (!minDate || date < minDate) minDate = date;\n        if (!maxDate || date > maxDate) maxDate = date;\n      }\n    });\n\n    const avgLikes = bookmarks.length > 0 ? totalLikes / bookmarks.length : 0;\n\n    let topAuthor = { username: null, count: 0 };\n    Object.entries(authorCounts).forEach(([username, count]) => {\n      if (count > topAuthor.count) {\n        topAuthor = { username, count };\n      }\n    });\n\n    let dateRange = 'N/A';\n    if (minDate && maxDate) {\n      const minStr = minDate.toLocaleDateString();\n      const maxStr = maxDate.toLocaleDateString();\n      dateRange = minStr === maxStr ? minStr : `${minStr} - ${maxStr}`;\n    }\n\n    return {\n      totalLikes,\n      totalRetweets,\n      avgLikes,\n      topAuthor,\n      dateRange\n    };\n  };\n\n  generateCSV = () => {\n    const bookmarks = this.state.filteredBookmarks || this.state.lastExtraction;\n    if (!bookmarks || bookmarks.length === 0) return '';\n\n    const escapeCSV = (val) => {\n      if (val === undefined || val === null) return '';\n      const str = String(val).replace(/\\n/g, ' ');\n      if (/[\",]/.test(str)) {\n        return '\"' + str.replace(/\"/g, '\"\"') + '\"';\n      }\n      return str;\n    };\n\n    const rows = [];\n\n    // Helper to format media links\n    const formatMedia = (media) => {\n      if (!media || media.length === 0) return '';\n      return media.map(m => m.url).join('; ');\n    };\n\n    // Header row\n    if (this.state.aiAnalysis) {\n      rows.push('Author,Username,Date,Text,Likes,Retweets,Replies,Views,Link,Media URLs,Tags,Categories');\n      const tags = this.state.aiAnalysis.tags ? this.state.aiAnalysis.tags.join('; ') : '';\n      const categories = this.state.aiAnalysis.categories ? this.state.aiAnalysis.categories.join('; ') : '';\n\n      bookmarks.forEach(t => {\n        rows.push([\n          escapeCSV(t.displayName || ''),\n          escapeCSV('@' + (t.username || '')),\n          escapeCSV(t.dateTime || ''),\n          escapeCSV(t.text || ''),\n          escapeCSV(t.likes || ''),\n          escapeCSV(t.retweets || ''),\n          escapeCSV(t.replies || ''),\n          escapeCSV(t.views || ''),\n          escapeCSV(t.url),\n          escapeCSV(formatMedia(t.media)),\n          escapeCSV(tags),\n          escapeCSV(categories)\n        ].join(','));\n      });\n    } else {\n      rows.push('Author,Username,Date,Text,Likes,Retweets,Replies,Views,Link,Media URLs');\n      bookmarks.forEach(t => {\n        rows.push([\n          escapeCSV(t.displayName || ''),\n          escapeCSV('@' + (t.username || '')),\n          escapeCSV(t.dateTime || ''),\n          escapeCSV(t.text || ''),\n          escapeCSV(t.likes || ''),\n          escapeCSV(t.retweets || ''),\n          escapeCSV(t.replies || ''),\n          escapeCSV(t.views || ''),\n          escapeCSV(t.url),\n          escapeCSV(formatMedia(t.media))\n        ].join(','));\n      });\n    }\n\n    return rows.join('\\n');\n  };\n\n  downloadMarkdown = () => {\n    const md = this.generateMarkdown();\n    if (!md) return;\n    const blob = new Blob([md], { type: 'text/markdown' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `x-bookmarks-${Date.now()}.md`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n    this.updateStatus('Downloaded Markdown file!');\n  };\n\n  downloadCSV = () => {\n    const csv = this.generateCSV();\n    if (!csv) return;\n    const blob = new Blob([csv], { type: 'text/csv' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `x-bookmarks-${Date.now()}.csv`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n    this.updateStatus('Downloaded CSV file!');\n  };\n\n  copyToClipboard = async () => {\n    console.log('[Clipboard] Copy button clicked');\n\n    // Check if we have bookmarks to copy\n    if (!this.state.lastExtraction || this.state.lastExtraction.length === 0) {\n      console.warn('[Clipboard] No bookmarks in state');\n      this.updateStatus('\u26A0\uFE0F No bookmarks to copy. Please scan bookmarks first.');\n      return;\n    }\n\n    console.log(`[Clipboard] State has ${this.state.lastExtraction.length} bookmarks`);\n\n    const md = this.generateMarkdown();\n    if (!md || md.trim() === '') {\n      console.error('[Clipboard] generateMarkdown returned empty string');\n      this.updateStatus('\u26A0\uFE0F No content to copy. Please scan bookmarks first.');\n      return;\n    }\n\n    const bookmarkCount = this.state.lastExtraction.length;\n    console.log(`[Clipboard] Generated markdown: ${md.length} characters`);\n    console.log(`[Clipboard] First 200 chars:`, md.substring(0, 200));\n    console.log(`[Clipboard] Attempting to copy ${bookmarkCount} bookmarks`);\n\n    try {\n      // Try modern Clipboard API first\n      if (navigator.clipboard && navigator.clipboard.writeText) {\n        console.log('[Clipboard] Using Clipboard API');\n        await navigator.clipboard.writeText(md);\n        this.updateStatus(`\u2713 Copied ${bookmarkCount} bookmark${bookmarkCount !== 1 ? 's' : ''} to clipboard! (${Math.round(md.length / 1024)}KB)`);\n        console.log('[Clipboard] \u2713 Successfully copied using Clipboard API');\n\n        // Verify it was actually copied\n        try {\n          const clipboardContent = await navigator.clipboard.readText();\n          console.log(`[Clipboard] Verified clipboard has ${clipboardContent.length} characters`);\n        } catch (readErr) {\n          console.warn('[Clipboard] Could not verify clipboard (permission denied):', readErr.message);\n        }\n      } else {\n        // Fallback to legacy method\n        console.log('[Clipboard] Clipboard API not available, using fallback');\n        this.fallbackCopyToClipboard(md);\n      }\n    } catch (err) {\n      console.error('[Clipboard] Error copying to clipboard:', err);\n      console.error('[Clipboard] Error name:', err.name);\n      console.error('[Clipboard] Error message:', err.message);\n      // Try fallback method\n      this.fallbackCopyToClipboard(md);\n    }\n  };\n\n  fallbackCopyToClipboard = (text) => {\n    console.log('[Clipboard] Attempting fallback copy method');\n    const textarea = document.createElement('textarea');\n    textarea.value = text;\n    textarea.style.position = 'fixed';\n    textarea.style.opacity = '0';\n    textarea.style.left = '-9999px';\n    document.body.appendChild(textarea);\n    textarea.focus();\n    textarea.select();\n\n    try {\n      const successful = document.execCommand('copy');\n      if (successful) {\n        const count = this.state.lastExtraction ? this.state.lastExtraction.length : 0;\n        this.updateStatus(`\u2713 Copied ${count} bookmark${count !== 1 ? 's' : ''} to clipboard!`);\n        console.log('[Clipboard] Successfully copied using fallback method');\n      } else {\n        console.error('[Clipboard] execCommand copy returned false');\n        this.updateStatus('\u26A0\uFE0F Failed to copy. Please try using a download option instead.');\n      }\n    } catch (err) {\n      console.error('[Clipboard] Fallback copy failed:', err);\n      this.updateStatus('\u26A0\uFE0F Clipboard copy failed. Please try using a download option instead.');\n    } finally {\n      document.body.removeChild(textarea);\n    }\n  };\n\n  openBookmarksPage = () => {\n    const url = 'https://x.com/i/bookmarks';\n    chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {\n      if (tabs && tabs[0]) {\n        chrome.tabs.update(tabs[0].id, { url });\n      } else {\n        chrome.tabs.create({ url });\n      }\n    });\n  };\n\n  // Utility: Debounce function\n  debounce = (func, wait) => {\n    let timeout;\n    return function executedFunction(...args) {\n      const later = () => {\n        clearTimeout(timeout);\n        func(...args);\n      };\n      clearTimeout(timeout);\n      timeout = setTimeout(later, wait);\n    };\n  };\n\n  // Search functionality\n  performSearch = () => {\n    if (!this.state.lastExtraction || this.state.lastExtraction.length === 0) {\n      return;\n    }\n\n    const query = this.state.searchQuery.toLowerCase().trim();\n\n    if (!query) {\n      this.state.filteredBookmarks = null;\n      this.updateStatus(`Showing all ${this.state.lastExtraction.length} bookmarks`);\n      return;\n    }\n\n    this.state.filteredBookmarks = this.state.lastExtraction.filter(bookmark => {\n      return (\n        bookmark.text?.toLowerCase().includes(query) ||\n        bookmark.displayName?.toLowerCase().includes(query) ||\n        bookmark.username?.toLowerCase().includes(query)\n      );\n    });\n\n    this.updateStatus(`Found ${this.state.filteredBookmarks.length} bookmarks matching \"${this.state.searchQuery}\"`);\n  };\n\n  // Filter dialog\n  showFilterDialog = () => {\n    const dialog = document.createElement('div');\n    dialog.setAttribute('role', 'dialog');\n    dialog.setAttribute('aria-modal', 'true');\n    dialog.style.cssText = `\n      position: fixed; top: 0; left: 0; right: 0; bottom: 0;\n      background: rgba(0, 0, 0, 0.7); display: flex;\n      align-items: center; justify-content: center; z-index: 1000;\n    `;\n\n    const dialogContent = document.createElement('div');\n    dialogContent.style.cssText = `\n      background: var(--bg-color); padding: 24px; border-radius: 8px;\n      max-width: 450px; width: 90%; max-height: 80vh; overflow-y: auto;\n    `;\n\n    dialogContent.innerHTML = `\n      <h2 style=\"margin-top: 0; color: var(--text-color);\">Filter Bookmarks</h2>\n      <div style=\"margin-bottom: 16px;\">\n        <label style=\"display: block; margin-bottom: 8px; color: var(--text-color);\">\n          Min Likes:\n          <input type=\"number\" id=\"minLikes\" value=\"${this.state.filterOptions.minLikes}\" min=\"0\"\n                 style=\"width: 100%; padding: 8px; margin-top: 4px; border: 1px solid var(--border-color); border-radius: 4px; background: var(--bg-color); color: var(--text-color);\">\n        </label>\n      </div>\n      <div style=\"margin-bottom: 16px;\">\n        <label style=\"display: block; margin-bottom: 8px; color: var(--text-color);\">\n          Min Retweets:\n          <input type=\"number\" id=\"minRetweets\" value=\"${this.state.filterOptions.minRetweets}\" min=\"0\"\n                 style=\"width: 100%; padding: 8px; margin-top: 4px; border: 1px solid var(--border-color); border-radius: 4px; background: var(--bg-color); color: var(--text-color);\">\n        </label>\n      </div>\n      <div style=\"margin-bottom: 16px;\">\n        <label style=\"display: block; margin-bottom: 8px; color: var(--text-color);\">\n          Author Username:\n          <input type=\"text\" id=\"authorFilter\" value=\"${this.state.filterOptions.author}\" placeholder=\"@username\"\n                 style=\"width: 100%; padding: 8px; margin-top: 4px; border: 1px solid var(--border-color); border-radius: 4px; background: var(--bg-color); color: var(--text-color);\">\n        </label>\n      </div>\n      <div style=\"margin-bottom: 16px;\">\n        <label style=\"display: block; margin-bottom: 8px; color: var(--text-color);\">\n          Date From:\n          <input type=\"date\" id=\"dateFrom\" value=\"${this.state.filterOptions.dateFrom}\"\n                 style=\"width: 100%; padding: 8px; margin-top: 4px; border: 1px solid var(--border-color); border-radius: 4px; background: var(--bg-color); color: var(--text-color);\">\n        </label>\n      </div>\n      <div style=\"margin-bottom: 16px;\">\n        <label style=\"display: block; margin-bottom: 8px; color: var(--text-color);\">\n          Date To:\n          <input type=\"date\" id=\"dateTo\" value=\"${this.state.filterOptions.dateTo}\"\n                 style=\"width: 100%; padding: 8px; margin-top: 4px; border: 1px solid var(--border-color); border-radius: 4px; background: var(--bg-color); color: var(--text-color);\">\n        </label>\n      </div>\n      <div style=\"margin-bottom: 16px;\">\n        <label style=\"display: block; margin-bottom: 8px; color: var(--text-color);\">\n          Read Status:\n          <select id=\"readStatus\" style=\"width: 100%; padding: 8px; margin-top: 4px; border: 1px solid var(--border-color); border-radius: 4px; background: var(--bg-color); color: var(--text-color);\">\n            <option value=\"all\" ${this.state.filterOptions.readStatus === 'all' ? 'selected' : ''}>All</option>\n            <option value=\"read\" ${this.state.filterOptions.readStatus === 'read' ? 'selected' : ''}>Read Only</option>\n            <option value=\"unread\" ${this.state.filterOptions.readStatus === 'unread' ? 'selected' : ''}>Unread Only</option>\n          </select>\n        </label>\n      </div>\n      <div style=\"margin-bottom: 16px;\">\n        <label style=\"display: flex; align-items: center; color: var(--text-color); cursor: pointer;\">\n          <input type=\"checkbox\" id=\"hasNotes\" ${this.state.filterOptions.hasNotes ? 'checked' : ''}\n                 style=\"margin-right: 8px;\">\n          Only show bookmarks with notes\n        </label>\n      </div>\n      <div style=\"display: flex; gap: 8px; justify-content: flex-end;\">\n        <button id=\"resetBtn\" style=\"padding: 8px 16px; border: 1px solid var(--border-color); background: transparent; color: var(--text-color); border-radius: 4px; cursor: pointer;\">Reset</button>\n        <button id=\"cancelBtn\" style=\"padding: 8px 16px; border: 1px solid var(--border-color); background: transparent; color: var(--text-color); border-radius: 4px; cursor: pointer;\">Cancel</button>\n        <button id=\"applyBtn\" style=\"padding: 8px 16px; border: none; background: var(--primary-color); color: white; border-radius: 4px; cursor: pointer;\">Apply</button>\n      </div>\n    `;\n\n    dialog.appendChild(dialogContent);\n    document.body.appendChild(dialog);\n\n    const closeDialog = () => document.body.removeChild(dialog);\n\n    document.getElementById('cancelBtn').addEventListener('click', closeDialog);\n    document.getElementById('resetBtn').addEventListener('click', () => {\n      this.state.filterOptions = { minLikes: 0, minRetweets: 0, author: '', dateFrom: '', dateTo: '', readStatus: 'all', hasNotes: false, collections: [] };\n      this.state.filteredBookmarks = null;\n      this.updateStatus(`Showing all ${this.state.lastExtraction?.length || 0} bookmarks`);\n      closeDialog();\n    });\n\n    document.getElementById('applyBtn').addEventListener('click', () => {\n      this.state.filterOptions.minLikes = parseInt(document.getElementById('minLikes').value) || 0;\n      this.state.filterOptions.minRetweets = parseInt(document.getElementById('minRetweets').value) || 0;\n      this.state.filterOptions.author = document.getElementById('authorFilter').value.replace('@', '').trim();\n      this.state.filterOptions.dateFrom = document.getElementById('dateFrom').value;\n      this.state.filterOptions.dateTo = document.getElementById('dateTo').value;\n      this.state.filterOptions.readStatus = document.getElementById('readStatus').value;\n      this.state.filterOptions.hasNotes = document.getElementById('hasNotes').checked;\n\n      this.applyFilters();\n      closeDialog();\n    });\n\n    dialog.addEventListener('click', (e) => {\n      if (e.target === dialog) closeDialog();\n    });\n  };\n\n  applyFilters = () => {\n    if (!this.state.lastExtraction) return;\n\n    this.state.filteredBookmarks = this.state.lastExtraction.filter(bookmark => {\n      const likes = parseInt(bookmark.likes) || 0;\n      const retweets = parseInt(bookmark.retweets) || 0;\n      const username = bookmark.username?.toLowerCase() || '';\n      const targetAuthor = this.state.filterOptions.author.toLowerCase();\n\n      // Basic filters\n      if (likes < this.state.filterOptions.minLikes) return false;\n      if (retweets < this.state.filterOptions.minRetweets) return false;\n      if (targetAuthor && !username.includes(targetAuthor)) return false;\n\n      // Date range filter\n      if (this.state.filterOptions.dateFrom || this.state.filterOptions.dateTo) {\n        const bookmarkDate = new Date(bookmark.dateTime);\n        if (this.state.filterOptions.dateFrom) {\n          const fromDate = new Date(this.state.filterOptions.dateFrom);\n          if (bookmarkDate < fromDate) return false;\n        }\n        if (this.state.filterOptions.dateTo) {\n          const toDate = new Date(this.state.filterOptions.dateTo);\n          toDate.setHours(23, 59, 59, 999); // Include full day\n          if (bookmarkDate > toDate) return false;\n        }\n      }\n\n      // Read status filter\n      if (this.state.filterOptions.readStatus !== 'all') {\n        const isRead = this.getReadStatus(bookmark.url);\n        if (this.state.filterOptions.readStatus === 'read' && !isRead) return false;\n        if (this.state.filterOptions.readStatus === 'unread' && isRead) return false;\n      }\n\n      // Has notes filter\n      if (this.state.filterOptions.hasNotes) {\n        const notes = this.getBookmarkNote(bookmark.url);\n        if (!notes || notes.trim() === '') return false;\n      }\n\n      return true;\n    });\n\n    this.updateStatus(`Filtered to ${this.state.filteredBookmarks.length} bookmarks`);\n  };\n\n  // Performance metrics dialog\n  showMetricsDialog = () => {\n    const dialog = document.createElement('div');\n    dialog.setAttribute('role', 'dialog');\n    dialog.setAttribute('aria-modal', 'true');\n    dialog.style.cssText = `\n      position: fixed; top: 0; left: 0; right: 0; bottom: 0;\n      background: rgba(0, 0, 0, 0.7); display: flex;\n      align-items: center; justify-content: center; z-index: 1000;\n    `;\n\n    const dialogContent = document.createElement('div');\n    dialogContent.style.cssText = `\n      background: var(--bg-color); padding: 24px; border-radius: 8px;\n      max-width: 400px; width: 90%;\n    `;\n\n    const metrics = this.state.performanceMetrics;\n    const extractionTime = metrics.lastExtractionTime ? `${metrics.lastExtractionTime}ms` : 'N/A';\n    const analysisTime = metrics.lastAnalysisTime ? `${metrics.lastAnalysisTime}ms` : 'N/A';\n    const bookmarksCount = metrics.bookmarksExtracted || this.state.lastExtraction?.length || 0;\n\n    const providerDisplay = this.state.llmProvider === 'none'\n      ? 'LLM-Free Mode'\n      : (this.state.llmProvider || 'None').toUpperCase();\n\n    dialogContent.innerHTML = `\n      <h2 style=\"margin-top: 0; color: var(--text-color);\">Performance Metrics</h2>\n      <div style=\"color: var(--text-color); margin-bottom: 16px;\">\n        <p><strong>Last Extraction Time:</strong> ${extractionTime}</p>\n        <p><strong>Last Analysis Time:</strong> ${analysisTime}</p>\n        <p><strong>Bookmarks Extracted:</strong> ${bookmarksCount}</p>\n        <p><strong>Current Provider:</strong> ${providerDisplay}</p>\n      </div>\n      <div style=\"display: flex; gap: 8px; justify-content: flex-end;\">\n        <button id=\"closeMetricsBtn\" style=\"padding: 8px 16px; border: none; background: var(--primary-color); color: white; border-radius: 4px; cursor: pointer;\">Close</button>\n      </div>\n    `;\n\n    dialog.appendChild(dialogContent);\n    document.body.appendChild(dialog);\n\n    const closeDialog = () => document.body.removeChild(dialog);\n    document.getElementById('closeMetricsBtn').addEventListener('click', closeDialog);\n    dialog.addEventListener('click', (e) => {\n      if (e.target === dialog) closeDialog();\n    });\n  };\n\n  // JSON export functionality\n  downloadJSON = () => {\n    const bookmarks = this.state.filteredBookmarks || this.state.lastExtraction;\n    if (!bookmarks || bookmarks.length === 0) return;\n\n    const exportData = {\n      metadata: {\n        exportDate: new Date().toISOString(),\n        totalBookmarks: bookmarks.length,\n        version: '0.8.0',\n        llmProvider: this.state.llmProvider\n      },\n      analysis: this.state.aiAnalysis || null,\n      statistics: this.calculateBasicStats(bookmarks),\n      bookmarks: bookmarks\n    };\n\n    const json = JSON.stringify(exportData, null, 2);\n    const blob = new Blob([json], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `x-bookmarks-${Date.now()}.json`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n    this.updateStatus('Downloaded JSON file!');\n  };\n\n  // Retry operation with exponential backoff\n  retryOperation = async (operation, attempts = this.constants.API_RETRY_ATTEMPTS) => {\n    let lastError;\n    for (let i = 0; i < attempts; i++) {\n      try {\n        return await operation();\n      } catch (error) {\n        lastError = error;\n        if (i < attempts - 1) {\n          const delay = this.constants.API_RETRY_DELAY * Math.pow(2, i);\n          await new Promise(resolve => setTimeout(resolve, delay));\n        }\n      }\n    }\n    throw lastError;\n  };\n\n  // ====== NEW FEATURES v0.9.0 ======\n\n  // FEATURE: Duplicate Detection\n  detectDuplicates = () => {\n    if (!this.state.lastExtraction || this.state.lastExtraction.length === 0) {\n      this.updateStatus('No bookmarks to check for duplicates.');\n      return;\n    }\n\n    const urlMap = new Map();\n    const duplicates = [];\n\n    this.state.lastExtraction.forEach((bookmark, index) => {\n      if (urlMap.has(bookmark.url)) {\n        duplicates.push({ original: urlMap.get(bookmark.url), duplicate: index, url: bookmark.url });\n      } else {\n        urlMap.set(bookmark.url, index);\n      }\n    });\n\n    if (duplicates.length === 0) {\n      this.updateStatus('No duplicates found! All bookmarks are unique.');\n      return;\n    }\n\n    // Show duplicates dialog\n    const dialog = document.createElement('div');\n    dialog.setAttribute('role', 'dialog');\n    dialog.setAttribute('aria-modal', 'true');\n    dialog.style.cssText = `\n      position: fixed; top: 0; left: 0; right: 0; bottom: 0;\n      background: rgba(0, 0, 0, 0.7); display: flex;\n      align-items: center; justify-content: center; z-index: 1000;\n    `;\n\n    const dialogContent = document.createElement('div');\n    dialogContent.style.cssText = `\n      background: var(--bg-color); padding: 24px; border-radius: 8px;\n      max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto;\n    `;\n\n    const title = document.createElement('h2');\n    title.style.cssText = 'margin-top: 0; color: var(--text-color);';\n    title.textContent = `Found ${duplicates.length} Duplicate(s)`;\n    dialogContent.appendChild(title);\n\n    const info = document.createElement('p');\n    info.style.cssText = 'color: var(--text-color); margin-bottom: 16px;';\n    info.textContent = 'The following bookmarks appear multiple times:';\n    dialogContent.appendChild(info);\n\n    const list = document.createElement('ul');\n    list.style.cssText = 'color: var(--text-color); max-height: 300px; overflow-y: auto;';\n    duplicates.forEach(dup => {\n      const li = document.createElement('li');\n      li.style.cssText = 'margin-bottom: 8px; word-break: break-all;';\n      li.textContent = `${dup.url.substring(0, 60)}...`;\n      list.appendChild(li);\n    });\n    dialogContent.appendChild(list);\n\n    const buttonContainer = document.createElement('div');\n    buttonContainer.style.cssText = 'display: flex; gap: 8px; justify-content: flex-end; margin-top: 16px;';\n\n    const removeDupsBtn = document.createElement('button');\n    removeDupsBtn.textContent = 'Remove Duplicates';\n    removeDupsBtn.style.cssText = 'padding: 8px 16px; border: none; background: var(--danger-color); color: white; border-radius: 4px; cursor: pointer;';\n    removeDupsBtn.addEventListener('click', () => {\n      this.removeDuplicates(duplicates);\n      document.body.removeChild(dialog);\n    });\n\n    const closeBtn = document.createElement('button');\n    closeBtn.textContent = 'Close';\n    closeBtn.style.cssText = 'padding: 8px 16px; border: 1px solid var(--border-color); background: transparent; color: var(--text-color); border-radius: 4px; cursor: pointer;';\n    closeBtn.addEventListener('click', () => document.body.removeChild(dialog));\n\n    buttonContainer.appendChild(removeDupsBtn);\n    buttonContainer.appendChild(closeBtn);\n    dialogContent.appendChild(buttonContainer);\n    dialog.appendChild(dialogContent);\n    document.body.appendChild(dialog);\n\n    this.updateStatus(`Found ${duplicates.length} duplicate bookmark(s).`);\n  };\n\n  removeDuplicates = async (duplicates) => {\n    const indicesToRemove = new Set(duplicates.map(d => d.duplicate));\n    const uniqueBookmarks = this.state.lastExtraction.filter((_, index) => !indicesToRemove.has(index));\n\n    this.state.lastExtraction = uniqueBookmarks;\n    await chrome.storage.local.set({\n      lastExtraction: {\n        timestamp: Date.now(),\n        bookmarks: uniqueBookmarks\n      }\n    });\n\n    this.updateStatus(`Removed ${duplicates.length} duplicate(s). ${uniqueBookmarks.length} unique bookmarks remaining.`);\n    this.updateUI();\n  };\n\n  // FEATURE: Sort bookmarks by engagement metrics\n  sortBookmarks = (criteria) => {\n    if (!this.state.lastExtraction || this.state.lastExtraction.length === 0) {\n      this.updateStatus('No bookmarks to sort.');\n      return;\n    }\n\n    const bookmarksToSort = this.state.filteredBookmarks || this.state.lastExtraction;\n    let sorted = [...bookmarksToSort];\n\n    switch (criteria) {\n      case 'likes':\n        sorted.sort((a, b) => (parseInt(b.likes) || 0) - (parseInt(a.likes) || 0));\n        break;\n      case 'retweets':\n        sorted.sort((a, b) => (parseInt(b.retweets) || 0) - (parseInt(a.retweets) || 0));\n        break;\n      case 'replies':\n        sorted.sort((a, b) => (parseInt(b.replies) || 0) - (parseInt(a.replies) || 0));\n        break;\n      case 'views':\n        sorted.sort((a, b) => (parseInt(b.views) || 0) - (parseInt(a.views) || 0));\n        break;\n      case 'date':\n        sorted.sort((a, b) => new Date(b.dateTime) - new Date(a.dateTime));\n        break;\n      case 'engagement':\n        // Combined engagement score\n        sorted.sort((a, b) => {\n          const scoreA = (parseInt(a.likes) || 0) * 2 + (parseInt(a.retweets) || 0) * 3 + (parseInt(a.replies) || 0) * 1;\n          const scoreB = (parseInt(b.likes) || 0) * 2 + (parseInt(b.retweets) || 0) * 3 + (parseInt(b.replies) || 0) * 1;\n          return scoreB - scoreA;\n        });\n        break;\n      default:\n        break;\n    }\n\n    this.state.filteredBookmarks = sorted;\n    this.updateStatus(`Sorted by ${criteria}.`);\n  };\n\n  // FEATURE: Show sort dialog\n  showSortDialog = () => {\n    const dialog = document.createElement('div');\n    dialog.setAttribute('role', 'dialog');\n    dialog.setAttribute('aria-modal', 'true');\n    dialog.style.cssText = `\n      position: fixed; top: 0; left: 0; right: 0; bottom: 0;\n      background: rgba(0, 0, 0, 0.7); display: flex;\n      align-items: center; justify-content: center; z-index: 1000;\n    `;\n\n    const dialogContent = document.createElement('div');\n    dialogContent.style.cssText = `\n      background: var(--bg-color); padding: 24px; border-radius: 8px;\n      max-width: 350px; width: 90%;\n    `;\n\n    const title = document.createElement('h2');\n    title.style.cssText = 'margin-top: 0; color: var(--text-color);';\n    title.textContent = 'Sort Bookmarks';\n    dialogContent.appendChild(title);\n\n    const sortOptions = [\n      { value: 'engagement', label: 'Total Engagement (Likes + Retweets + Replies)' },\n      { value: 'likes', label: 'Most Likes' },\n      { value: 'retweets', label: 'Most Retweets' },\n      { value: 'replies', label: 'Most Replies' },\n      { value: 'views', label: 'Most Views' },\n      { value: 'date', label: 'Most Recent' }\n    ];\n\n    sortOptions.forEach(option => {\n      const btn = document.createElement('button');\n      btn.textContent = option.label;\n      btn.style.cssText = `\n        width: 100%; padding: 12px; margin-bottom: 8px; border: 1px solid var(--border-color);\n        background: var(--bg-color); color: var(--text-color); border-radius: 4px;\n        cursor: pointer; text-align: left; transition: background 0.2s;\n      `;\n      btn.addEventListener('mouseover', () => {\n        btn.style.background = 'var(--hover-color)';\n      });\n      btn.addEventListener('mouseout', () => {\n        btn.style.background = 'var(--bg-color)';\n      });\n      btn.addEventListener('click', () => {\n        this.sortBookmarks(option.value);\n        document.body.removeChild(dialog);\n      });\n      dialogContent.appendChild(btn);\n    });\n\n    const cancelBtn = document.createElement('button');\n    cancelBtn.textContent = 'Cancel';\n    cancelBtn.style.cssText = 'width: 100%; padding: 12px; margin-top: 8px; border: 1px solid var(--border-color); background: transparent; color: var(--text-color); border-radius: 4px; cursor: pointer;';\n    cancelBtn.addEventListener('click', () => document.body.removeChild(dialog));\n    dialogContent.appendChild(cancelBtn);\n\n    dialog.appendChild(dialogContent);\n    document.body.appendChild(dialog);\n\n    dialog.addEventListener('click', (e) => {\n      if (e.target === dialog) document.body.removeChild(dialog);\n    });\n  };\n\n  // FEATURE: HTML Export with styling\n  generateHTML = () => {\n    const bookmarks = this.state.filteredBookmarks || this.state.lastExtraction;\n    if (!bookmarks || bookmarks.length === 0) return '';\n\n    const stats = this.calculateBasicStats(bookmarks);\n    const analysis = this.state.aiAnalysis;\n\n    let html = `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>X Bookmarks Export - ${new Date().toLocaleDateString()}</title>\n  <style>\n    * { margin: 0; padding: 0; box-sizing: border-box; }\n    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n           line-height: 1.6; color: #333; background: #f5f5f5; padding: 20px; }\n    .container { max-width: 900px; margin: 0 auto; background: white; padding: 40px;\n                 border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }\n    h1 { color: #1d9bf0; margin-bottom: 10px; font-size: 32px; }\n    h2 { color: #14171a; margin: 30px 0 15px; font-size: 24px; border-bottom: 2px solid #1d9bf0; padding-bottom: 8px; }\n    h3 { color: #14171a; margin: 20px 0 10px; font-size: 18px; }\n    .header { text-align: center; margin-bottom: 40px; }\n    .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n             gap: 15px; margin: 20px 0; }\n    .stat-card { background: #f7f9fa; padding: 20px; border-radius: 8px; border-left: 4px solid #1d9bf0; }\n    .stat-label { font-size: 12px; color: #657786; text-transform: uppercase; letter-spacing: 0.5px; }\n    .stat-value { font-size: 24px; font-weight: bold; color: #14171a; margin-top: 5px; }\n    .bookmark { background: #fff; border: 1px solid #e1e8ed; border-radius: 8px;\n                padding: 20px; margin-bottom: 15px; transition: box-shadow 0.2s; }\n    .bookmark:hover { box-shadow: 0 2px 8px rgba(0,0,0,0.1); }\n    .bookmark-header { display: flex; justify-content: space-between; align-items: start; margin-bottom: 12px; }\n    .author { font-weight: bold; color: #14171a; font-size: 16px; }\n    .username { color: #657786; font-size: 14px; margin-left: 5px; }\n    .date { color: #657786; font-size: 13px; }\n    .text { color: #14171a; margin: 12px 0; font-size: 15px; line-height: 1.5; }\n    .metrics { display: flex; gap: 20px; margin-top: 12px; flex-wrap: wrap; }\n    .metric { display: flex; align-items: center; gap: 5px; color: #657786; font-size: 13px; }\n    .metric-value { font-weight: 600; color: #14171a; }\n    .link { color: #1d9bf0; text-decoration: none; word-break: break-all; font-size: 13px; }\n    .link:hover { text-decoration: underline; }\n    .tags { display: flex; flex-wrap: wrap; gap: 8px; margin: 15px 0; }\n    .tag { background: #1d9bf0; color: white; padding: 5px 15px; border-radius: 20px;\n           font-size: 12px; font-weight: 500; }\n    .categories { list-style: none; }\n    .categories li { padding: 8px 0; color: #14171a; border-bottom: 1px solid #e1e8ed; }\n    .categories li:last-child { border-bottom: none; }\n    .summary { background: #e8f5fd; padding: 20px; border-radius: 8px; margin: 20px 0;\n               border-left: 4px solid #1d9bf0; color: #14171a; line-height: 1.6; }\n    .footer { text-align: center; margin-top: 40px; padding-top: 20px;\n              border-top: 1px solid #e1e8ed; color: #657786; font-size: 13px; }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <div class=\"header\">\n      <h1>\uD83D\uDCDA X Bookmarks Export</h1>\n      <p style=\"color: #657786; margin-top: 10px;\">Generated on ${new Date().toLocaleString()}</p>\n      <p style=\"color: #657786;\">Total Bookmarks: ${bookmarks.length}</p>\n    </div>\n`;\n\n    // Analysis section\n    if (analysis) {\n      html += `\n    <h2>\uD83D\uDCCA AI Analysis</h2>\n    <div class=\"summary\">${this.escapeHtml(analysis.overallSummary || 'No summary available.')}</div>\n`;\n\n      if (analysis.tags && analysis.tags.length > 0) {\n        html += `\n    <h3>\uD83C\uDFF7\uFE0F Tags</h3>\n    <div class=\"tags\">\n      ${analysis.tags.map(tag => `<span class=\"tag\">${this.escapeHtml(tag)}</span>`).join('')}\n    </div>\n`;\n      }\n\n      if (analysis.categories && analysis.categories.length > 0) {\n        html += `\n    <h3>\uD83D\uDCC1 Categories</h3>\n    <ul class=\"categories\">\n      ${analysis.categories.map(cat => `<li>${this.escapeHtml(cat)}</li>`).join('')}\n    </ul>\n`;\n      }\n    }\n\n    // Statistics\n    html += `\n    <h2>\uD83D\uDCC8 Statistics</h2>\n    <div class=\"stats\">\n      <div class=\"stat-card\">\n        <div class=\"stat-label\">Total Likes</div>\n        <div class=\"stat-value\">${stats.totalLikes.toLocaleString()}</div>\n      </div>\n      <div class=\"stat-card\">\n        <div class=\"stat-label\">Total Retweets</div>\n        <div class=\"stat-value\">${stats.totalRetweets.toLocaleString()}</div>\n      </div>\n      <div class=\"stat-card\">\n        <div class=\"stat-label\">Avg Likes/Bookmark</div>\n        <div class=\"stat-value\">${Math.round(stats.avgLikes)}</div>\n      </div>\n      <div class=\"stat-card\">\n        <div class=\"stat-label\">Top Author</div>\n        <div class=\"stat-value\" style=\"font-size: 18px;\">@${stats.topAuthor.username || 'N/A'}</div>\n      </div>\n    </div>\n`;\n\n    // Bookmarks\n    html += `\n    <h2>\uD83D\uDD16 Bookmarks</h2>\n`;\n\n    bookmarks.forEach((b, index) => {\n      html += `\n    <div class=\"bookmark\">\n      <div class=\"bookmark-header\">\n        <div>\n          <span class=\"author\">${this.escapeHtml(b.displayName || 'Unknown')}</span>\n          <span class=\"username\">@${this.escapeHtml(b.username || 'unknown')}</span>\n        </div>\n        <div class=\"date\">${b.dateTime ? new Date(b.dateTime).toLocaleDateString() : 'N/A'}</div>\n      </div>\n      <div class=\"text\">${this.escapeHtml(b.text || '(No text)')}</div>\n      <div class=\"metrics\">\n        ${b.likes ? `<div class=\"metric\">\u2764\uFE0F <span class=\"metric-value\">${b.likes}</span></div>` : ''}\n        ${b.retweets ? `<div class=\"metric\">\uD83D\uDD04 <span class=\"metric-value\">${b.retweets}</span></div>` : ''}\n        ${b.replies ? `<div class=\"metric\">\uD83D\uDCAC <span class=\"metric-value\">${b.replies}</span></div>` : ''}\n        ${b.views ? `<div class=\"metric\">\uD83D\uDC41\uFE0F <span class=\"metric-value\">${b.views}</span></div>` : ''}\n      </div>\n      <a href=\"${b.url}\" target=\"_blank\" class=\"link\">View on X \u2192</a>\n    </div>\n`;\n    });\n\n    html += `\n    <div class=\"footer\">\n      <p>Exported with X Bookmarks Analyzer v0.11.0</p>\n      <p>Total bookmarks in this export: ${bookmarks.length}</p>\n    </div>\n  </div>\n</body>\n</html>`;\n\n    return html;\n  };\n\n  escapeHtml = (text) => {\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n  };\n\n  downloadHTML = () => {\n    const html = this.generateHTML();\n    if (!html) {\n      this.updateStatus('No bookmarks to export.');\n      return;\n    }\n    const blob = new Blob([html], { type: 'text/html' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `x-bookmarks-${Date.now()}.html`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n    this.updateStatus('Downloaded HTML file!');\n  };\n\n  // FEATURE: Notion Export\n  generateNotionMarkdown = () => {\n    const bookmarks = this.state.filteredBookmarks || this.state.lastExtraction;\n    if (!bookmarks || bookmarks.length === 0) return '';\n\n    const lines = [];\n    lines.push('# X Bookmarks Export\\n');\n    lines.push(`> Exported on ${new Date().toLocaleDateString()}\\n`);\n    lines.push(`> Total: ${bookmarks.length} bookmarks\\n\\n`);\n\n    // Add database header for Notion\n    lines.push('## Bookmarks Database\\n\\n');\n\n    bookmarks.forEach((bookmark, index) => {\n      // Notion-style toggle blocks\n      lines.push(`### ${bookmark.displayName || 'Unknown'} (@${bookmark.username || 'unknown'})\\n\\n`);\n\n      if (bookmark.text) {\n        lines.push(`${bookmark.text}\\n\\n`);\n      }\n\n      // Properties in Notion format\n      lines.push('**Properties:**\\n');\n      lines.push(`- **Author:** ${bookmark.displayName || 'Unknown'}\\n`);\n      lines.push(`- **Username:** @${bookmark.username || 'unknown'}\\n`);\n      lines.push(`- **Date:** ${bookmark.dateTime ? new Date(bookmark.dateTime).toLocaleDateString() : 'N/A'}\\n`);\n      lines.push(`- **Likes:** ${bookmark.likes || 0}\\n`);\n      lines.push(`- **Retweets:** ${bookmark.retweets || 0}\\n`);\n      lines.push(`- **Replies:** ${bookmark.replies || 0}\\n`);\n      if (bookmark.views) lines.push(`- **Views:** ${bookmark.views}\\n`);\n      lines.push(`- **URL:** ${bookmark.url}\\n`);\n\n      // Custom tags if any\n      const customTags = this.getCustomTags(bookmark.url);\n      if (customTags.length > 0) {\n        lines.push(`- **Tags:** ${customTags.join(', ')}\\n`);\n      }\n\n      // Notes if any\n      const note = this.getBookmarkNote(bookmark.url);\n      if (note) {\n        lines.push(`\\n**Notes:**\\n> ${note}\\n`);\n      }\n\n      lines.push('\\n---\\n\\n');\n    });\n\n    return lines.join('');\n  };\n\n  downloadNotion = () => {\n    const md = this.generateNotionMarkdown();\n    if (!md) {\n      this.updateStatus('No bookmarks to export.');\n      return;\n    }\n    const blob = new Blob([md], { type: 'text/markdown' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `x-bookmarks-notion-${Date.now()}.md`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n    this.updateStatus('Downloaded Notion-compatible Markdown!');\n  };\n\n  // FEATURE: Obsidian Export\n  generateObsidianMarkdown = () => {\n    const bookmarks = this.state.filteredBookmarks || this.state.lastExtraction;\n    if (!bookmarks || bookmarks.length === 0) return '';\n\n    const lines = [];\n    lines.push('# X Bookmarks Export\\n\\n');\n\n    // Obsidian metadata\n    lines.push('---\\n');\n    lines.push(`export_date: ${new Date().toISOString()}\\n`);\n    lines.push(`total_bookmarks: ${bookmarks.length}\\n`);\n    lines.push('tags:\\n');\n    lines.push('  - twitter\\n');\n    lines.push('  - bookmarks\\n');\n    if (this.state.aiAnalysis && this.state.aiAnalysis.tags) {\n      this.state.aiAnalysis.tags.slice(0, 5).forEach(tag => {\n        lines.push(`  - ${tag}\\n`);\n      });\n    }\n    lines.push('---\\n\\n');\n\n    // Summary with backlinks\n    lines.push('## Summary\\n\\n');\n    lines.push(`This vault contains [[${bookmarks.length} bookmarks]] from X (Twitter).\\n\\n`);\n\n    bookmarks.forEach((bookmark, index) => {\n      // Create individual note for each bookmark\n      const safeFilename = `${bookmark.username}-${Date.now()}-${index}`.replace(/[^a-zA-Z0-9-]/g, '_');\n\n      lines.push(`## [[${safeFilename}|${bookmark.displayName || 'Unknown'}]]\\n\\n`);\n\n      if (bookmark.text) {\n        lines.push(`${bookmark.text}\\n\\n`);\n      }\n\n      // Wikilinks for tags\n      const customTags = this.getCustomTags(bookmark.url);\n      if (customTags.length > 0) {\n        lines.push('**Tags:** ');\n        lines.push(customTags.map(tag => `#${tag.replace(/\\s+/g, '_')}`).join(' '));\n        lines.push('\\n\\n');\n      }\n\n      // Metadata\n      lines.push('**Metadata:**\\n');\n      lines.push(`- Author: [[${bookmark.username || 'unknown'}]]\\n`);\n      lines.push(`- Date: ${bookmark.dateTime ? new Date(bookmark.dateTime).toLocaleDateString() : 'N/A'}\\n`);\n      lines.push(`- Engagement: ${bookmark.likes || 0}\u2764\uFE0F ${bookmark.retweets || 0}\uD83D\uDD04 ${bookmark.replies || 0}\uD83D\uDCAC\\n`);\n      lines.push(`- [View on X](${bookmark.url})\\n\\n`);\n\n      // Notes as blockquote\n      const note = this.getBookmarkNote(bookmark.url);\n      if (note) {\n        lines.push('**My Notes:**\\n');\n        lines.push(`> ${note}\\n\\n`);\n      }\n\n      lines.push('---\\n\\n');\n    });\n\n    return lines.join('');\n  };\n\n  downloadObsidian = () => {\n    const md = this.generateObsidianMarkdown();\n    if (!md) {\n      this.updateStatus('No bookmarks to export.');\n      return;\n    }\n    const blob = new Blob([md], { type: 'text/markdown' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `x-bookmarks-obsidian-${Date.now()}.md`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n    this.updateStatus('Downloaded Obsidian-compatible Markdown!');\n  };\n\n  // FEATURE: Auto-save bookmarks\n  enableAutoSave = (intervalMinutes = 5) => {\n    if (this.autoSaveTimer) {\n      clearInterval(this.autoSaveTimer);\n    }\n\n    this.autoSaveTimer = setInterval(async () => {\n      if (this.state.lastExtraction && this.state.lastExtraction.length > 0) {\n        await chrome.storage.local.set({\n          lastExtraction: {\n            timestamp: Date.now(),\n            bookmarks: this.state.lastExtraction\n          },\n          autoSaveTime: new Date().toISOString()\n        });\n        console.log('[Auto-save] Bookmarks saved automatically');\n      }\n    }, intervalMinutes * 60 * 1000);\n\n    console.log(`[Auto-save] Enabled with ${intervalMinutes} minute interval`);\n  };\n\n  // ====== NEW FEATURES v0.10.0 ======\n\n  // FEATURE: Read/Unread Status\n  toggleReadStatus = async (bookmarkUrl) => {\n    if (!this.state.bookmarkMetadata[bookmarkUrl]) {\n      this.state.bookmarkMetadata[bookmarkUrl] = { read: false, notes: '', customTags: [], favorite: false };\n    }\n    this.state.bookmarkMetadata[bookmarkUrl].read = !this.state.bookmarkMetadata[bookmarkUrl].read;\n    await this.saveSettings();\n    return this.state.bookmarkMetadata[bookmarkUrl].read;\n  };\n\n  markAsRead = async (bookmarkUrl) => {\n    if (!this.state.bookmarkMetadata[bookmarkUrl]) {\n      this.state.bookmarkMetadata[bookmarkUrl] = { read: true, notes: '', customTags: [], favorite: false };\n    } else {\n      this.state.bookmarkMetadata[bookmarkUrl].read = true;\n    }\n    await this.saveSettings();\n  };\n\n  markAsUnread = async (bookmarkUrl) => {\n    if (!this.state.bookmarkMetadata[bookmarkUrl]) {\n      this.state.bookmarkMetadata[bookmarkUrl] = { read: false, notes: '', customTags: [], favorite: false };\n    } else {\n      this.state.bookmarkMetadata[bookmarkUrl].read = false;\n    }\n    await this.saveSettings();\n  };\n\n  getReadStatus = (bookmarkUrl) => {\n    return this.state.bookmarkMetadata[bookmarkUrl]?.read || false;\n  };\n\n  // FEATURE: Personal Notes\n  setBookmarkNote = async (bookmarkUrl, note) => {\n    if (!this.state.bookmarkMetadata[bookmarkUrl]) {\n      this.state.bookmarkMetadata[bookmarkUrl] = { read: false, notes: '', customTags: [], favorite: false };\n    }\n    this.state.bookmarkMetadata[bookmarkUrl].notes = note;\n    await this.saveSettings();\n  };\n\n  getBookmarkNote = (bookmarkUrl) => {\n    return this.state.bookmarkMetadata[bookmarkUrl]?.notes || '';\n  };\n\n  showNotesDialog = (bookmark) => {\n    const dialog = document.createElement('div');\n    dialog.setAttribute('role', 'dialog');\n    dialog.setAttribute('aria-modal', 'true');\n    dialog.style.cssText = `\n      position: fixed; top: 0; left: 0; right: 0; bottom: 0;\n      background: rgba(0, 0, 0, 0.7); display: flex;\n      align-items: center; justify-content: center; z-index: 1000;\n    `;\n\n    const dialogContent = document.createElement('div');\n    dialogContent.style.cssText = `\n      background: var(--bg-color); padding: 24px; border-radius: 8px;\n      max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto;\n    `;\n\n    const title = document.createElement('h2');\n    title.style.cssText = 'margin-top: 0; color: var(--text-color);';\n    title.textContent = 'Add Note';\n    dialogContent.appendChild(title);\n\n    const bookmarkInfo = document.createElement('p');\n    bookmarkInfo.style.cssText = 'color: var(--disabled-color); font-size: 13px; margin-bottom: 16px;';\n    bookmarkInfo.textContent = `@${bookmark.username}: ${bookmark.text?.substring(0, 60)}...`;\n    dialogContent.appendChild(bookmarkInfo);\n\n    const textarea = document.createElement('textarea');\n    textarea.value = this.getBookmarkNote(bookmark.url);\n    textarea.placeholder = 'Add your personal notes here...';\n    textarea.style.cssText = `\n      width: 100%; min-height: 120px; padding: 12px; margin-bottom: 16px;\n      border: 1px solid var(--border-color); border-radius: 8px;\n      background: var(--bg-color); color: var(--text-color); font-size: 14px;\n      font-family: inherit; resize: vertical;\n    `;\n    dialogContent.appendChild(textarea);\n\n    const buttonContainer = document.createElement('div');\n    buttonContainer.style.cssText = 'display: flex; gap: 8px; justify-content: flex-end;';\n\n    const cancelBtn = document.createElement('button');\n    cancelBtn.textContent = 'Cancel';\n    cancelBtn.style.cssText = 'padding: 8px 16px; border: 1px solid var(--border-color); background: transparent; color: var(--text-color); border-radius: 4px; cursor: pointer;';\n    cancelBtn.addEventListener('click', () => document.body.removeChild(dialog));\n\n    const saveBtn = document.createElement('button');\n    saveBtn.textContent = 'Save Note';\n    saveBtn.style.cssText = 'padding: 8px 16px; border: none; background: var(--primary-color); color: white; border-radius: 4px; cursor: pointer;';\n    saveBtn.addEventListener('click', async () => {\n      await this.setBookmarkNote(bookmark.url, textarea.value);\n      this.updateStatus('Note saved successfully!');\n      document.body.removeChild(dialog);\n    });\n\n    buttonContainer.appendChild(cancelBtn);\n    buttonContainer.appendChild(saveBtn);\n    dialogContent.appendChild(buttonContainer);\n    dialog.appendChild(dialogContent);\n    document.body.appendChild(dialog);\n\n    textarea.focus();\n  };\n\n  // FEATURE: Custom Tags\n  addCustomTag = async (bookmarkUrl, tag) => {\n    if (!this.state.bookmarkMetadata[bookmarkUrl]) {\n      this.state.bookmarkMetadata[bookmarkUrl] = { read: false, notes: '', customTags: [], favorite: false };\n    }\n    if (!this.state.bookmarkMetadata[bookmarkUrl].customTags) {\n      this.state.bookmarkMetadata[bookmarkUrl].customTags = [];\n    }\n    if (!this.state.bookmarkMetadata[bookmarkUrl].customTags.includes(tag)) {\n      this.state.bookmarkMetadata[bookmarkUrl].customTags.push(tag);\n      await this.saveSettings();\n    }\n  };\n\n  removeCustomTag = async (bookmarkUrl, tag) => {\n    if (this.state.bookmarkMetadata[bookmarkUrl]?.customTags) {\n      this.state.bookmarkMetadata[bookmarkUrl].customTags =\n        this.state.bookmarkMetadata[bookmarkUrl].customTags.filter(t => t !== tag);\n      await this.saveSettings();\n    }\n  };\n\n  getCustomTags = (bookmarkUrl) => {\n    return this.state.bookmarkMetadata[bookmarkUrl]?.customTags || [];\n  };\n\n  showTagsDialog = (bookmark) => {\n    const dialog = document.createElement('div');\n    dialog.setAttribute('role', 'dialog');\n    dialog.setAttribute('aria-modal', 'true');\n    dialog.style.cssText = `\n      position: fixed; top: 0; left: 0; right: 0; bottom: 0;\n      background: rgba(0, 0, 0, 0.7); display: flex;\n      align-items: center; justify-content: center; z-index: 1000;\n    `;\n\n    const dialogContent = document.createElement('div');\n    dialogContent.style.cssText = `\n      background: var(--bg-color); padding: 24px; border-radius: 8px;\n      max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto;\n    `;\n\n    const title = document.createElement('h2');\n    title.style.cssText = 'margin-top: 0; color: var(--text-color);';\n    title.textContent = 'Manage Tags';\n    dialogContent.appendChild(title);\n\n    const bookmarkInfo = document.createElement('p');\n    bookmarkInfo.style.cssText = 'color: var(--disabled-color); font-size: 13px; margin-bottom: 16px;';\n    bookmarkInfo.textContent = `@${bookmark.username}: ${bookmark.text?.substring(0, 60)}...`;\n    dialogContent.appendChild(bookmarkInfo);\n\n    // Current tags\n    const tagsContainer = document.createElement('div');\n    tagsContainer.id = 'current-tags';\n    tagsContainer.style.cssText = 'margin-bottom: 16px; min-height: 40px;';\n\n    const renderTags = () => {\n      tagsContainer.innerHTML = '';\n      const tags = this.getCustomTags(bookmark.url);\n      if (tags.length === 0) {\n        const emptyMsg = document.createElement('p');\n        emptyMsg.style.cssText = 'color: var(--disabled-color); font-style: italic;';\n        emptyMsg.textContent = 'No tags yet';\n        tagsContainer.appendChild(emptyMsg);\n      } else {\n        tags.forEach(tag => {\n          const tagSpan = document.createElement('span');\n          tagSpan.style.cssText = `\n            display: inline-block; background: var(--primary-color); color: white;\n            padding: 6px 12px; margin: 4px; border-radius: 16px; font-size: 13px;\n          `;\n          tagSpan.textContent = tag;\n\n          const removeBtn = document.createElement('button');\n          removeBtn.textContent = '\u00D7';\n          removeBtn.style.cssText = `\n            background: none; border: none; color: white; font-size: 18px;\n            cursor: pointer; margin-left: 6px; padding: 0 4px;\n          `;\n          removeBtn.addEventListener('click', async () => {\n            await this.removeCustomTag(bookmark.url, tag);\n            renderTags();\n          });\n\n          tagSpan.appendChild(removeBtn);\n          tagsContainer.appendChild(tagSpan);\n        });\n      }\n    };\n    renderTags();\n    dialogContent.appendChild(tagsContainer);\n\n    // Add tag input\n    const inputContainer = document.createElement('div');\n    inputContainer.style.cssText = 'display: flex; gap: 8px; margin-bottom: 16px;';\n\n    const tagInput = document.createElement('input');\n    tagInput.type = 'text';\n    tagInput.placeholder = 'Add new tag...';\n    tagInput.style.cssText = `\n      flex: 1; padding: 8px 12px; border: 1px solid var(--border-color);\n      border-radius: 4px; background: var(--bg-color); color: var(--text-color);\n    `;\n\n    const addTagBtn = document.createElement('button');\n    addTagBtn.textContent = 'Add';\n    addTagBtn.style.cssText = 'padding: 8px 16px; border: none; background: var(--primary-color); color: white; border-radius: 4px; cursor: pointer;';\n    addTagBtn.addEventListener('click', async () => {\n      const tag = tagInput.value.trim();\n      if (tag) {\n        await this.addCustomTag(bookmark.url, tag);\n        tagInput.value = '';\n        renderTags();\n      }\n    });\n\n    tagInput.addEventListener('keypress', (e) => {\n      if (e.key === 'Enter') {\n        addTagBtn.click();\n      }\n    });\n\n    inputContainer.appendChild(tagInput);\n    inputContainer.appendChild(addTagBtn);\n    dialogContent.appendChild(inputContainer);\n\n    // Close button\n    const closeBtn = document.createElement('button');\n    closeBtn.textContent = 'Close';\n    closeBtn.style.cssText = 'width: 100%; padding: 8px 16px; border: 1px solid var(--border-color); background: transparent; color: var(--text-color); border-radius: 4px; cursor: pointer;';\n    closeBtn.addEventListener('click', () => document.body.removeChild(dialog));\n    dialogContent.appendChild(closeBtn);\n\n    dialog.appendChild(dialogContent);\n    document.body.appendChild(dialog);\n\n    tagInput.focus();\n  };\n\n  // FEATURE: Saved Searches\n  saveCurrentSearch = async () => {\n    const searchName = prompt('Name this search:');\n    if (!searchName) return;\n\n    const savedSearch = {\n      id: Date.now().toString(),\n      name: searchName,\n      query: this.state.searchQuery,\n      filters: { ...this.state.filterOptions }\n    };\n\n    this.state.savedSearches.push(savedSearch);\n    await this.saveSettings();\n    this.updateStatus(`Search \"${searchName}\" saved!`);\n  };\n\n  loadSavedSearch = async (searchId) => {\n    const search = this.state.savedSearches.find(s => s.id === searchId);\n    if (!search) return;\n\n    this.state.searchQuery = search.query;\n    this.state.filterOptions = { ...search.filters };\n\n    if (this.elements.searchInput) {\n      this.elements.searchInput.value = search.query;\n    }\n\n    this.performSearch();\n    this.applyFilters();\n    this.updateStatus(`Loaded search: ${search.name}`);\n  };\n\n  deleteSavedSearch = async (searchId) => {\n    this.state.savedSearches = this.state.savedSearches.filter(s => s.id !== searchId);\n    await this.saveSettings();\n  };\n\n  showSavedSearchesDialog = () => {\n    const dialog = document.createElement('div');\n    dialog.setAttribute('role', 'dialog');\n    dialog.setAttribute('aria-modal', 'true');\n    dialog.style.cssText = `\n      position: fixed; top: 0; left: 0; right: 0; bottom: 0;\n      background: rgba(0, 0, 0, 0.7); display: flex;\n      align-items: center; justify-content: center; z-index: 1000;\n    `;\n\n    const dialogContent = document.createElement('div');\n    dialogContent.style.cssText = `\n      background: var(--bg-color); padding: 24px; border-radius: 8px;\n      max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto;\n    `;\n\n    const title = document.createElement('h2');\n    title.style.cssText = 'margin-top: 0; color: var(--text-color);';\n    title.textContent = 'Saved Searches';\n    dialogContent.appendChild(title);\n\n    if (this.state.savedSearches.length === 0) {\n      const emptyMsg = document.createElement('p');\n      emptyMsg.style.cssText = 'color: var(--disabled-color); text-align: center; padding: 20px;';\n      emptyMsg.textContent = 'No saved searches yet';\n      dialogContent.appendChild(emptyMsg);\n    } else {\n      this.state.savedSearches.forEach(search => {\n        const searchItem = document.createElement('div');\n        searchItem.style.cssText = `\n          display: flex; justify-content: space-between; align-items: center;\n          padding: 12px; margin-bottom: 8px; background: var(--hover-color);\n          border-radius: 6px; border: 1px solid var(--border-color);\n        `;\n\n        const info = document.createElement('div');\n        info.style.cssText = 'flex: 1;';\n\n        const name = document.createElement('div');\n        name.style.cssText = 'color: var(--text-color); font-weight: 600; margin-bottom: 4px;';\n        name.textContent = search.name;\n\n        const query = document.createElement('div');\n        query.style.cssText = 'color: var(--disabled-color); font-size: 12px;';\n        query.textContent = search.query || '(no query)';\n\n        info.appendChild(name);\n        info.appendChild(query);\n\n        const actions = document.createElement('div');\n        actions.style.cssText = 'display: flex; gap: 8px;';\n\n        const loadBtn = document.createElement('button');\n        loadBtn.textContent = 'Load';\n        loadBtn.style.cssText = 'padding: 6px 12px; border: none; background: var(--primary-color); color: white; border-radius: 4px; cursor: pointer; font-size: 12px;';\n        loadBtn.addEventListener('click', () => {\n          this.loadSavedSearch(search.id);\n          document.body.removeChild(dialog);\n        });\n\n        const deleteBtn = document.createElement('button');\n        deleteBtn.textContent = '\u00D7';\n        deleteBtn.style.cssText = 'padding: 6px 10px; border: none; background: var(--danger-color); color: white; border-radius: 4px; cursor: pointer; font-size: 14px;';\n        deleteBtn.addEventListener('click', async () => {\n          await this.deleteSavedSearch(search.id);\n          document.body.removeChild(dialog);\n          this.showSavedSearchesDialog();\n        });\n\n        actions.appendChild(loadBtn);\n        actions.appendChild(deleteBtn);\n\n        searchItem.appendChild(info);\n        searchItem.appendChild(actions);\n        dialogContent.appendChild(searchItem);\n      });\n    }\n\n    const buttonContainer = document.createElement('div');\n    buttonContainer.style.cssText = 'display: flex; gap: 8px; justify-content: space-between; margin-top: 16px;';\n\n    const saveCurrentBtn = document.createElement('button');\n    saveCurrentBtn.textContent = 'Save Current Search';\n    saveCurrentBtn.style.cssText = 'flex: 1; padding: 10px; border: none; background: var(--success-color); color: white; border-radius: 4px; cursor: pointer;';\n    saveCurrentBtn.addEventListener('click', async () => {\n      await this.saveCurrentSearch();\n      document.body.removeChild(dialog);\n      this.showSavedSearchesDialog();\n    });\n\n    const closeBtn = document.createElement('button');\n    closeBtn.textContent = 'Close';\n    closeBtn.style.cssText = 'padding: 10px 20px; border: 1px solid var(--border-color); background: transparent; color: var(--text-color); border-radius: 4px; cursor: pointer;';\n    closeBtn.addEventListener('click', () => document.body.removeChild(dialog));\n\n    buttonContainer.appendChild(saveCurrentBtn);\n    buttonContainer.appendChild(closeBtn);\n    dialogContent.appendChild(buttonContainer);\n\n    dialog.appendChild(dialogContent);\n    document.body.appendChild(dialog);\n  };\n\n  // FEATURE: View Mode Toggle\n  toggleViewMode = async () => {\n    const modes = ['list', 'grid', 'card'];\n    const currentIndex = modes.indexOf(this.state.viewMode);\n    this.state.viewMode = modes[(currentIndex + 1) % modes.length];\n    await this.saveSettings();\n    this.updateStatus(`View mode: ${this.state.viewMode}`);\n  };\n\n  // FEATURE: Collections\n  createCollection = async (name, color = '#1DA1F2') => {\n    const collection = {\n      id: Date.now().toString(),\n      name,\n      color,\n      bookmarkCount: 0\n    };\n    this.state.collections.push(collection);\n    await this.saveSettings();\n    return collection;\n  };\n\n  addToCollection = async (bookmarkUrl, collectionId) => {\n    if (!this.state.bookmarkMetadata[bookmarkUrl]) {\n      this.state.bookmarkMetadata[bookmarkUrl] = { read: false, notes: '', customTags: [], favorite: false };\n    }\n    this.state.bookmarkMetadata[bookmarkUrl].collection = collectionId;\n    await this.saveSettings();\n  };\n\n  showCollectionsDialog = () => {\n    const dialog = document.createElement('div');\n    dialog.setAttribute('role', 'dialog');\n    dialog.setAttribute('aria-modal', 'true');\n    dialog.style.cssText = `\n      position: fixed; top: 0; left: 0; right: 0; bottom: 0;\n      background: rgba(0, 0, 0, 0.7); display: flex;\n      align-items: center; justify-content: center; z-index: 1000;\n    `;\n\n    const dialogContent = document.createElement('div');\n    dialogContent.style.cssText = `\n      background: var(--bg-color); padding: 24px; border-radius: 8px;\n      max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto;\n    `;\n\n    const title = document.createElement('h2');\n    title.style.cssText = 'margin-top: 0; color: var(--text-color);';\n    title.textContent = 'Collections';\n    dialogContent.appendChild(title);\n\n    if (this.state.collections.length === 0) {\n      const emptyMsg = document.createElement('p');\n      emptyMsg.style.cssText = 'color: var(--disabled-color); text-align: center; padding: 20px;';\n      emptyMsg.textContent = 'No collections yet. Create one to organize your bookmarks!';\n      dialogContent.appendChild(emptyMsg);\n    } else {\n      this.state.collections.forEach(collection => {\n        const collectionItem = document.createElement('div');\n        collectionItem.style.cssText = `\n          padding: 12px; margin-bottom: 8px; background: var(--hover-color);\n          border-radius: 6px; border-left: 4px solid ${collection.color};\n        `;\n\n        const name = document.createElement('div');\n        name.style.cssText = 'color: var(--text-color); font-weight: 600;';\n        name.textContent = collection.name;\n\n        collectionItem.appendChild(name);\n        dialogContent.appendChild(collectionItem);\n      });\n    }\n\n    const createBtn = document.createElement('button');\n    createBtn.textContent = '+ Create Collection';\n    createBtn.style.cssText = 'width: 100%; padding: 12px; margin: 16px 0 8px 0; border: none; background: var(--primary-color); color: white; border-radius: 4px; cursor: pointer;';\n    createBtn.addEventListener('click', () => {\n      const name = prompt('Collection name:');\n      if (name) {\n        this.createCollection(name);\n        document.body.removeChild(dialog);\n        this.showCollectionsDialog();\n      }\n    });\n\n    const closeBtn = document.createElement('button');\n    closeBtn.textContent = 'Close';\n    closeBtn.style.cssText = 'width: 100%; padding: 12px; border: 1px solid var(--border-color); background: transparent; color: var(--text-color); border-radius: 4px; cursor: pointer;';\n    closeBtn.addEventListener('click', () => document.body.removeChild(dialog));\n\n    dialogContent.appendChild(createBtn);\n    dialogContent.appendChild(closeBtn);\n    dialog.appendChild(dialogContent);\n    document.body.appendChild(dialog);\n  };\n\n  // FEATURE: Sentiment Analysis\n  analyzeSentiment = (text) => {\n    // Simple rule-based sentiment analysis\n    const positiveWords = ['good', 'great', 'awesome', 'excellent', 'amazing', 'love', 'best', 'wonderful', 'fantastic', 'happy', 'excited', 'perfect', 'brilliant'];\n    const negativeWords = ['bad', 'terrible', 'awful', 'hate', 'worst', 'horrible', 'disappointed', 'sad', 'angry', 'frustrating', 'annoying', 'poor'];\n\n    const lowerText = text.toLowerCase();\n    let score = 0;\n\n    positiveWords.forEach(word => {\n      if (lowerText.includes(word)) score += 1;\n    });\n\n    negativeWords.forEach(word => {\n      if (lowerText.includes(word)) score -= 1;\n    });\n\n    if (score > 0) return 'positive';\n    if (score < 0) return 'negative';\n    return 'neutral';\n  };\n\n  showSentimentAnalysis = () => {\n    if (!this.state.lastExtraction || this.state.lastExtraction.length === 0) {\n      this.updateStatus('No bookmarks to analyze.');\n      return;\n    }\n\n    const sentiments = { positive: 0, neutral: 0, negative: 0 };\n\n    this.state.lastExtraction.forEach(bookmark => {\n      if (bookmark.text) {\n        const sentiment = this.analyzeSentiment(bookmark.text);\n        sentiments[sentiment]++;\n      }\n    });\n\n    const dialog = document.createElement('div');\n    dialog.setAttribute('role', 'dialog');\n    dialog.setAttribute('aria-modal', 'true');\n    dialog.style.cssText = `\n      position: fixed; top: 0; left: 0; right: 0; bottom: 0;\n      background: rgba(0, 0, 0, 0.7); display: flex;\n      align-items: center; justify-content: center; z-index: 1000;\n    `;\n\n    const dialogContent = document.createElement('div');\n    dialogContent.style.cssText = `\n      background: var(--bg-color); padding: 24px; border-radius: 8px;\n      max-width: 400px; width: 90%;\n    `;\n\n    const total = this.state.lastExtraction.length;\n    const posPercent = Math.round((sentiments.positive / total) * 100);\n    const neuPercent = Math.round((sentiments.neutral / total) * 100);\n    const negPercent = Math.round((sentiments.negative / total) * 100);\n\n    dialogContent.innerHTML = `\n      <h2 style=\"margin-top: 0; color: var(--text-color);\">Sentiment Analysis</h2>\n      <div style=\"margin: 20px 0;\">\n        <div style=\"margin-bottom: 16px;\">\n          <div style=\"display: flex; justify-content: space-between; margin-bottom: 4px;\">\n            <span style=\"color: var(--text-color);\">\uD83D\uDE0A Positive</span>\n            <span style=\"color: var(--text-color); font-weight: 600;\">${sentiments.positive} (${posPercent}%)</span>\n          </div>\n          <div style=\"background: var(--border-color); height: 8px; border-radius: 4px; overflow: hidden;\">\n            <div style=\"background: var(--success-color); height: 100%; width: ${posPercent}%;\"></div>\n          </div>\n        </div>\n        <div style=\"margin-bottom: 16px;\">\n          <div style=\"display: flex; justify-content: space-between; margin-bottom: 4px;\">\n            <span style=\"color: var(--text-color);\">\uD83D\uDE10 Neutral</span>\n            <span style=\"color: var(--text-color); font-weight: 600;\">${sentiments.neutral} (${neuPercent}%)</span>\n          </div>\n          <div style=\"background: var(--border-color); height: 8px; border-radius: 4px; overflow: hidden;\">\n            <div style=\"background: var(--disabled-color); height: 100%; width: ${neuPercent}%;\"></div>\n          </div>\n        </div>\n        <div style=\"margin-bottom: 16px;\">\n          <div style=\"display: flex; justify-content: space-between; margin-bottom: 4px;\">\n            <span style=\"color: var(--text-color);\">\uD83D\uDE1E Negative</span>\n            <span style=\"color: var(--text-color); font-weight: 600;\">${sentiments.negative} (${negPercent}%)</span>\n          </div>\n          <div style=\"background: var(--border-color); height: 8px; border-radius: 4px; overflow: hidden;\">\n            <div style=\"background: var(--danger-color); height: 100%; width: ${negPercent}%;\"></div>\n          </div>\n        </div>\n      </div>\n      <button id=\"closeDialog\" style=\"width: 100%; padding: 12px; border: none; background: var(--primary-color); color: white; border-radius: 4px; cursor: pointer;\">Close</button>\n    `;\n\n    dialog.appendChild(dialogContent);\n    document.body.appendChild(dialog);\n\n    const closeDialog = () => document.body.removeChild(dialog);\n    document.getElementById('closeDialog').addEventListener('click', closeDialog);\n    dialog.addEventListener('click', (e) => {\n      if (e.target === dialog) closeDialog();\n    });\n  };\n\n  // FEATURE: AI Q&A over bookmarks\n  showAIQADialog = () => {\n    const dialog = document.createElement('div');\n    dialog.setAttribute('role', 'dialog');\n    dialog.setAttribute('aria-modal', 'true');\n    dialog.style.cssText = `\n      position: fixed; top: 0; left: 0; right: 0; bottom: 0;\n      background: rgba(0, 0, 0, 0.7); display: flex;\n      align-items: center; justify-content: center; z-index: 1000;\n    `;\n\n    const dialogContent = document.createElement('div');\n    dialogContent.style.cssText = `\n      background: var(--bg-color); padding: 24px; border-radius: 8px;\n      max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto;\n    `;\n\n    const title = document.createElement('h2');\n    title.style.cssText = 'margin-top: 0; color: var(--text-color);';\n    title.textContent = 'Ask AI About Your Bookmarks';\n    dialogContent.appendChild(title);\n\n    const info = document.createElement('p');\n    info.style.cssText = 'color: var(--disabled-color); font-size: 13px; margin-bottom: 16px;';\n    info.textContent = 'Ask questions about your bookmarks. The AI will search through your bookmarks to find relevant answers.';\n    dialogContent.appendChild(info);\n\n    const input = document.createElement('input');\n    input.type = 'text';\n    input.placeholder = 'e.g., Find tweets about React hooks';\n    input.style.cssText = `\n      width: 100%; padding: 12px; margin-bottom: 16px;\n      border: 1px solid var(--border-color); border-radius: 8px;\n      background: var(--bg-color); color: var(--text-color); font-size: 14px;\n    `;\n    dialogContent.appendChild(input);\n\n    const answerDiv = document.createElement('div');\n    answerDiv.id = 'ai-answer';\n    answerDiv.style.cssText = `\n      min-height: 100px; padding: 16px; margin-bottom: 16px;\n      background: var(--hover-color); border-radius: 8px;\n      border: 1px solid var(--border-color); color: var(--text-color);\n      display: none;\n    `;\n    dialogContent.appendChild(answerDiv);\n\n    const buttonContainer = document.createElement('div');\n    buttonContainer.style.cssText = 'display: flex; gap: 8px;';\n\n    const askBtn = document.createElement('button');\n    askBtn.textContent = 'Ask';\n    askBtn.style.cssText = 'flex: 1; padding: 12px; border: none; background: var(--primary-color); color: white; border-radius: 4px; cursor: pointer;';\n    askBtn.addEventListener('click', () => {\n      const question = input.value.trim();\n      if (!question) return;\n\n      answerDiv.style.display = 'block';\n      answerDiv.textContent = 'Searching bookmarks...';\n\n      // Simple keyword matching Q&A\n      setTimeout(() => {\n        const keywords = question.toLowerCase().split(' ').filter(w => w.length > 3);\n        const results = (this.state.lastExtraction || []).filter(b => {\n          const text = b.text?.toLowerCase() || '';\n          return keywords.some(keyword => text.includes(keyword));\n        });\n\n        if (results.length === 0) {\n          answerDiv.textContent = 'No relevant bookmarks found for your question.';\n        } else {\n          answerDiv.innerHTML = `\n            <strong style=\"color: var(--text-color);\">Found ${results.length} relevant bookmarks:</strong><br><br>\n            ${results.slice(0, 5).map((b, i) => `\n              <div style=\"margin-bottom: 12px; padding-bottom: 12px; border-bottom: 1px solid var(--border-color);\">\n                <strong style=\"color: var(--text-color);\">@${b.username}</strong>: ${b.text?.substring(0, 150)}...\n                <br><a href=\"${b.url}\" target=\"_blank\" style=\"color: var(--primary-color); font-size: 12px;\">View tweet</a>\n              </div>\n            `).join('')}\n          `;\n        }\n      }, 500);\n    });\n\n    const closeBtn = document.createElement('button');\n    closeBtn.textContent = 'Close';\n    closeBtn.style.cssText = 'padding: 12px 20px; border: 1px solid var(--border-color); background: transparent; color: var(--text-color); border-radius: 4px; cursor: pointer;';\n    closeBtn.addEventListener('click', () => document.body.removeChild(dialog));\n\n    buttonContainer.appendChild(askBtn);\n    buttonContainer.appendChild(closeBtn);\n    dialogContent.appendChild(buttonContainer);\n\n    dialog.appendChild(dialogContent);\n    document.body.appendChild(dialog);\n\n    input.focus();\n  };\n\n  // SUBSCRIPTION & QUOTA UI\n  updateSubscriptionUI = () => {\n    const { isPro } = this.state.quota;\n\n    if (isPro) {\n      if (this.elements.upgradeBtn) this.elements.upgradeBtn.style.display = 'none';\n      if (this.elements.subscriptionStatus) {\n        this.elements.subscriptionStatus.style.display = 'block';\n        this.elements.subscriptionStatus.textContent = '\uD83C\uDF1F Pro Plan Active (Unlimited Analysis)';\n      }\n    } else {\n      if (this.elements.upgradeBtn) {\n        this.elements.upgradeBtn.style.display = 'block';\n        this.elements.upgradeBtn.textContent = `\uD83D\uDC51 Upgrade to Pro (${this.state.quota.count}/${this.state.quota.limit} used today)`;\n      }\n      if (this.elements.subscriptionStatus) this.elements.subscriptionStatus.style.display = 'none';\n    }\n  };\n\n  handleUpgrade = () => {\n    const dialog = document.createElement('div');\n    dialog.className = 'modal-overlay';\n    dialog.innerHTML = `\n      <div class=\"modal-content\">\n        <span class=\"modal-icon\">\uD83D\uDC51</span>\n        <h2 class=\"modal-title\">Upgrade to Pro</h2>\n        <p class=\"modal-text\">\n          Unlock unlimited AI analysis and advanced features!<br>\n          Current Plan: 10 bookmarks/day<br>\n          Pro Plan: Unlimited\n        </p>\n        <div class=\"modal-actions\">\n          <button id=\"confirmUpgradeBtn\" class=\"modal-primary-btn\">Unlock Now ($9.99)</button>\n          <button id=\"cancelUpgradeBtn\" class=\"modal-secondary-btn\">Maybe Later</button>\n        </div>\n      </div>\n    `;\n\n    document.body.appendChild(dialog);\n\n    document.getElementById('confirmUpgradeBtn').onclick = async () => {\n      await this.subscriptionManager.upgrade();\n      this.state.quota.isPro = true;\n      this.updateSubscriptionUI();\n      document.body.removeChild(dialog);\n      this.updateStatus('\uD83C\uDF1F Upgraded to Pro! Enjoy unlimited access.');\n    };\n\n    document.getElementById('cancelUpgradeBtn').onclick = () => {\n      document.body.removeChild(dialog);\n    };\n  };\n\n  showLimitReachedModal = () => {\n    const dialog = document.createElement('div');\n    dialog.className = 'modal-overlay';\n    dialog.innerHTML = `\n      <div class=\"modal-content\">\n        <span class=\"modal-icon\">\uD83D\uDED1</span>\n        <h2 class=\"modal-title\">Daily Limit Reached</h2>\n        <p class=\"modal-text\">\n          You have reached your daily limit of ${this.quotaManager.DAILY_LIMIT} AI analyses.<br>\n          Upgrade to Pro for unlimited access or come back tomorrow!\n        </p>\n        <div class=\"modal-actions\">\n          <button id=\"limitUpgradeBtn\" class=\"modal-primary-btn\">Upgrade to Pro</button>\n          <button id=\"limitCloseBtn\" class=\"modal-secondary-btn\">Close</button>\n        </div>\n      </div>\n    `;\n\n    document.body.appendChild(dialog);\n\n    document.getElementById('limitUpgradeBtn').onclick = () => {\n      document.body.removeChild(dialog);\n      this.handleUpgrade();\n    };\n\n    document.getElementById('limitCloseBtn').onclick = () => {\n      document.body.removeChild(dialog);\n    };\n  };\n\n  // FEATURE: Find Similar Bookmarks\n  findSimilarBookmarks = (bookmarkUrl) => {\n    const targetBookmark = this.state.lastExtraction?.find(b => b.url === bookmarkUrl);\n    if (!targetBookmark) return [];\n\n    const targetWords = new Set(\n      (targetBookmark.text || '').toLowerCase()\n        .split(/\\s+/)\n        .filter(w => w.length > 4)\n    );\n\n    const similarities = (this.state.lastExtraction || [])\n      .filter(b => b.url !== bookmarkUrl)\n      .map(bookmark => {\n        const words = (bookmark.text || '').toLowerCase().split(/\\s+/).filter(w => w.length > 4);\n        const commonWords = words.filter(w => targetWords.has(w)).length;\n        const similarity = commonWords / Math.max(targetWords.size, words.length);\n        return { bookmark, similarity };\n      })\n      .filter(item => item.similarity > 0.1)\n      .sort((a, b) => b.similarity - a.similarity)\n      .slice(0, 10);\n\n    return similarities;\n  };\n\n  showSimilarBookmarksDialog = (bookmark) => {\n    const similar = this.findSimilarBookmarks(bookmark.url);\n\n    const dialog = document.createElement('div');\n    dialog.setAttribute('role', 'dialog');\n    dialog.setAttribute('aria-modal', 'true');\n    dialog.style.cssText = `\n      position: fixed; top: 0; left: 0; right: 0; bottom: 0;\n      background: rgba(0, 0, 0, 0.7); display: flex;\n      align-items: center; justify-content: center; z-index: 1000;\n    `;\n\n    const dialogContent = document.createElement('div');\n    dialogContent.style.cssText = `\n      background: var(--bg-color); padding: 24px; border-radius: 8px;\n      max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto;\n    `;\n\n    const title = document.createElement('h2');\n    title.style.cssText = 'margin-top: 0; color: var(--text-color);';\n    title.textContent = 'Similar Bookmarks';\n    dialogContent.appendChild(title);\n\n    const info = document.createElement('p');\n    info.style.cssText = 'color: var(--disabled-color); font-size: 13px; margin-bottom: 16px;';\n    info.textContent = `Finding bookmarks similar to: ${bookmark.text?.substring(0, 60)}...`;\n    dialogContent.appendChild(info);\n\n    if (similar.length === 0) {\n      const emptyMsg = document.createElement('p');\n      emptyMsg.style.cssText = 'color: var(--disabled-color); text-align: center; padding: 20px;';\n      emptyMsg.textContent = 'No similar bookmarks found';\n      dialogContent.appendChild(emptyMsg);\n    } else {\n      similar.forEach(({ bookmark: b, similarity }) => {\n        const item = document.createElement('div');\n        item.style.cssText = `\n          padding: 12px; margin-bottom: 12px; background: var(--hover-color);\n          border-radius: 6px; border-left: 4px solid var(--primary-color);\n        `;\n\n        const author = document.createElement('div');\n        author.style.cssText = 'color: var(--text-color); font-weight: 600; margin-bottom: 4px;';\n        author.textContent = `@${b.username} (${Math.round(similarity * 100)}% similar)`;\n\n        const text = document.createElement('div');\n        text.style.cssText = 'color: var(--text-color); font-size: 13px; margin-bottom: 8px;';\n        text.textContent = b.text?.substring(0, 150) + '...';\n\n        const link = document.createElement('a');\n        link.href = b.url;\n        link.target = '_blank';\n        link.style.cssText = 'color: var(--primary-color); font-size: 12px; text-decoration: none;';\n        link.textContent = 'View tweet \u2192';\n\n        item.appendChild(author);\n        item.appendChild(text);\n        item.appendChild(link);\n        dialogContent.appendChild(item);\n      });\n    }\n\n    const closeBtn = document.createElement('button');\n    closeBtn.textContent = 'Close';\n    closeBtn.style.cssText = 'width: 100%; padding: 12px; margin-top: 16px; border: 1px solid var(--border-color); background: transparent; color: var(--text-color); border-radius: 4px; cursor: pointer;';\n    closeBtn.addEventListener('click', () => document.body.removeChild(dialog));\n    dialogContent.appendChild(closeBtn);\n\n    dialog.appendChild(dialogContent);\n    document.body.appendChild(dialog);\n  };\n\n  // FEATURE: Reminder System\n  setReminder = async (bookmarkUrl, reminderDate, message = '') => {\n    const reminder = {\n      id: Date.now().toString(),\n      bookmarkUrl,\n      reminderDate: reminderDate.toISOString(),\n      message,\n      created: new Date().toISOString()\n    };\n\n    this.state.reminders.push(reminder);\n    await this.saveSettings();\n    return reminder;\n  };\n\n  checkReminders = () => {\n    const now = new Date();\n    const dueReminders = this.state.reminders.filter(r => {\n      return new Date(r.reminderDate) <= now;\n    });\n\n    if (dueReminders.length > 0) {\n      dueReminders.forEach(reminder => {\n        const bookmark = this.state.lastExtraction?.find(b => b.url === reminder.bookmarkUrl);\n        if (bookmark) {\n          this.updateStatus(`Reminder: ${reminder.message || bookmark.text?.substring(0, 50)}`);\n        }\n      });\n\n      // Remove due reminders\n      this.state.reminders = this.state.reminders.filter(r => {\n        return new Date(r.reminderDate) > now;\n      });\n      this.saveSettings();\n    }\n  };\n\n  // ====== NEW FEATURES v0.11.0 (LOW COMPLEXITY) ======\n\n  // FEATURE: Favorites/Stars\n  toggleFavorite = async (bookmarkUrl) => {\n    if (!this.state.bookmarkMetadata[bookmarkUrl]) {\n      this.state.bookmarkMetadata[bookmarkUrl] = { read: false, notes: '', customTags: [], favorite: false };\n    }\n    this.state.bookmarkMetadata[bookmarkUrl].favorite = !this.state.bookmarkMetadata[bookmarkUrl].favorite;\n    await this.saveSettings();\n    return this.state.bookmarkMetadata[bookmarkUrl].favorite;\n  };\n\n  isFavorite = (bookmarkUrl) => {\n    return this.state.bookmarkMetadata[bookmarkUrl]?.favorite || false;\n  };\n\n  getFavorites = () => {\n    return (this.state.lastExtraction || []).filter(b => this.isFavorite(b.url));\n  };\n\n  // FEATURE: Archive\n  toggleArchive = async (bookmarkUrl) => {\n    if (!this.state.bookmarkMetadata[bookmarkUrl]) {\n      this.state.bookmarkMetadata[bookmarkUrl] = { read: false, notes: '', customTags: [], favorite: false, archived: false };\n    }\n    this.state.bookmarkMetadata[bookmarkUrl].archived = !this.state.bookmarkMetadata[bookmarkUrl].archived;\n    await this.saveSettings();\n    return this.state.bookmarkMetadata[bookmarkUrl].archived;\n  };\n\n  isArchived = (bookmarkUrl) => {\n    return this.state.bookmarkMetadata[bookmarkUrl]?.archived || false;\n  };\n\n  getArchived = () => {\n    return (this.state.lastExtraction || []).filter(b => this.isArchived(b.url));\n  };\n\n  // FEATURE: Bulk Selection\n  toggleBulkSelection = (bookmarkUrl) => {\n    const index = this.state.bulkSelection.indexOf(bookmarkUrl);\n    if (index > -1) {\n      this.state.bulkSelection.splice(index, 1);\n    } else {\n      this.state.bulkSelection.push(bookmarkUrl);\n    }\n  };\n\n  selectAll = () => {\n    const bookmarks = this.state.filteredBookmarks || this.state.lastExtraction || [];\n    this.state.bulkSelection = bookmarks.map(b => b.url);\n  };\n\n  deselectAll = () => {\n    this.state.bulkSelection = [];\n  };\n\n  bulkMarkAsRead = async () => {\n    for (const url of this.state.bulkSelection) {\n      await this.markAsRead(url);\n    }\n    this.updateStatus(`Marked ${this.state.bulkSelection.length} bookmarks as read`);\n  };\n\n  bulkAddToCollection = async (collectionId) => {\n    for (const url of this.state.bulkSelection) {\n      await this.addToCollection(url, collectionId);\n    }\n    this.updateStatus(`Added ${this.state.bulkSelection.length} bookmarks to collection`);\n  };\n\n  bulkDelete = async () => {\n    // Remove selected bookmarks from lastExtraction\n    this.state.lastExtraction = (this.state.lastExtraction || []).filter(b =>\n      !this.state.bulkSelection.includes(b.url)\n    );\n    await chrome.storage.local.set({\n      lastExtraction: {\n        timestamp: Date.now(),\n        bookmarks: this.state.lastExtraction\n      }\n    });\n    this.updateStatus(`Deleted ${this.state.bulkSelection.length} bookmarks`);\n    this.state.bulkSelection = [];\n    this.updateUI();\n    this.updateStatus(`Deleted ${this.state.bulkSelection.length} bookmarks`);\n    this.state.bulkSelection = [];\n    this.updateUI();\n  };\n\n  // FEATURE: Reading Time Estimation\n  estimateReadingTime = (text) => {\n    if (!text) return 0;\n    const wordsPerMinute = 200;\n    const words = text.trim().split(/\\s+/).length;\n    return Math.ceil(words / wordsPerMinute);\n  };\n\n  // FEATURE: Content Type Detection\n  detectContentType = (bookmark) => {\n    const text = bookmark.text || '';\n    const hasLinks = /https?:\\/\\//.test(text);\n    const hasHashtags = /#\\w+/.test(text);\n    const hasMentions = /@\\w+/.test(text);\n    const isThread = text.includes('\uD83E\uDDF5') || text.includes('1/') || text.includes('Thread:');\n    const isQuestion = text.includes('?');\n\n    // Determine content type\n    if (isThread) return 'thread';\n    if (bookmark.replies > 50) return 'discussion';\n    if (hasLinks && text.length < 100) return 'link-share';\n    if (isQuestion) return 'question';\n    if (text.length > 500) return 'long-form';\n    if (hasHashtags) return 'tagged';\n    return 'standard';\n  };\n\n  // FEATURE: Keyboard Shortcuts\n  setupKeyboardShortcuts = () => {\n    document.addEventListener('keydown', (e) => {\n      // Ctrl/Cmd + K - Search\n      if ((e.ctrlKey || e.metaKey) && e.key === 'k') {\n        e.preventDefault();\n        this.elements.searchInput?.focus();\n      }\n      // Ctrl/Cmd + F - Filter\n      if ((e.ctrlKey || e.metaKey) && e.key === 'f') {\n        e.preventDefault();\n        this.showFilterDialog();\n      }\n      // Ctrl/Cmd + S - Sort\n      if ((e.ctrlKey || e.metaKey) && e.key === 's') {\n        e.preventDefault();\n        this.showSortDialog();\n      }\n      // Ctrl/Cmd + E - Export\n      if ((e.ctrlKey || e.metaKey) && e.key === 'e') {\n        e.preventDefault();\n        this.downloadMarkdown();\n      }\n      // Ctrl/Cmd + A - Select All (when not in input)\n      if ((e.ctrlKey || e.metaKey) && e.key === 'a' && e.target.tagName !== 'INPUT' && e.target.tagName !== 'TEXTAREA') {\n        e.preventDefault();\n        this.selectAll();\n        this.updateStatus(`Selected all ${this.state.bulkSelection.length} bookmarks`);\n      }\n      // Escape - Deselect All\n      if (e.key === 'Escape') {\n        this.deselectAll();\n        this.updateStatus('Cleared selection');\n      }\n      // Ctrl/Cmd + Z - Undo\n      if ((e.ctrlKey || e.metaKey) && e.key === 'z' && !e.shiftKey) {\n        e.preventDefault();\n        this.undo();\n      }\n      // Ctrl/Cmd + Shift + Z or Ctrl/Cmd + Y - Redo\n      if (((e.ctrlKey || e.metaKey) && e.shiftKey && e.key === 'z') || ((e.ctrlKey || e.metaKey) && e.key === 'y')) {\n        e.preventDefault();\n        this.redo();\n      }\n    });\n  };\n\n  // FEATURE: Author Frequency Analytics\n  getAuthorAnalytics = () => {\n    const authorStats = {};\n    (this.state.lastExtraction || []).forEach(bookmark => {\n      const username = bookmark.username || 'unknown';\n      if (!authorStats[username]) {\n        authorStats[username] = {\n          count: 0,\n          totalLikes: 0,\n          totalRetweets: 0,\n          displayName: bookmark.displayName || username,\n          bookmarks: []\n        };\n      }\n      authorStats[username].count++;\n      authorStats[username].totalLikes += parseInt(bookmark.likes || 0);\n      authorStats[username].totalRetweets += parseInt(bookmark.retweets || 0);\n      authorStats[username].bookmarks.push(bookmark);\n    });\n\n    return Object.entries(authorStats)\n      .map(([username, stats]) => ({\n        username,\n        ...stats,\n        avgLikes: Math.round(stats.totalLikes / stats.count),\n        avgRetweets: Math.round(stats.totalRetweets / stats.count)\n      }))\n      .sort((a, b) => b.count - a.count);\n  };\n\n  showAuthorAnalytics = () => {\n    const authors = this.getAuthorAnalytics();\n\n    const dialog = document.createElement('div');\n    dialog.setAttribute('role', 'dialog');\n    dialog.setAttribute('aria-modal', 'true');\n    dialog.style.cssText = `\n      position: fixed; top: 0; left: 0; right: 0; bottom: 0;\n      background: rgba(0, 0, 0, 0.7); display: flex;\n      align-items: center; justify-content: center; z-index: 1000;\n    `;\n\n    const dialogContent = document.createElement('div');\n    dialogContent.style.cssText = `\n      background: var(--bg-color); padding: 24px; border-radius: 8px;\n      max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto;\n    `;\n\n    const title = document.createElement('h2');\n    title.style.cssText = 'margin-top: 0; color: var(--text-color);';\n    title.textContent = 'Author Analytics';\n    dialogContent.appendChild(title);\n\n    authors.slice(0, 20).forEach((author, index) => {\n      const item = document.createElement('div');\n      item.style.cssText = `\n        padding: 12px; margin-bottom: 8px; background: var(--hover-color);\n        border-radius: 6px; border-left: 4px solid var(--primary-color);\n      `;\n\n      const header = document.createElement('div');\n      header.style.cssText = 'display: flex; justify-content: space-between; margin-bottom: 8px;';\n\n      const name = document.createElement('div');\n      name.style.cssText = 'color: var(--text-color); font-weight: 600;';\n      name.textContent = `${index + 1}. ${author.displayName} (@${author.username})`;\n\n      const count = document.createElement('div');\n      count.style.cssText = 'color: var(--primary-color); font-weight: 600;';\n      count.textContent = `${author.count} bookmarks`;\n\n      header.appendChild(name);\n      header.appendChild(count);\n\n      const stats = document.createElement('div');\n      stats.style.cssText = 'color: var(--disabled-color); font-size: 13px;';\n      stats.textContent = `Avg: ${author.avgLikes} likes \u2022 ${author.avgRetweets} retweets`;\n\n      item.appendChild(header);\n      item.appendChild(stats);\n      dialogContent.appendChild(item);\n    });\n\n    const closeBtn = document.createElement('button');\n    closeBtn.textContent = 'Close';\n    closeBtn.style.cssText = 'width: 100%; padding: 12px; margin-top: 16px; border: 1px solid var(--border-color); background: transparent; color: var(--text-color); border-radius: 4px; cursor: pointer;';\n    closeBtn.addEventListener('click', () => document.body.removeChild(dialog));\n    dialogContent.appendChild(closeBtn);\n\n    dialog.appendChild(dialogContent);\n    document.body.appendChild(dialog);\n  };\n\n  // FEATURE: Undo/Redo System\n  saveState = (action) => {\n    this.state.undoStack.push({\n      action,\n      timestamp: Date.now(),\n      data: JSON.stringify({\n        lastExtraction: this.state.lastExtraction,\n        bookmarkMetadata: this.state.bookmarkMetadata\n      })\n    });\n    // Keep only last 20 states\n    if (this.state.undoStack.length > 20) {\n      this.state.undoStack.shift();\n    }\n    this.state.redoStack = []; // Clear redo stack on new action\n  };\n\n  undo = () => {\n    if (this.state.undoStack.length === 0) {\n      this.updateStatus('Nothing to undo');\n      return;\n    }\n\n    // Save current state to redo stack\n    this.state.redoStack.push({\n      action: 'redo point',\n      timestamp: Date.now(),\n      data: JSON.stringify({\n        lastExtraction: this.state.lastExtraction,\n        bookmarkMetadata: this.state.bookmarkMetadata\n      })\n    });\n\n    const previousState = this.state.undoStack.pop();\n    const restored = JSON.parse(previousState.data);\n    this.state.lastExtraction = restored.lastExtraction;\n    this.state.bookmarkMetadata = restored.bookmarkMetadata;\n\n    this.updateStatus(`Undone: ${previousState.action}`);\n    this.updateUI();\n  };\n\n  redo = () => {\n    if (this.state.redoStack.length === 0) {\n      this.updateStatus('Nothing to redo');\n      return;\n    }\n\n    const nextState = this.state.redoStack.pop();\n    const restored = JSON.parse(nextState.data);\n    this.state.lastExtraction = restored.lastExtraction;\n    this.state.bookmarkMetadata = restored.bookmarkMetadata;\n\n    this.updateStatus('Redone action');\n    this.updateUI();\n  };\n\n  // FEATURE: Hidden Gems Finder\n  findHiddenGems = () => {\n    if (!this.state.lastExtraction || this.state.lastExtraction.length === 0) {\n      return [];\n    }\n\n    // Define \"hidden gems\" as low engagement but potentially valuable content\n    const avgLikes = this.state.lastExtraction.reduce((sum, b) => sum + (parseInt(b.likes) || 0), 0) / this.state.lastExtraction.length;\n\n    return this.state.lastExtraction\n      .filter(b => {\n        const likes = parseInt(b.likes) || 0;\n        const hasLinks = /https?:\\/\\//.test(b.text || '');\n        const isLongForm = (b.text || '').length > 400;\n        const readingTime = this.estimateReadingTime(b.text);\n\n        // Low engagement but quality indicators\n        return likes < avgLikes * 0.5 && (hasLinks || isLongForm || readingTime >= 2);\n      })\n      .slice(0, 20);\n  };\n\n  showHiddenGems = () => {\n    const gems = this.findHiddenGems();\n\n    const dialog = document.createElement('div');\n    dialog.setAttribute('role', 'dialog');\n    dialog.setAttribute('aria-modal', 'true');\n    dialog.style.cssText = `\n      position: fixed; top: 0; left: 0; right: 0; bottom: 0;\n      background: rgba(0, 0, 0, 0.7); display: flex;\n      align-items: center; justify-content: center; z-index: 1000;\n    `;\n\n    const dialogContent = document.createElement('div');\n    dialogContent.style.cssText = `\n      background: var(--bg-color); padding: 24px; border-radius: 8px;\n      max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto;\n    `;\n\n    const title = document.createElement('h2');\n    title.style.cssText = 'margin-top: 0; color: var(--text-color);';\n    title.textContent = '\uD83D\uDC8E Hidden Gems';\n    dialogContent.appendChild(title);\n\n    const info = document.createElement('p');\n    info.style.cssText = 'color: var(--disabled-color); font-size: 13px; margin-bottom: 16px;';\n    info.textContent = 'Quality bookmarks with lower engagement that you might have missed.';\n    dialogContent.appendChild(info);\n\n    if (gems.length === 0) {\n      const emptyMsg = document.createElement('p');\n      emptyMsg.style.cssText = 'color: var(--disabled-color); text-align: center; padding: 20px;';\n      emptyMsg.textContent = 'No hidden gems found';\n      dialogContent.appendChild(emptyMsg);\n    } else {\n      gems.forEach(gem => {\n        const item = document.createElement('div');\n        item.style.cssText = `\n          padding: 12px; margin-bottom: 12px; background: var(--hover-color);\n          border-radius: 6px; border-left: 4px solid #FFD700;\n        `;\n\n        const author = document.createElement('div');\n        author.style.cssText = 'color: var(--text-color); font-weight: 600; margin-bottom: 4px;';\n        author.textContent = `@${gem.username}`;\n\n        const text = document.createElement('div');\n        text.style.cssText = 'color: var(--text-color); font-size: 13px; margin-bottom: 8px;';\n        text.textContent = gem.text?.substring(0, 200) + '...';\n\n        const meta = document.createElement('div');\n        meta.style.cssText = 'color: var(--disabled-color); font-size: 12px;';\n        meta.textContent = `\uD83D\uDCD6 ${this.estimateReadingTime(gem.text)} min read \u2022 ${gem.likes || 0} likes`;\n\n        const link = document.createElement('a');\n        link.href = gem.url;\n        link.target = '_blank';\n        link.style.cssText = 'color: var(--primary-color); font-size: 12px; text-decoration: none; display: inline-block; margin-top: 8px;';\n        link.textContent = 'View tweet \u2192';\n\n        item.appendChild(author);\n        item.appendChild(text);\n        item.appendChild(meta);\n        item.appendChild(link);\n        dialogContent.appendChild(item);\n      });\n    }\n\n    const closeBtn = document.createElement('button');\n    closeBtn.textContent = 'Close';\n    closeBtn.style.cssText = 'width: 100%; padding: 12px; margin-top: 16px; border: 1px solid var(--border-color); background: transparent; color: var(--text-color); border-radius: 4px; cursor: pointer;';\n    closeBtn.addEventListener('click', () => document.body.removeChild(dialog));\n    dialogContent.appendChild(closeBtn);\n\n    dialog.appendChild(dialogContent);\n    document.body.appendChild(dialog);\n  };\n\n  // ====== MEDIUM COMPLEXITY FEATURES v0.11.0 ======\n\n  // FEATURE: Reading Queue with Priorities\n  addToReadingQueue = async (bookmarkUrl, priority = 1) => {\n    const existing = this.state.readingQueue.find(item => item.bookmarkUrl === bookmarkUrl);\n    if (existing) {\n      existing.priority = priority;\n    } else {\n      this.state.readingQueue.push({\n        bookmarkUrl,\n        priority,\n        addedDate: new Date().toISOString()\n      });\n    }\n    await this.saveSettings();\n  };\n\n  showReadingQueue = () => {\n    const queue = this.state.readingQueue\n      .sort((a, b) => b.priority - a.priority)\n      .map(item => {\n        const bookmark = this.state.lastExtraction?.find(b => b.url === item.bookmarkUrl);\n        return { ...item, bookmark };\n      })\n      .filter(item => item.bookmark);\n\n    this.updateStatus(`Reading queue: ${queue.length} items`);\n  };\n\n  // FEATURE: Thread Reader/Unroller\n  detectThread = (bookmark) => {\n    const text = bookmark.text || '';\n    const indicators = ['\uD83E\uDDF5', '1/', 'Thread:', 'THREAD:', '\uD83D\uDC47', '1) ', '1. '];\n    return indicators.some(indicator => text.includes(indicator));\n  };\n\n  // FEATURE: Tag Cloud Visualization\n  generateTagCloud = () => {\n    const tagFrequency = {};\n    if (this.state.aiAnalysis && this.state.aiAnalysis.tags) {\n      this.state.aiAnalysis.tags.forEach(tag => {\n        tagFrequency[tag] = (tagFrequency[tag] || 0) + 1;\n      });\n    }\n    Object.values(this.state.bookmarkMetadata).forEach(meta => {\n      if (meta.customTags) {\n        meta.customTags.forEach(tag => {\n          tagFrequency[tag] = (tagFrequency[tag] || 0) + 3;\n        });\n      }\n    });\n    return Object.entries(tagFrequency).sort((a, b) => b[1] - a[1]).slice(0, 50);\n  };\n\n  // ====== HIGH COMPLEXITY FEATURES v0.11.0 ======\n\n  // FEATURE: Engagement Tracking Over Time\n  trackEngagement = async (bookmark) => {\n    if (!this.state.engagementHistory[bookmark.url]) {\n      this.state.engagementHistory[bookmark.url] = [];\n    }\n\n    this.state.engagementHistory[bookmark.url].push({\n      timestamp: new Date().toISOString(),\n      likes: parseInt(bookmark.likes) || 0,\n      retweets: parseInt(bookmark.retweets) || 0,\n      replies: parseInt(bookmark.replies) || 0,\n      views: parseInt(bookmark.views) || 0\n    });\n\n    // Keep only last 30 entries per bookmark\n    if (this.state.engagementHistory[bookmark.url].length > 30) {\n      this.state.engagementHistory[bookmark.url] = this.state.engagementHistory[bookmark.url].slice(-30);\n    }\n\n    await this.saveSettings();\n  };\n\n  trackAllEngagements = async () => {\n    if (!this.state.lastExtraction) return;\n\n    for (const bookmark of this.state.lastExtraction) {\n      await this.trackEngagement(bookmark);\n    }\n\n    this.updateStatus(`Tracked engagement for ${this.state.lastExtraction.length} bookmarks`);\n  };\n\n  getEngagementGrowth = (bookmarkUrl) => {\n    const history = this.state.engagementHistory[bookmarkUrl];\n    if (!history || history.length < 2) return null;\n\n    const first = history[0];\n    const last = history[history.length - 1];\n\n    return {\n      likesGrowth: last.likes - first.likes,\n      retweetsGrowth: last.retweets - first.retweets,\n      repliesGrowth: last.replies - first.replies,\n      viewsGrowth: last.views - first.views,\n      timespan: new Date(last.timestamp) - new Date(first.timestamp)\n    };\n  };\n\n  // FEATURE: Deleted Tweet Detection\n  checkForDeletedTweets = async () => {\n    if (!this.state.lastExtraction) return [];\n\n    const deleted = [];\n    const sampleSize = Math.min(20, this.state.lastExtraction.length);\n\n    // Check a sample of bookmarks (to avoid rate limiting)\n    for (let i = 0; i < sampleSize; i++) {\n      const bookmark = this.state.lastExtraction[i];\n      // In a real implementation, you'd use Twitter API or fetch the URL\n      // For now, we'll just mark bookmarks as potentially deleted based on age\n      const daysOld = (Date.now() - new Date(bookmark.dateTime)) / (1000 * 60 * 60 * 24);\n      if (daysOld > 365) {\n        deleted.push(bookmark);\n      }\n    }\n\n    return deleted;\n  };\n\n  archiveDeletedTweets = async () => {\n    const deleted = await this.checkForDeletedTweets();\n\n    deleted.forEach(bookmark => {\n      if (!this.state.bookmarkMetadata[bookmark.url]) {\n        this.state.bookmarkMetadata[bookmark.url] = {};\n      }\n      this.state.bookmarkMetadata[bookmark.url].archivedContent = {\n        text: bookmark.text,\n        author: bookmark.displayName,\n        username: bookmark.username,\n        dateTime: bookmark.dateTime,\n        archivedAt: new Date().toISOString()\n      };\n    });\n\n    await this.saveSettings();\n    this.updateStatus(`Archived ${deleted.length} potentially deleted tweets`);\n  };\n\n  // ====== END NEW FEATURES v0.11.0 ======\n}\n\n// LLM Provider Base Class\nclass LLMProvider {\n  constructor(constants) {\n    this.constants = constants || {\n      AI_ANALYSIS_LIMIT: 50,\n      AI_MAX_TOKENS: 500,\n      AI_TEMPERATURE: 0.7,\n      MAX_TAGS: 20,\n      MAX_CATEGORIES: 10\n    };\n  }\n\n  prepareBookmarkTexts(bookmarks) {\n    return bookmarks\n      .filter(b => b.text && b.text.trim())\n      .slice(0, this.constants.AI_ANALYSIS_LIMIT)\n      .map(b => `@${b.username}: ${b.text}`)\n      .join('\\n\\n');\n  }\n\n  parseJSONResponse(content) {\n    let analysis = null;\n\n    // Strategy 1: Try parsing entire content as JSON\n    try {\n      analysis = JSON.parse(content);\n      return analysis;\n    } catch (e) {\n      // Strategy 2: Extract JSON from markdown code blocks\n      const codeBlockMatch = content.match(/```(?:json)?\\s*(\\{[\\s\\S]*?\\})\\s*```/);\n      if (codeBlockMatch) {\n        try {\n          analysis = JSON.parse(codeBlockMatch[1]);\n          return analysis;\n        } catch (e2) {\n          // Continue to next strategy\n        }\n      }\n\n      // Strategy 3: Find first JSON object in content\n      const jsonMatch = content.match(/\\{[\\s\\S]*\\}/);\n      if (jsonMatch) {\n        try {\n          analysis = JSON.parse(jsonMatch[0]);\n          return analysis;\n        } catch (e3) {\n          throw new Error('Failed to parse response as JSON');\n        }\n      } else {\n        throw new Error('No JSON found in response');\n      }\n    }\n  }\n\n  validateAnalysis(analysis) {\n    if (!analysis || typeof analysis !== 'object') {\n      throw new Error('Analysis is not a valid object');\n    }\n\n    const validatedAnalysis = {\n      overallSummary: typeof analysis.overallSummary === 'string' ? analysis.overallSummary : '',\n      tags: Array.isArray(analysis.tags) ? analysis.tags.filter(t => typeof t === 'string').slice(0, this.constants.MAX_TAGS) : [],\n      categories: Array.isArray(analysis.categories) ? analysis.categories.filter(c => typeof c === 'string').slice(0, this.constants.MAX_CATEGORIES) : [],\n      timestamp: Date.now()\n    };\n\n    if (!validatedAnalysis.overallSummary && validatedAnalysis.tags.length === 0 && validatedAnalysis.categories.length === 0) {\n      throw new Error('Response contained no useful analysis data');\n    }\n\n    return validatedAnalysis;\n  }\n\n  async analyzeBookmarks(bookmarks) {\n    throw new Error('analyzeBookmarks must be implemented by subclass');\n  }\n}\n\n// OpenAI Provider\nclass OpenAIProvider extends LLMProvider {\n  constructor(apiKey, constants) {\n    super(constants);\n    this.apiKey = apiKey;\n    this.apiUrl = 'https://api.openai.com/v1/chat/completions';\n    this.model = 'gpt-3.5-turbo';\n  }\n\n  async analyzeBookmarks(bookmarks) {\n    const bookmarkTexts = this.prepareBookmarkTexts(bookmarks);\n\n    if (!bookmarkTexts) {\n      throw new Error('No bookmark content to analyze');\n    }\n\n    const prompt = `Analyze these Twitter/X bookmarks and provide:\n1. An overall summary (2-3 sentences) of the main themes\n2. A list of 5-10 relevant tags/keywords\n3. 3-5 main categories these bookmarks fall into\n\nBookmarks:\n${bookmarkTexts}\n\nRespond in JSON format:\n{\n  \"overallSummary\": \"...\",\n  \"tags\": [\"tag1\", \"tag2\", ...],\n  \"categories\": [\"category1\", \"category2\", ...]\n}`;\n\n    try {\n      const response = await fetch(this.apiUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${this.apiKey}`\n        },\n        body: JSON.stringify({\n          model: this.model,\n          messages: [\n            {\n              role: 'system',\n              content: 'You are a helpful assistant that analyzes social media content and provides structured summaries.'\n            },\n            {\n              role: 'user',\n              content: prompt\n            }\n          ],\n          temperature: this.constants.AI_TEMPERATURE,\n          max_tokens: this.constants.AI_MAX_TOKENS\n        })\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.error?.message || `API error: ${response.status}`);\n      }\n\n      const data = await response.json();\n\n      if (!data.choices || !Array.isArray(data.choices) || data.choices.length === 0) {\n        throw new Error('Invalid API response structure');\n      }\n\n      if (!data.choices[0].message || !data.choices[0].message.content) {\n        throw new Error('Missing content in API response');\n      }\n\n      const content = data.choices[0].message.content;\n      const analysis = this.parseJSONResponse(content);\n      return this.validateAnalysis(analysis);\n    } catch (error) {\n      console.error('OpenAI Analysis error:', error);\n      throw error;\n    }\n  }\n}\n\n// Anthropic Provider\nclass AnthropicProvider extends LLMProvider {\n  constructor(apiKey, constants) {\n    super(constants);\n    this.apiKey = apiKey;\n    this.apiUrl = 'https://api.anthropic.com/v1/messages';\n    this.model = 'claude-3-5-sonnet-20241022';\n  }\n\n  async analyzeBookmarks(bookmarks) {\n    const bookmarkTexts = this.prepareBookmarkTexts(bookmarks);\n\n    if (!bookmarkTexts) {\n      throw new Error('No bookmark content to analyze');\n    }\n\n    const prompt = `Analyze these Twitter/X bookmarks and provide:\n1. An overall summary (2-3 sentences) of the main themes\n2. A list of 5-10 relevant tags/keywords\n3. 3-5 main categories these bookmarks fall into\n\nBookmarks:\n${bookmarkTexts}\n\nRespond in JSON format:\n{\n  \"overallSummary\": \"...\",\n  \"tags\": [\"tag1\", \"tag2\", ...],\n  \"categories\": [\"category1\", \"category2\", ...]\n}`;\n\n    try {\n      const response = await fetch(this.apiUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'x-api-key': this.apiKey,\n          'anthropic-version': '2023-06-01'\n        },\n        body: JSON.stringify({\n          model: this.model,\n          max_tokens: this.constants.AI_MAX_TOKENS,\n          messages: [\n            {\n              role: 'user',\n              content: prompt\n            }\n          ]\n        })\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.error?.message || `API error: ${response.status}`);\n      }\n\n      const data = await response.json();\n\n      if (!data.content || !Array.isArray(data.content) || data.content.length === 0) {\n        throw new Error('Invalid API response structure');\n      }\n\n      const content = data.content[0].text;\n      const analysis = this.parseJSONResponse(content);\n      return this.validateAnalysis(analysis);\n    } catch (error) {\n      console.error('Anthropic Analysis error:', error);\n      throw error;\n    }\n  }\n}\n\n// Gemini Provider\nclass GeminiProvider extends LLMProvider {\n  constructor(apiKey, constants) {\n    super(constants);\n    this.apiKey = apiKey;\n    this.apiUrl = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent';\n  }\n\n  async analyzeBookmarks(bookmarks) {\n    const bookmarkTexts = this.prepareBookmarkTexts(bookmarks);\n\n    if (!bookmarkTexts) {\n      throw new Error('No bookmark content to analyze');\n    }\n\n    const prompt = `Analyze these Twitter/X bookmarks and provide:\n1. An overall summary (2-3 sentences) of the main themes\n2. A list of 5-10 relevant tags/keywords\n3. 3-5 main categories these bookmarks fall into\n\nBookmarks:\n${bookmarkTexts}\n\nRespond in JSON format:\n{\n  \"overallSummary\": \"...\",\n  \"tags\": [\"tag1\", \"tag2\", ...],\n  \"categories\": [\"category1\", \"category2\", ...]\n}`;\n\n    try {\n      const response = await fetch(`${this.apiUrl}?key=${this.apiKey}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          contents: [{\n            parts: [{\n              text: prompt\n            }]\n          }],\n          generationConfig: {\n            temperature: this.constants.AI_TEMPERATURE,\n            maxOutputTokens: this.constants.AI_MAX_TOKENS,\n            responseMimeType: \"application/json\"\n          }\n        })\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.error?.message || `API error: ${response.status}`);\n      }\n\n      const data = await response.json();\n\n      if (!data.candidates || data.candidates.length === 0) {\n        throw new Error('Invalid API response structure');\n      }\n\n      const content = data.candidates[0].content.parts[0].text;\n      const analysis = this.parseJSONResponse(content);\n      return this.validateAnalysis(analysis);\n    } catch (error) {\n      console.error('Gemini Analysis error:', error);\n      throw error;\n    }\n  }\n}\n\n// LLM-Free Provider (Basic Analysis)\nclass LLMFreeProvider extends LLMProvider {\n  constructor(constants) {\n    super(constants);\n  }\n\n  async analyzeBookmarks(bookmarks) {\n    // Perform basic text analysis without external LLM\n    if (!bookmarks || bookmarks.length === 0) {\n      throw new Error('No bookmark content to analyze');\n    }\n\n    // Extract common words for tags\n    const wordFrequency = {};\n    const authorFrequency = {};\n    const allText = [];\n\n    bookmarks.forEach(b => {\n      if (b.text) {\n        allText.push(b.text.toLowerCase());\n        // Extract words (simple tokenization)\n        const words = b.text.toLowerCase()\n          .replace(/[^\\w\\s#@]/g, ' ')\n          .split(/\\s+/)\n          .filter(w => w.length > 3 && !this.isStopWord(w));\n\n        words.forEach(word => {\n          wordFrequency[word] = (wordFrequency[word] || 0) + 1;\n        });\n      }\n\n      if (b.username) {\n        authorFrequency[b.username] = (authorFrequency[b.username] || 0) + 1;\n      }\n    });\n\n    // Get top tags (most frequent words)\n    const tags = Object.entries(wordFrequency)\n      .sort((a, b) => b[1] - a[1])\n      .slice(0, 10)\n      .map(([word]) => word);\n\n    // Detect categories based on keywords\n    const categories = this.detectCategories(allText.join(' '));\n\n    // Generate basic summary\n    const topAuthor = Object.entries(authorFrequency)\n      .sort((a, b) => b[1] - a[1])[0];\n\n    const summary = `This collection contains ${bookmarks.length} bookmarks. ` +\n      `Most frequently bookmarked author: @${topAuthor ? topAuthor[0] : 'N/A'}. ` +\n      `Common topics include: ${tags.slice(0, 3).join(', ')}.`;\n\n    return {\n      overallSummary: summary,\n      tags: tags,\n      categories: categories,\n      timestamp: Date.now()\n    };\n  }\n\n  isStopWord(word) {\n    const stopWords = ['that', 'this', 'with', 'from', 'have', 'will', 'your', 'they', 'been', 'more', 'when', 'there', 'their', 'would', 'about', 'which', 'these', 'https'];\n    return stopWords.includes(word);\n  }\n\n  detectCategories(text) {\n    const categories = [];\n    const lowerText = text.toLowerCase();\n\n    const categoryKeywords = {\n      'Technology': ['tech', 'software', 'code', 'programming', 'developer', 'ai', 'data', 'cloud', 'api'],\n      'Business': ['business', 'startup', 'entrepreneur', 'market', 'company', 'revenue', 'growth'],\n      'News & Politics': ['news', 'political', 'government', 'election', 'policy', 'breaking'],\n      'Science': ['science', 'research', 'study', 'paper', 'scientific', 'discovery'],\n      'Entertainment': ['movie', 'music', 'game', 'entertainment', 'show', 'video'],\n      'Sports': ['sport', 'team', 'player', 'game', 'match', 'football', 'basketball'],\n      'Education': ['learn', 'education', 'course', 'tutorial', 'teaching', 'university'],\n      'Health': ['health', 'medical', 'wellness', 'fitness', 'mental', 'exercise']\n    };\n\n    for (const [category, keywords] of Object.entries(categoryKeywords)) {\n      const matches = keywords.filter(keyword => lowerText.includes(keyword)).length;\n      if (matches >= 2) {\n        categories.push(category);\n      }\n    }\n\n    if (categories.length === 0) {\n      categories.push('General');\n    }\n\n    return categories.slice(0, 5);\n  }\n\n  // ============================================\n  // NEW v0.12.0: ENHANCED AUTHORS DASHBOARD\n  // ============================================\n\n  getAuthorsDashboardData = () => {\n    const authorStats = {};\n\n    // Get all bookmarks (native + manual)\n    const allBookmarks = this.state.lastExtraction || [];\n\n    allBookmarks.forEach(bookmark => {\n      const username = bookmark.username || 'unknown';\n      if (!authorStats[username]) {\n        authorStats[username] = {\n          count: 0,\n          totalLikes: 0,\n          totalRetweets: 0,\n          totalReplies: 0,\n          totalViews: 0,\n          displayName: bookmark.displayName || username,\n          bookmarks: [],\n          topics: new Map()\n        };\n      }\n\n      authorStats[username].count++;\n      authorStats[username].totalLikes += parseInt(bookmark.likes || 0);\n      authorStats[username].totalRetweets += parseInt(bookmark.retweets || 0);\n      authorStats[username].totalReplies += parseInt(bookmark.replies || 0);\n      authorStats[username].totalViews += parseInt(bookmark.views || 0);\n      authorStats[username].bookmarks.push(bookmark);\n\n      // Extract topics from tweet text\n      const topics = this.extractTopicsFromText(bookmark.text);\n      topics.forEach(topic => {\n        const current = authorStats[username].topics.get(topic) || 0;\n        authorStats[username].topics.set(topic, current + 1);\n      });\n    });\n\n    return Object.entries(authorStats)\n      .map(([username, stats]) => ({\n        username,\n        ...stats,\n        avgLikes: Math.round(stats.totalLikes / stats.count),\n        avgRetweets: Math.round(stats.totalRetweets / stats.count),\n        avgReplies: Math.round(stats.totalReplies / stats.count),\n        avgViews: Math.round(stats.totalViews / stats.count),\n        topTopics: Array.from(stats.topics.entries())\n          .sort((a, b) => b[1] - a[1])\n          .slice(0, 5)\n          .map(([topic]) => topic)\n      }))\n      .sort((a, b) => b.count - a.count);\n  };\n\n  extractTopicsFromText = (text) => {\n    if (!text) return [];\n\n    const words = text.toLowerCase()\n      .replace(/[^\\w\\s#]/g, ' ')\n      .split(/\\s+/)\n      .filter(word => word.length > 3 && !this.isStopWord(word));\n\n    // Get hashtags\n    const hashtags = text.match(/#\\w+/g) || [];\n    const hashtagWords = hashtags.map(tag => tag.substring(1).toLowerCase());\n\n    // Combine and count\n    const wordCounts = {};\n    [...words, ...hashtagWords].forEach(word => {\n      wordCounts[word] = (wordCounts[word] || 0) + 1;\n    });\n\n    // Return top words\n    return Object.entries(wordCounts)\n      .sort((a, b) => b[1] - a[1])\n      .slice(0, 10)\n      .map(([word]) => word);\n  };\n\n  showAuthorsDashboard = async () => {\n    // Load manual bookmarks and combine with existing\n    const storage = await chrome.storage.local.get('manualBookmarks');\n    const manualBookmarks = storage.manualBookmarks || [];\n\n    // Temporarily combine bookmarks for analysis\n    const originalExtraction = this.state.lastExtraction;\n    this.state.lastExtraction = [\n      ...(originalExtraction || []),\n      ...manualBookmarks\n    ];\n\n    const authors = this.getAuthorsDashboardData();\n\n    // Restore original state\n    this.state.lastExtraction = originalExtraction;\n\n    if (authors.length === 0) {\n      this.updateStatus('No bookmarks found. Extract bookmarks first.');\n      return;\n    }\n\n    // Create dialog\n    const dialog = document.createElement('div');\n    dialog.setAttribute('role', 'dialog');\n    dialog.setAttribute('aria-modal', 'true');\n    dialog.style.cssText = `\n      position: fixed; top: 0; left: 0; right: 0; bottom: 0;\n      background: rgba(0, 0, 0, 0.8); display: flex;\n      align-items: center; justify-content: center; z-index: 1000;\n    `;\n\n    const dialogContent = document.createElement('div');\n    dialogContent.style.cssText = `\n      background: var(--bg-color); padding: 24px; border-radius: 12px;\n      max-width: 800px; width: 95%; max-height: 85vh; overflow-y: auto;\n      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n    `;\n\n    // Header\n    const header = document.createElement('div');\n    header.style.cssText = 'margin-bottom: 20px; border-bottom: 2px solid var(--border-color); padding-bottom: 16px;';\n    header.innerHTML = `\n      <h2 style=\"margin: 0 0 8px 0; color: var(--text-color); font-size: 24px;\">\n        \uD83D\uDC65 Authors Dashboard\n      </h2>\n      <p style=\"margin: 0; color: var(--disabled-color); font-size: 14px;\">\n        Discover who you bookmark most and what topics they cover\n      </p>\n    `;\n    dialogContent.appendChild(header);\n\n    // Sort controls\n    const sortControls = document.createElement('div');\n    sortControls.style.cssText = 'margin-bottom: 20px; display: flex; gap: 8px; flex-wrap: wrap;';\n    sortControls.innerHTML = `\n      <button class=\"author-sort-btn\" data-sort=\"count\" style=\"padding: 8px 16px; background: var(--primary-color); color: white; border: none; border-radius: 20px; cursor: pointer; font-size: 13px; font-weight: 600;\">\n        Most Bookmarks\n      </button>\n      <button class=\"author-sort-btn\" data-sort=\"engagement\" style=\"padding: 8px 16px; background: var(--hover-color); color: var(--text-color); border: none; border-radius: 20px; cursor: pointer; font-size: 13px;\">\n        Highest Engagement\n      </button>\n      <button class=\"author-sort-btn\" data-sort=\"recent\" style=\"padding: 8px 16px; background: var(--hover-color); color: var(--text-color); border: none; border-radius: 20px; cursor: pointer; font-size: 13px;\">\n        Most Recent\n      </button>\n    `;\n    dialogContent.appendChild(sortControls);\n\n    // Authors list container\n    const authorsContainer = document.createElement('div');\n    authorsContainer.id = 'authors-list-container';\n    dialogContent.appendChild(authorsContainer);\n\n    const renderAuthors = (sortBy = 'count') => {\n      let sortedAuthors = [...authors];\n\n      if (sortBy === 'engagement') {\n        sortedAuthors.sort((a, b) => (b.avgLikes + b.avgRetweets) - (a.avgLikes + a.avgRetweets));\n      } else if (sortBy === 'recent') {\n        sortedAuthors.sort((a, b) => {\n          const aLatest = Math.max(...a.bookmarks.map(bm => new Date(bm.dateTime || 0).getTime()));\n          const bLatest = Math.max(...b.bookmarks.map(bm => new Date(bm.dateTime || 0).getTime()));\n          return bLatest - aLatest;\n        });\n      }\n\n      authorsContainer.innerHTML = '';\n\n      sortedAuthors.forEach((author, index) => {\n        const item = document.createElement('div');\n        item.style.cssText = `\n          padding: 16px; margin-bottom: 12px;\n          background: var(--hover-color);\n          border-radius: 8px;\n          border-left: 4px solid var(--primary-color);\n          transition: transform 0.2s;\n          cursor: pointer;\n        `;\n\n        item.addEventListener('mouseenter', () => {\n          item.style.transform = 'translateX(4px)';\n        });\n\n        item.addEventListener('mouseleave', () => {\n          item.style.transform = 'translateX(0)';\n        });\n\n        const headerRow = document.createElement('div');\n        headerRow.style.cssText = 'display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;';\n\n        const nameSection = document.createElement('div');\n        nameSection.innerHTML = `\n          <div style=\"color: var(--text-color); font-weight: 700; font-size: 16px; margin-bottom: 4px;\">\n            ${index + 1}. ${author.displayName}\n          </div>\n          <div style=\"color: var(--disabled-color); font-size: 13px;\">\n            @${author.username}\n          </div>\n        `;\n\n        const countBadge = document.createElement('div');\n        countBadge.style.cssText = `\n          background: var(--primary-color);\n          color: white;\n          padding: 6px 12px;\n          border-radius: 20px;\n          font-weight: 700;\n          font-size: 14px;\n        `;\n        countBadge.textContent = `${author.count} bookmarks`;\n\n        headerRow.appendChild(nameSection);\n        headerRow.appendChild(countBadge);\n\n        const statsRow = document.createElement('div');\n        statsRow.style.cssText = 'display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin-bottom: 12px;';\n        statsRow.innerHTML = `\n          <div style=\"text-align: center; padding: 8px; background: var(--bg-color); border-radius: 6px;\">\n            <div style=\"color: var(--disabled-color); font-size: 11px; margin-bottom: 4px;\">AVG LIKES</div>\n            <div style=\"color: var(--text-color); font-weight: 600; font-size: 15px;\">${author.avgLikes.toLocaleString()}</div>\n          </div>\n          <div style=\"text-align: center; padding: 8px; background: var(--bg-color); border-radius: 6px;\">\n            <div style=\"color: var(--disabled-color); font-size: 11px; margin-bottom: 4px;\">AVG RTs</div>\n            <div style=\"color: var(--text-color); font-weight: 600; font-size: 15px;\">${author.avgRetweets.toLocaleString()}</div>\n          </div>\n          <div style=\"text-align: center; padding: 8px; background: var(--bg-color); border-radius: 6px;\">\n            <div style=\"color: var(--disabled-color); font-size: 11px; margin-bottom: 4px;\">AVG REPLIES</div>\n            <div style=\"color: var(--text-color); font-weight: 600; font-size: 15px;\">${author.avgReplies.toLocaleString()}</div>\n          </div>\n          <div style=\"text-align: center; padding: 8px; background: var(--bg-color); border-radius: 6px;\">\n            <div style=\"color: var(--disabled-color); font-size: 11px; margin-bottom: 4px;\">AVG VIEWS</div>\n            <div style=\"color: var(--text-color); font-weight: 600; font-size: 15px;\">${author.avgViews.toLocaleString()}</div>\n          </div>\n        `;\n\n        const topicsRow = document.createElement('div');\n        topicsRow.style.cssText = 'margin-top: 12px;';\n        topicsRow.innerHTML = `\n          <div style=\"color: var(--disabled-color); font-size: 11px; margin-bottom: 6px; font-weight: 600;\">TOP TOPICS</div>\n          <div style=\"display: flex; gap: 6px; flex-wrap: wrap;\">\n            ${author.topTopics.map(topic => `\n              <span style=\"\n                background: var(--primary-color);\n                color: white;\n                padding: 4px 10px;\n                border-radius: 12px;\n                font-size: 12px;\n                font-weight: 500;\n              \">${topic}</span>\n            `).join('')}\n          </div>\n        `;\n\n        item.appendChild(headerRow);\n        item.appendChild(statsRow);\n        item.appendChild(topicsRow);\n\n        // Click to filter by author\n        item.addEventListener('click', () => {\n          this.state.filterOptions.author = author.username;\n          this.applyFilters();\n          document.body.removeChild(dialog);\n          this.updateStatus(`Filtered by author: @${author.username}`);\n        });\n\n        authorsContainer.appendChild(item);\n      });\n    };\n\n    // Initial render\n    renderAuthors('count');\n\n    // Sort button handlers\n    sortControls.querySelectorAll('.author-sort-btn').forEach(btn => {\n      btn.addEventListener('click', (e) => {\n        // Update button styles\n        sortControls.querySelectorAll('.author-sort-btn').forEach(b => {\n          b.style.background = 'var(--hover-color)';\n          b.style.color = 'var(--text-color)';\n        });\n        e.target.style.background = 'var(--primary-color)';\n        e.target.style.color = 'white';\n\n        // Re-render with new sort\n        renderAuthors(e.target.dataset.sort);\n      });\n    });\n\n    // Close button\n    const closeBtn = document.createElement('button');\n    closeBtn.textContent = 'Close';\n    closeBtn.style.cssText = `\n      width: 100%; padding: 14px; margin-top: 20px;\n      border: 1px solid var(--border-color);\n      background: transparent;\n      color: var(--text-color);\n      border-radius: 8px;\n      cursor: pointer;\n      font-weight: 600;\n      font-size: 14px;\n    `;\n    closeBtn.addEventListener('click', () => document.body.removeChild(dialog));\n    closeBtn.addEventListener('mouseenter', () => {\n      closeBtn.style.background = 'var(--hover-color)';\n    });\n    closeBtn.addEventListener('mouseleave', () => {\n      closeBtn.style.background = 'transparent';\n    });\n    dialogContent.appendChild(closeBtn);\n\n    dialog.appendChild(dialogContent);\n    document.body.appendChild(dialog);\n  };\n\n  // ============================================\n  // NEW v0.12.0: MEDIA GALLERY VIEW\n  // ============================================\n\n  extractMediaFromBookmarks = async () => {\n    const storage = await chrome.storage.local.get('manualBookmarks');\n    const manualBookmarks = storage.manualBookmarks || [];\n    const allBookmarks = [\n      ...(this.state.lastExtraction || []),\n      ...manualBookmarks\n    ];\n\n    const mediaBookmarks = [];\n\n    for (const bookmark of allBookmarks) {\n      const mediaUrls = this.extractMediaUrls(bookmark.text, bookmark.url);\n      if (mediaUrls.length > 0) {\n        mediaBookmarks.push({\n          ...bookmark,\n          mediaUrls,\n          mediaTypes: mediaUrls.map(url => this.getMediaType(url))\n        });\n      }\n    }\n\n    return mediaBookmarks;\n  };\n\n  extractMediaUrls = (text, tweetUrl) => {\n    const urls = [];\n\n    // Extract image URLs from text\n    const imgRegex = /https?:\\/\\/[^\\s]+\\.(jpg|jpeg|png|gif|webp)/gi;\n    const imgMatches = text.match(imgRegex) || [];\n    urls.push(...imgMatches);\n\n    // Extract video URLs\n    const videoRegex = /https?:\\/\\/[^\\s]+\\.(mp4|webm|mov)/gi;\n    const videoMatches = text.match(videoRegex) || [];\n    urls.push(...videoMatches);\n\n    // Twitter media URLs (pbs.twimg.com)\n    const twitterMediaRegex = /https?:\\/\\/pbs\\.twimg\\.com\\/media\\/[^\\s]+/gi;\n    const twitterMediaMatches = text.match(twitterMediaRegex) || [];\n    urls.push(...twitterMediaMatches);\n\n    // Add tweet URL as potential media source (X embeds images/videos)\n    if (tweetUrl && urls.length === 0) {\n      // Mark as tweet embed - we'll handle this specially\n      urls.push(tweetUrl + '#embed');\n    }\n\n    return [...new Set(urls)];\n  };\n\n  getMediaType = (url) => {\n    if (url.includes('#embed')) return 'tweet-embed';\n    if (url.match(/\\.(mp4|webm|mov)$/i)) return 'video';\n    if (url.match(/\\.(gif)$/i)) return 'gif';\n    return 'image';\n  };\n\n  showMediaGallery = async () => {\n    const mediaBookmarks = await this.extractMediaFromBookmarks();\n\n    if (mediaBookmarks.length === 0) {\n      this.updateStatus('No media found in bookmarks.');\n      return;\n    }\n\n    // Create dialog\n    const dialog = document.createElement('div');\n    dialog.setAttribute('role', 'dialog');\n    dialog.setAttribute('aria-modal', 'true');\n    dialog.style.cssText = `\n      position: fixed; top: 0; left: 0; right: 0; bottom: 0;\n      background: rgba(0, 0, 0, 0.95); display: flex;\n      align-items: center; justify-content: center; z-index: 1000;\n    `;\n\n    const dialogContent = document.createElement('div');\n    dialogContent.style.cssText = `\n      background: var(--bg-color); padding: 24px; border-radius: 12px;\n      max-width: 1200px; width: 95%; max-height: 90vh; overflow-y: auto;\n    `;\n\n    // Header\n    const header = document.createElement('div');\n    header.style.cssText = 'margin-bottom: 20px; border-bottom: 2px solid var(--border-color); padding-bottom: 16px;';\n    header.innerHTML = `\n      <h2 style=\"margin: 0 0 8px 0; color: var(--text-color); font-size: 24px;\">\n        \uD83C\uDFA8 Media Gallery\n      </h2>\n      <p style=\"margin: 0; color: var(--disabled-color); font-size: 14px;\">\n        ${mediaBookmarks.length} bookmarks with media \u2022 Click any image to view full size\n      </p>\n    `;\n    dialogContent.appendChild(header);\n\n    // Filter controls\n    const filterControls = document.createElement('div');\n    filterControls.style.cssText = 'margin-bottom: 20px; display: flex; gap: 8px; flex-wrap: wrap;';\n    filterControls.innerHTML = `\n      <button class=\"media-filter-btn\" data-filter=\"all\" style=\"padding: 8px 16px; background: var(--primary-color); color: white; border: none; border-radius: 20px; cursor: pointer; font-size: 13px; font-weight: 600;\">\n        All Media\n      </button>\n      <button class=\"media-filter-btn\" data-filter=\"image\" style=\"padding: 8px 16px; background: var(--hover-color); color: var(--text-color); border: none; border-radius: 20px; cursor: pointer; font-size: 13px;\">\n        Images Only\n      </button>\n      <button class=\"media-filter-btn\" data-filter=\"video\" style=\"padding: 8px 16px; background: var(--hover-color); color: var(--text-color); border: none; border-radius: 20px; cursor: pointer; font-size: 13px;\">\n        Videos Only\n      </button>\n      <button class=\"media-filter-btn\" data-filter=\"gif\" style=\"padding: 8px 16px; background: var(--hover-color); color: var(--text-color); border: none; border-radius: 20px; cursor: pointer; font-size: 13px;\">\n        GIFs Only\n      </button>\n    `;\n    dialogContent.appendChild(filterControls);\n\n    // Gallery grid\n    const galleryGrid = document.createElement('div');\n    galleryGrid.id = 'media-gallery-grid';\n    galleryGrid.style.cssText = `\n      display: grid;\n      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\n      gap: 16px;\n      margin-bottom: 20px;\n    `;\n    dialogContent.appendChild(galleryGrid);\n\n    const renderGallery = (filter = 'all') => {\n      galleryGrid.innerHTML = '';\n\n      const filteredBookmarks = filter === 'all'\n        ? mediaBookmarks\n        : mediaBookmarks.filter(bm => bm.mediaTypes.includes(filter));\n\n      filteredBookmarks.forEach(bookmark => {\n        bookmark.mediaUrls.forEach((mediaUrl, idx) => {\n          const mediaType = bookmark.mediaTypes[idx];\n\n          // Skip if filtering\n          if (filter !== 'all' && mediaType !== filter) return;\n\n          const card = document.createElement('div');\n          card.style.cssText = `\n            position: relative;\n            background: var(--hover-color);\n            border-radius: 8px;\n            overflow: hidden;\n            cursor: pointer;\n            transition: transform 0.2s;\n            aspect-ratio: 1;\n          `;\n\n          card.addEventListener('mouseenter', () => {\n            card.style.transform = 'scale(1.05)';\n          });\n\n          card.addEventListener('mouseleave', () => {\n            card.style.transform = 'scale(1)';\n          });\n\n          // Media content\n          if (mediaType === 'tweet-embed') {\n            card.innerHTML = `\n              <div style=\"\n                width: 100%;\n                height: 100%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                background: linear-gradient(135deg, var(--primary-color), #1a8cd8);\n                color: white;\n                font-size: 48px;\n              \">\n                \uD83D\uDC26\n              </div>\n            `;\n          } else if (mediaType === 'video' || mediaType === 'gif') {\n            card.innerHTML = `\n              <div style=\"\n                width: 100%;\n                height: 100%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                background: var(--bg-color);\n                color: var(--text-color);\n                font-size: 48px;\n              \">\n                ${mediaType === 'video' ? '\uD83C\uDFA5' : '\uD83C\uDFAC'}\n              </div>\n            `;\n          } else {\n            card.innerHTML = `\n              <img src=\"${mediaUrl}\" alt=\"Media\" style=\"\n                width: 100%;\n                height: 100%;\n                object-fit: cover;\n              \" onerror=\"this.parentElement.innerHTML = '<div style=\\\\\"display:flex;align-items:center;justify-content:center;height:100%;color:var(--text-color);\\\\\">\u274C</div>'\">\n            `;\n          }\n\n          // Overlay with author info\n          const overlay = document.createElement('div');\n          overlay.style.cssText = `\n            position: absolute;\n            bottom: 0;\n            left: 0;\n            right: 0;\n            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);\n            padding: 12px;\n            color: white;\n            opacity: 0;\n            transition: opacity 0.2s;\n          `;\n          overlay.innerHTML = `\n            <div style=\"font-size: 12px; font-weight: 600;\">@${bookmark.username}</div>\n            <div style=\"font-size: 11px; opacity: 0.8; margin-top: 4px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;\">\n              ${bookmark.text.substring(0, 50)}...\n            </div>\n          `;\n\n          card.addEventListener('mouseenter', () => {\n            overlay.style.opacity = '1';\n          });\n\n          card.addEventListener('mouseleave', () => {\n            overlay.style.opacity = '0';\n          });\n\n          card.appendChild(overlay);\n\n          // Click to open lightbox\n          card.addEventListener('click', () => {\n            this.showMediaLightbox(mediaUrl, mediaType, bookmark);\n          });\n\n          galleryGrid.appendChild(card);\n        });\n      });\n\n      if (filteredBookmarks.length === 0) {\n        galleryGrid.innerHTML = `\n          <div style=\"\n            grid-column: 1 / -1;\n            text-align: center;\n            padding: 40px;\n            color: var(--disabled-color);\n            font-size: 16px;\n          \">\n            No ${filter === 'all' ? '' : filter + ' '}media found\n          </div>\n        `;\n      }\n    };\n\n    // Initial render\n    renderGallery('all');\n\n    // Filter button handlers\n    filterControls.querySelectorAll('.media-filter-btn').forEach(btn => {\n      btn.addEventListener('click', (e) => {\n        // Update button styles\n        filterControls.querySelectorAll('.media-filter-btn').forEach(b => {\n          b.style.background = 'var(--hover-color)';\n          b.style.color = 'var(--text-color)';\n        });\n        e.target.style.background = 'var(--primary-color)';\n        e.target.style.color = 'white';\n\n        // Re-render with filter\n        renderGallery(e.target.dataset.filter);\n      });\n    });\n\n    // Close button\n    const closeBtn = document.createElement('button');\n    closeBtn.textContent = 'Close';\n    closeBtn.style.cssText = `\n      width: 100%; padding: 14px; margin-top: 20px;\n      border: 1px solid var(--border-color);\n      background: transparent;\n      color: var(--text-color);\n      border-radius: 8px;\n      cursor: pointer;\n      font-weight: 600;\n      font-size: 14px;\n    `;\n    closeBtn.addEventListener('click', () => document.body.removeChild(dialog));\n    closeBtn.addEventListener('mouseenter', () => {\n      closeBtn.style.background = 'var(--hover-color)';\n    });\n    closeBtn.addEventListener('mouseleave', () => {\n      closeBtn.style.background = 'transparent';\n    });\n    dialogContent.appendChild(closeBtn);\n\n    dialog.appendChild(dialogContent);\n    document.body.appendChild(dialog);\n  };\n\n  showMediaLightbox = (mediaUrl, mediaType, bookmark) => {\n    const lightbox = document.createElement('div');\n    lightbox.style.cssText = `\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0, 0, 0, 0.95);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      z-index: 2000;\n      padding: 40px;\n    `;\n\n    const content = document.createElement('div');\n    content.style.cssText = `\n      max-width: 90%;\n      max-height: 90%;\n      position: relative;\n    `;\n\n    if (mediaType === 'tweet-embed') {\n      content.innerHTML = `\n        <div style=\"background: white; padding: 40px; border-radius: 12px; text-align: center;\">\n          <p style=\"margin-bottom: 20px; color: #333;\">Open tweet to view embedded media</p>\n          <a href=\"${mediaUrl.replace('#embed', '')}\" target=\"_blank\" style=\"\n            display: inline-block;\n            padding: 12px 24px;\n            background: var(--primary-color);\n            color: white;\n            text-decoration: none;\n            border-radius: 20px;\n            font-weight: 600;\n          \">View Tweet on X</a>\n        </div>\n      `;\n    } else if (mediaType === 'video') {\n      content.innerHTML = `\n        <video src=\"${mediaUrl}\" controls autoplay style=\"max-width: 100%; max-height: 80vh; border-radius: 8px;\">\n        </video>\n      `;\n    } else {\n      content.innerHTML = `\n        <img src=\"${mediaUrl}\" alt=\"Media\" style=\"max-width: 100%; max-height: 80vh; border-radius: 8px;\">\n      `;\n    }\n\n    // Close button\n    const closeBtn = document.createElement('button');\n    closeBtn.textContent = '\u2715';\n    closeBtn.style.cssText = `\n      position: absolute;\n      top: -40px;\n      right: 0;\n      background: rgba(255, 255, 255, 0.2);\n      color: white;\n      border: none;\n      width: 36px;\n      height: 36px;\n      border-radius: 50%;\n      cursor: pointer;\n      font-size: 20px;\n      font-weight: bold;\n    `;\n    closeBtn.addEventListener('click', () => document.body.removeChild(lightbox));\n    content.appendChild(closeBtn);\n\n    // Author info\n    const info = document.createElement('div');\n    info.style.cssText = `\n      margin-top: 16px;\n      color: white;\n      text-align: center;\n    `;\n    info.innerHTML = `\n      <div style=\"font-weight: 600; margin-bottom: 4px;\">@${bookmark.username}</div>\n      <div style=\"font-size: 14px; opacity: 0.8;\">${bookmark.text.substring(0, 150)}${bookmark.text.length > 150 ? '...' : ''}</div>\n      <a href=\"${bookmark.url}\" target=\"_blank\" style=\"\n        display: inline-block;\n        margin-top: 12px;\n        padding: 8px 16px;\n        background: var(--primary-color);\n        color: white;\n        text-decoration: none;\n        border-radius: 20px;\n        font-size: 13px;\n        font-weight: 600;\n      \">View Tweet</a>\n    `;\n    content.appendChild(info);\n\n    lightbox.appendChild(content);\n\n    // Click backdrop to close\n    lightbox.addEventListener('click', (e) => {\n      if (e.target === lightbox) {\n        document.body.removeChild(lightbox);\n      }\n    });\n\n    document.body.appendChild(lightbox);\n  };\n\n  // ============================================\n  // NEW v0.12.0: ARTICLE SUMMARIZATION\n  // ============================================\n\n  showArticleSummaryDialog = async () => {\n    // Check if LLM provider is configured\n    if (this.state.llmProvider === 'none') {\n      this.updateStatus('Please configure an LLM provider in settings first.');\n      this.showSettingsDialog();\n      return;\n    }\n\n    const storage = await chrome.storage.local.get(['manualBookmarks', 'articleSummaries']);\n    const manualBookmarks = storage.manualBookmarks || [];\n    const cachedSummaries = storage.articleSummaries || {};\n\n    const allBookmarks = [\n      ...(this.state.lastExtraction || []),\n      ...manualBookmarks\n    ];\n\n    // Find bookmarks with article links\n    const bookmarksWithLinks = allBookmarks.filter(bm => {\n      const urls = this.extractArticleUrls(bm.text);\n      return urls.length > 0;\n    });\n\n    if (bookmarksWithLinks.length === 0) {\n      this.updateStatus('No bookmarks with article links found.');\n      return;\n    }\n\n    // Create dialog\n    const dialog = document.createElement('div');\n    dialog.setAttribute('role', 'dialog');\n    dialog.setAttribute('aria-modal', 'true');\n    dialog.style.cssText = `\n      position: fixed; top: 0; left: 0; right: 0; bottom: 0;\n      background: rgba(0, 0, 0, 0.8); display: flex;\n      align-items: center; justify-content: center; z-index: 1000;\n    `;\n\n    const dialogContent = document.createElement('div');\n    dialogContent.style.cssText = `\n      background: var(--bg-color); padding: 24px; border-radius: 12px;\n      max-width: 900px; width: 95%; max-height: 85vh; overflow-y: auto;\n    `;\n\n    // Header\n    const header = document.createElement('div');\n    header.style.cssText = 'margin-bottom: 20px; border-bottom: 2px solid var(--border-color); padding-bottom: 16px;';\n    header.innerHTML = `\n      <h2 style=\"margin: 0 0 8px 0; color: var(--text-color); font-size: 24px;\">\n        \uD83D\uDCF0 Article Summaries\n      </h2>\n      <p style=\"margin: 0; color: var(--disabled-color); font-size: 14px;\">\n        ${bookmarksWithLinks.length} bookmarks with article links \u2022 Click \"Summarize\" to generate AI summary\n      </p>\n    `;\n    dialogContent.appendChild(header);\n\n    // Articles list\n    const articlesList = document.createElement('div');\n    articlesList.id = 'articles-list';\n    articlesList.style.cssText = 'margin-bottom: 20px;';\n\n    bookmarksWithLinks.slice(0, 20).forEach((bookmark, index) => {\n      const urls = this.extractArticleUrls(bookmark.text);\n      const articleUrl = urls[0];\n\n      const card = document.createElement('div');\n      card.style.cssText = `\n        padding: 16px;\n        margin-bottom: 12px;\n        background: var(--hover-color);\n        border-radius: 8px;\n        border-left: 4px solid var(--primary-color);\n      `;\n\n      const cardHeader = document.createElement('div');\n      cardHeader.style.cssText = 'display: flex; justify-content: space-between; align-items: start; margin-bottom: 12px;';\n\n      const tweetInfo = document.createElement('div');\n      tweetInfo.style.cssText = 'flex: 1; margin-right: 12px;';\n      tweetInfo.innerHTML = `\n        <div style=\"color: var(--text-color); font-weight: 600; margin-bottom: 4px;\">\n          @${bookmark.username}\n        </div>\n        <div style=\"color: var(--disabled-color); font-size: 13px; margin-bottom: 8px;\">\n          ${bookmark.text.substring(0, 100)}${bookmark.text.length > 100 ? '...' : ''}\n        </div>\n        <a href=\"${articleUrl}\" target=\"_blank\" style=\"\n          color: var(--primary-color);\n          font-size: 12px;\n          text-decoration: none;\n          word-break: break-all;\n        \">${articleUrl.substring(0, 60)}${articleUrl.length > 60 ? '...' : ''}</a>\n      `;\n\n      const actionBtn = document.createElement('button');\n      actionBtn.className = `summarize-btn-${index}`;\n      actionBtn.style.cssText = `\n        padding: 8px 16px;\n        background: var(--primary-color);\n        color: white;\n        border: none;\n        border-radius: 20px;\n        cursor: pointer;\n        font-size: 13px;\n        font-weight: 600;\n        white-space: nowrap;\n      `;\n\n      // Check if we have a cached summary\n      const cacheKey = this.getArticleCacheKey(articleUrl);\n      if (cachedSummaries[cacheKey]) {\n        actionBtn.textContent = 'View Summary';\n        actionBtn.style.background = 'var(--success-color, #00BA7C)';\n      } else {\n        actionBtn.textContent = 'Summarize';\n      }\n\n      cardHeader.appendChild(tweetInfo);\n      cardHeader.appendChild(actionBtn);\n      card.appendChild(cardHeader);\n\n      // Summary container (initially hidden)\n      const summaryContainer = document.createElement('div');\n      summaryContainer.style.cssText = 'display: none; margin-top: 12px; padding: 12px; background: var(--bg-color); border-radius: 6px;';\n      summaryContainer.id = `summary-${index}`;\n      card.appendChild(summaryContainer);\n\n      actionBtn.addEventListener('click', async () => {\n        if (cachedSummaries[cacheKey]) {\n          // Show cached summary\n          this.displaySummary(summaryContainer, cachedSummaries[cacheKey]);\n          summaryContainer.style.display = 'block';\n          actionBtn.textContent = 'Hide Summary';\n          actionBtn.addEventListener('click', () => {\n            if (summaryContainer.style.display === 'none') {\n              summaryContainer.style.display = 'block';\n              actionBtn.textContent = 'Hide Summary';\n            } else {\n              summaryContainer.style.display = 'none';\n              actionBtn.textContent = 'View Summary';\n            }\n          }, { once: true });\n        } else {\n          // Generate new summary\n          actionBtn.textContent = 'Summarizing...';\n          actionBtn.disabled = true;\n          actionBtn.style.opacity = '0.6';\n\n          try {\n            const summary = await this.summarizeArticle(articleUrl);\n\n            // Cache the summary\n            cachedSummaries[cacheKey] = summary;\n            await chrome.storage.local.set({ articleSummaries: cachedSummaries });\n\n            // Display summary\n            this.displaySummary(summaryContainer, summary);\n            summaryContainer.style.display = 'block';\n            actionBtn.textContent = 'Hide Summary';\n            actionBtn.disabled = false;\n            actionBtn.style.opacity = '1';\n            actionBtn.style.background = 'var(--success-color, #00BA7C)';\n          } catch (error) {\n            summaryContainer.innerHTML = `\n              <div style=\"color: var(--danger-color, #F4212E); font-size: 14px;\">\n                \u274C Error: ${error.message}\n              </div>\n            `;\n            summaryContainer.style.display = 'block';\n            actionBtn.textContent = 'Retry';\n            actionBtn.disabled = false;\n            actionBtn.style.opacity = '1';\n          }\n        }\n      });\n\n      articlesList.appendChild(card);\n    });\n\n    dialogContent.appendChild(articlesList);\n\n    // Close button\n    const closeBtn = document.createElement('button');\n    closeBtn.textContent = 'Close';\n    closeBtn.style.cssText = `\n      width: 100%; padding: 14px;\n      border: 1px solid var(--border-color);\n      background: transparent;\n      color: var(--text-color);\n      border-radius: 8px;\n      cursor: pointer;\n      font-weight: 600;\n      font-size: 14px;\n    `;\n    closeBtn.addEventListener('click', () => document.body.removeChild(dialog));\n    dialogContent.appendChild(closeBtn);\n\n    dialog.appendChild(dialogContent);\n    document.body.appendChild(dialog);\n  };\n\n  extractArticleUrls = (text) => {\n    // Extract URLs from tweet text\n    const urlRegex = /https?:\\/\\/[^\\s]+/g;\n    const urls = text.match(urlRegex) || [];\n\n    // Filter out Twitter/X URLs and media URLs\n    return urls.filter(url => {\n      const lowerUrl = url.toLowerCase();\n      return !lowerUrl.includes('twitter.com') &&\n        !lowerUrl.includes('x.com') &&\n        !lowerUrl.includes('pbs.twimg.com') &&\n        !lowerUrl.match(/\\.(jpg|jpeg|png|gif|webp|mp4|webm|mov)$/i);\n    });\n  };\n\n  getArticleCacheKey = (url) => {\n    // Create a simple hash of the URL for caching\n    return btoa(url).substring(0, 50);\n  };\n\n  summarizeArticle = async (articleUrl) => {\n    // Step 1: Fetch article content using Jina Reader API\n    this.updateStatus('Fetching article content...');\n\n    const jinaUrl = `https://r.jina.ai/${articleUrl}`;\n    const jinaResponse = await fetch(jinaUrl, {\n      headers: {\n        'Accept': 'application/json',\n        'X-Return-Format': 'markdown'\n      }\n    });\n\n    if (!jinaResponse.ok) {\n      throw new Error('Failed to fetch article content');\n    }\n\n    const jinaData = await jinaResponse.json();\n    const articleText = jinaData.data?.content || jinaData.content || '';\n\n    if (!articleText || articleText.length < 100) {\n      throw new Error('Article content too short or empty');\n    }\n\n    // Limit article text to first 4000 characters for API efficiency\n    const truncatedText = articleText.substring(0, 4000);\n\n    // Step 2: Summarize using configured LLM provider\n    this.updateStatus('Generating summary with AI...');\n\n    const prompt = `Please provide a concise summary of the following article in 3-5 bullet points. Focus on the key takeaways and main arguments.\n\nArticle:\n${truncatedText}\n\nSummary (3-5 bullet points):`;\n\n    let summary;\n\n    if (this.state.llmProvider === 'openai') {\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${this.state.apiKey}`\n        },\n        body: JSON.stringify({\n          model: 'gpt-3.5-turbo',\n          messages: [\n            { role: 'system', content: 'You are a helpful assistant that summarizes articles concisely.' },\n            { role: 'user', content: prompt }\n          ],\n          max_tokens: 300,\n          temperature: 0.5\n        })\n      });\n\n      if (!response.ok) {\n        throw new Error('OpenAI API request failed');\n      }\n\n      const data = await response.json();\n      summary = data.choices[0].message.content;\n\n    } else if (this.state.llmProvider === 'anthropic') {\n      const response = await fetch('https://api.anthropic.com/v1/messages', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'x-api-key': this.state.apiKey,\n          'anthropic-version': '2023-06-01'\n        },\n        body: JSON.stringify({\n          model: 'claude-3-5-sonnet-20241022',\n          max_tokens: 300,\n          messages: [\n            { role: 'user', content: prompt }\n          ]\n        })\n      });\n\n      if (!response.ok) {\n        throw new Error('Anthropic API request failed');\n      }\n\n      const data = await response.json();\n      summary = data.content[0].text;\n\n    } else {\n      // Fallback: extract key sentences\n      summary = this.extractKeySentences(truncatedText, 5);\n    }\n\n    this.updateStatus('Summary generated successfully!');\n\n    return {\n      summary,\n      url: articleUrl,\n      timestamp: Date.now(),\n      provider: this.state.llmProvider\n    };\n  };\n\n  extractKeySentences = (text, count = 5) => {\n    // Simple extractive summarization\n    const sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 20);\n\n    // Score sentences by length and position\n    const scoredSentences = sentences.map((sentence, index) => ({\n      text: sentence.trim(),\n      score: sentence.length + (index < 5 ? 50 : 0) // Boost early sentences\n    }));\n\n    // Get top sentences\n    const topSentences = scoredSentences\n      .sort((a, b) => b.score - a.score)\n      .slice(0, count)\n      .map(s => '\u2022 ' + s.text);\n\n    return topSentences.join('\\n');\n  };\n\n  displaySummary = (container, summaryData) => {\n    const timeAgo = this.getTimeAgo(summaryData.timestamp);\n\n    container.innerHTML = `\n      <div style=\"margin-bottom: 8px; color: var(--disabled-color); font-size: 12px;\">\n        Generated ${timeAgo} \u2022 Provider: ${summaryData.provider || 'local'}\n      </div>\n      <div style=\"color: var(--text-color); font-size: 14px; line-height: 1.6; white-space: pre-wrap;\">\n        ${summaryData.summary}\n      </div>\n      <a href=\"${summaryData.url}\" target=\"_blank\" style=\"\n        display: inline-block;\n        margin-top: 12px;\n        padding: 6px 12px;\n        background: var(--primary-color);\n        color: white;\n        text-decoration: none;\n        border-radius: 16px;\n        font-size: 12px;\n        font-weight: 600;\n      \">Read Full Article \u2192</a>\n    `;\n  };\n\n  getTimeAgo = (timestamp) => {\n    const seconds = Math.floor((Date.now() - timestamp) / 1000);\n\n    if (seconds < 60) return 'just now';\n    if (seconds < 3600) return `${Math.floor(seconds / 60)} minutes ago`;\n    if (seconds < 86400) return `${Math.floor(seconds / 3600)} hours ago`;\n    return `${Math.floor(seconds / 86400)} days ago`;\n  };\n}\n\n// Initialize the popup controller when the DOM is loaded\ndocument.addEventListener('DOMContentLoaded', () => {\n  new PopupController();\n});\nif (typeof module !== 'undefined' && module.exports) { module.exports = { PopupController, GeminiProvider, LLMProvider, OpenAIProvider, AnthropicProvider, LLMFreeProvider }; }\n"],
  "mappings": "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",
  "names": ["_a", "text", "prompt"]
}
